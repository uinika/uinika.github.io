<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Qt 5 桌面应用程序开发指南 - QtWidgets 篇 - UinIO.com 电子技术实验室</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="UinIO 电子技术实验室"><meta name="msapplication-TileImage" content="/images/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="UinIO 电子技术实验室"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Qt 5.14.2 是跨平台应用开发框架 Qt 的最新版本，除了采用基于 C++11 的经典 Qt Widgets 进行桌面应用程序开发以外，还支持通过 Qt Quick 快速开发适用于移动端设备的用户界面，因为 Qt 5 底层图形渲染引擎基于 GPU 硬件加速，所以其能够保持与原生 C++ 近乎等同的运行效率。笔者计划通过两篇文章分别对这 2 种技术进行介绍，但是无论如何，在传统跨"><meta property="og:type" content="blog"><meta property="og:title" content="Qt 5 桌面应用程序开发指南 - QtWidgets 篇"><meta property="og:url" content="http://www.uinio.com/C&amp;C++/Qt-Widgets/"><meta property="og:site_name" content="UinIO.com 电子技术实验室"><meta property="og:description" content="Qt 5.14.2 是跨平台应用开发框架 Qt 的最新版本，除了采用基于 C++11 的经典 Qt Widgets 进行桌面应用程序开发以外，还支持通过 Qt Quick 快速开发适用于移动端设备的用户界面，因为 Qt 5 底层图形渲染引擎基于 GPU 硬件加速，所以其能够保持与原生 C++ 近乎等同的运行效率。笔者计划通过两篇文章分别对这 2 种技术进行介绍，但是无论如何，在传统跨"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.uinio.com/images/favicon.png"><meta property="article:published_time" content="2020-08-20T16:00:00.000Z"><meta property="article:modified_time" content="2020-10-06T16:00:00.000Z"><meta property="article:author" content="Hank"><meta property="article:tag" content="Qt"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://www.uinio.com/images/favicon.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://www.uinio.com/C&C++/Qt-Widgets/"},"headline":"Qt 5 桌面应用程序开发指南 - QtWidgets 篇","image":["http://www.uinio.com/C&C++/Qt-Widgets/logo.png"],"datePublished":"2020-08-20T16:00:00.000Z","dateModified":"2020-10-06T16:00:00.000Z","author":{"@type":"Person","name":"Hank"},"publisher":{"@type":"Organization","name":"UinIO.com 电子技术实验室","logo":{"@type":"ImageObject","url":{"text":"UinIO Lab"}}},"description":"Qt\r 5.14.2 是跨平台应用开发框架 Qt 的最新版本，除了采用基于\r C++11 的经典 Qt\r Widgets 进行桌面应用程序开发以外，还支持通过 Qt\r Quick 快速开发适用于移动端设备的用户界面，因为 Qt 5\r 底层图形渲染引擎基于 GPU 硬件加速，所以其能够保持与原生\r C++ 近乎等同的运行效率。笔者计划通过两篇文章分别对这 2\r 种技术进行介绍，但是无论如何，在传统跨"}</script><link rel="canonical" href="http://www.uinio.com/C&amp;C++/Qt-Widgets/"><link rel="alternate" href="/atom.xml" title="UinIO.com 电子技术实验室" type="application/atom+xml"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://unpkg.com/highlight.js@11.7.0/styles/monokai.css"><link rel="stylesheet" href="https://fonts.font.im/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://unpkg.com/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://unpkg.com/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://unpkg.com/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">UinIO Lab</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1514341594">Bilibili</a><a class="navbar-item" target="_blank" rel="noopener" href="https://www.zhihu.com/people/uinika">知乎</a><a class="navbar-item" target="_blank" rel="noopener" href="https://github.com/uinika">Github</a><a class="navbar-item" target="_blank" rel="noopener" href="https://gitee.com/uinika">Gitee</a><a class="navbar-item" href="/my/works.html">开源硬件</a><a class="navbar-item" href="/my/about.html">关于我</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-08-20T16:00:00.000Z" title="2020/8/21 00:00:00">2020-08-21</time>发表</span><span class="level-item"><time dateTime="2020-10-06T16:00:00.000Z" title="2020/10/7 00:00:00">2020-10-07</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/C-C-%E8%AF%AD%E8%A8%80/">C/C++ 语言</a></span><span class="level-item">5 小时读完 (大约44276个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Qt 5 桌面应用程序开发指南 - QtWidgets 篇</h1><div class="content"><p><a target="_blank" rel="noopener" href="https://www.qt.io/offline-installers"><strong>Qt
5.14.2</strong></a> 是跨平台应用开发框架 Qt 的最新版本，除了采用基于
<strong>C++11</strong> 的经典 <a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qtwidgets-index.html"><strong>Qt
Widgets</strong></a> 进行桌面应用程序开发以外，还支持通过 <strong>Qt
Quick</strong> 快速开发适用于移动端设备的用户界面，因为 Qt 5
底层图形渲染引擎基于 GPU 硬件加速，所以其能够保持与原生
<strong>C++</strong> 近乎等同的运行效率。笔者计划通过两篇文章分别对这 2
种技术进行介绍，但是无论如何，在传统跨平台桌面应用开发领域，<strong>Qt
Widgets</strong> 依然是 Qt5 最为基础与核心的内容。</p>
<p><img src="/C&C++/Qt-Widgets/logo.png"></p>
<p>虽然 Qt 6 发布在即，但是官方声明将会依然保持 API
的兼容与稳定性，因此本文依然基于当前最新的 Qt5
稳定版本撰写。全文将会分别对 <strong>Qt Widgets</strong>
当中使用较为频繁的<code>窗口部件</code>、<code>布局管理</code>、<code>应用主窗口</code>、<code>事件系统</code>、<code>对象模型</code>、<code>风格与样式</code>、<code>国际化</code>等部分内容进行深入介绍，同时展示完善的示例代码以及程序运行效果，并结合<a href="./embedded/Qt-Quick.html">《QtQuick
篇》</a>一文讲解混合编程相关的技术。</p>
<span id="more"></span>
<h2 id="hello-qt">Hello Qt</h2>
<p>Qt Creator 是一个跨平台的的 Qt 集成开发环境，囊括了 C++
代码编辑器、项目管理工具、上下文相关的帮助系统、图形化调试器、代码管理与浏览等一系列日常开发工具。本文使用的
Qt Creator
为最新的<code>4.11.0</code>版本。其主要由菜单栏、模式选择器、构建套件选择器、定位器、输出窗格、工作区等部分组成，具体界面布局如下图所示：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/IDE.png"></p>
<blockquote>
<p><strong>注意</strong>：可以通过【Ctrl +
鼠标滚轮】对工作区字体进行缩放，如果需要还原字体的默认设置，则直接接下快捷键【Ctrl
+ 0】即可。</p>
</blockquote>
<h3 id="新建-widgets-工程">新建 Widgets 工程</h3>
<p>本小节将建立一个用于显示一个<code>Hello World! Hello Qt!</code>字符串的<code>helloworld</code>工程，从而体现一个
Qt Widgets
项目从创建、运行到发布的完整过程；然后从<code>main.cpp</code>主函数入手，到<code>.ui</code>图形界面文件，再到自定义的
C++ 类，逐步对示例当中的代码进行解析。</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Step-0.png"></p>
<p><img src="/C&C++/Qt-Widgets/Hello/Step-1.png"></p>
<p><img src="/C&C++/Qt-Widgets/Hello/Step-2.png"></p>
<p><img src="/C&C++/Qt-Widgets/Hello/Step-3.png"></p>
<p><img src="/C&C++/Qt-Widgets/Hello/Step-4.png"></p>
<p>完成上述的工程创建步骤之后，打开工程所在的目录，可以看到生成了如下 6
个文件：</p>
<table>
<thead>
<tr class="header">
<th>源文件</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>helloworld.pro</code></td>
<td>项目文件；</td>
</tr>
<tr class="even">
<td><code>helloworld.pro.user</code></td>
<td>用户相关的项目信息；</td>
</tr>
<tr class="odd">
<td><code>main.cpp</code></td>
<td>主函数文件；</td>
</tr>
<tr class="even">
<td><code>hellodialog.h</code></td>
<td>新建的<code>HelloDialog</code>类头文件；</td>
</tr>
<tr class="odd">
<td><code>hellodialog.cpp</code></td>
<td>新建的<code>Hellodialog</code>类源文件；</td>
</tr>
<tr class="even">
<td><code>hellodialog.ui</code></td>
<td>界面设计文件；</td>
</tr>
</tbody>
</table>
<p>Qt Creator
当中双击上面列表中的<code>hellodialog.ui</code>文件即可进入【设计】模式，其功能区域分布如下图所示：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Design.png"></p>
<p>接下来，首先从【部件列表窗口】找到<code>Label</code>标签部件，然后按住鼠标左键将其拖动至【主设计区】，双击进入编辑状态并输入<code>Hello World! Hello Qt!</code>字符串，同时将外层<code>HelloDialog</code>对话框的宽高度分别设置为<code>400 * 300</code>，字体设置为大小<code>16</code>的<code>Consolas</code>，此时可以按下【Alt
+ Ctrl + R】快捷键可以对当前界面进行预览。</p>
<p><img src="/C&C++/Qt-Widgets/Hello/HelloDialog.png"></p>
<p>点击 Qt Creator 左下角的【构建套件选择器】，依次选择
<code>Desktop Qt 5.14.2 MinGW 32-bit ➥ Release</code>，然后按下【Ctrl+R】快捷键或者鼠标点击左下角运行按钮编译并运行当前程序。此时，会在工程所在目录生成一个名为<code>build-helloworld-Desktop_Qt_5_14_2_MinGW_32_bit-Release</code>的目录，其中<code>release</code>子目录下的<code>helloworld.exe</code>即是编译后输出的可执行程序，此时在操作系统当中鼠标双击运行该<code>.exe</code>文件，则会提示以下错误信息：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Error.png"></p>
<p>该问题是由于<code>helloworld.exe</code>程序无法找到 <strong>Qt
库</strong>、<strong>MinGW 32</strong>、<strong>其它第三方库</strong>
等<code>.dll</code>动态链接库依赖所导致，首先需要将 <strong>MinGW
32bit</strong>
所对应的<code>D:\software\Tech\Qt\5.14.2\mingw73_32\bin</code>和<code>D:\software\Tech\Qt\Tools\mingw730_32\bin</code>添加至系统环境变量<code>PATH</code>，然后将<code>helloworld.exe</code>复制到新建的<code>D:\Workspace\Qt-build</code>目录下，然后进入命令行执行<code>windeployqt</code>命令：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">λ windeployqt \Workspace\Qt-build\</span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">D:\<span class="title">Workspace</span>\<span class="title">Qt</span>-<span class="title">build</span>\<span class="title">helloworld.exe</span> 32 <span class="title">bit</span>, <span class="title">release</span> <span class="title">executable</span></span></span><br><span class="line"><span class="function"><span class="title">Adding</span> <span class="title">Qt5Svg</span> <span class="title">for</span> <span class="title">qsvgicon.dll</span></span></span><br><span class="line"><span class="function"><span class="title">Skipping</span> <span class="title">plugin</span> <span class="title">qtvirtualkeyboardplugin.dll</span> <span class="title">due</span> <span class="title">to</span> <span class="title">disabled</span> <span class="title">dependencies</span> (<span class="title">Qt5Qml</span> <span class="title">Qt5Quick</span>).</span></span><br><span class="line"><span class="function"><span class="title">Skipping</span> <span class="title">plugin</span> <span class="title">qtvirtualkeyboard_hangul.dll</span> <span class="title">due</span> <span class="title">to</span> <span class="title">disabled</span> <span class="title">dependencies</span> (<span class="title">Qt5Qml</span> <span class="title">Qt5Quick</span>).</span></span><br><span class="line"><span class="function"><span class="title">Skipping</span> <span class="title">plugin</span> <span class="title">qtvirtualkeyboard_openwnn.dll</span> <span class="title">due</span> <span class="title">to</span> <span class="title">disabled</span> <span class="title">dependencies</span> (<span class="title">Qt5Qml</span> <span class="title">Qt5Quick</span>).</span></span><br><span class="line"><span class="function"><span class="title">Skipping</span> <span class="title">plugin</span> <span class="title">qtvirtualkeyboard_pinyin.dll</span> <span class="title">due</span> <span class="title">to</span> <span class="title">disabled</span> <span class="title">dependencies</span> (<span class="title">Qt5Qml</span> <span class="title">Qt5Quick</span>).</span></span><br><span class="line"><span class="function"><span class="title">Skipping</span> <span class="title">plugin</span> <span class="title">qtvirtualkeyboard_tcime.dll</span> <span class="title">due</span> <span class="title">to</span> <span class="title">disabled</span> <span class="title">dependencies</span> (<span class="title">Qt5Qml</span> <span class="title">Qt5Quick</span>).</span></span><br><span class="line"><span class="function"><span class="title">Skipping</span> <span class="title">plugin</span> <span class="title">qtvirtualkeyboard_thai.dll</span> <span class="title">due</span> <span class="title">to</span> <span class="title">disabled</span> <span class="title">dependencies</span> (<span class="title">Qt5Qml</span> <span class="title">Qt5Quick</span>).</span></span><br><span class="line"><span class="function"><span class="title">Direct</span> <span class="title">dependencies</span>: <span class="title">Qt5Core</span> <span class="title">Qt5Gui</span> <span class="title">Qt5Widgets</span></span></span><br><span class="line"><span class="function"><span class="title">All</span> <span class="title">dependencies</span>   : <span class="title">Qt5Core</span> <span class="title">Qt5Gui</span> <span class="title">Qt5Widgets</span></span></span><br><span class="line"><span class="function"><span class="title">To</span> <span class="title">be</span> <span class="title">deployed</span>     : <span class="title">Qt5Core</span> <span class="title">Qt5Gui</span> <span class="title">Qt5Svg</span> <span class="title">Qt5Widgets</span></span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">Qt5Core.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">Qt5Gui.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">Qt5Svg.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">Qt5Widgets.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">libGLESv2.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">libEGL.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">D3Dcompiler_47.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">opengl32sw.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">libgcc_s_dw2</span>-1.<span class="title">dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">libstdc</span>++-6.<span class="title">dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">libwinpthread</span>-1.<span class="title">dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Creating</span> <span class="title">directory</span> <span class="title">D</span>:/<span class="title">Workspace</span>/<span class="title">Qt</span>-<span class="title">build</span>/<span class="title">iconengines</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qsvgicon.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Creating</span> <span class="title">directory</span> <span class="title">D</span>:/<span class="title">Workspace</span>/<span class="title">Qt</span>-<span class="title">build</span>/<span class="title">imageformats</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qgif.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qicns.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qico.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qjpeg.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qsvg.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qtga.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qtiff.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qwbmp.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qwebp.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Creating</span> <span class="title">directory</span> <span class="title">D</span>:/<span class="title">Workspace</span>/<span class="title">Qt</span>-<span class="title">build</span>/<span class="title">platforms</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qwindows.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Creating</span> <span class="title">directory</span> <span class="title">D</span>:/<span class="title">Workspace</span>/<span class="title">Qt</span>-<span class="title">build</span>/<span class="title">styles</span>.</span></span><br><span class="line"><span class="function"><span class="title">Updating</span> <span class="title">qwindowsvistastyle.dll</span>.</span></span><br><span class="line"><span class="function"><span class="title">Creating</span> <span class="title">D</span>:\<span class="title">Workspace</span>\<span class="title">Qt</span>-<span class="title">build</span>\<span class="title">translations</span>...</span></span><br><span class="line"><span class="function"><span class="title">Creating</span> <span class="title">qt_ar.qm</span>...</span></span><br><span class="line"><span class="function">... ... ... ... ...</span></span><br><span class="line"><span class="function"><span class="title">Creating</span> <span class="title">qt_zh_TW.qm</span>...</span></span><br></pre></td></tr></table></figure>
<p><strong>windeployqt</strong> 是一款用于 Windows 操作系统的 Qt
自动部署工具，可以自动补充动态链接库依赖，命令执行完成以后再次双击<code>helloworld.exe</code>即可正确的运行程序。</p>
<p>针对某些需要进行源码静态编译场景，出于方便的角度，可以考虑使用<a target="_blank" rel="noopener" href="https://enigmaprotector.com/en/downloads.html">Enigma Virtual
Box</a>，该软件是一款文件与注册表虚拟化系统，允许将 Windows
注册表与多种类型的文件（<code>.dll</code>、<code>.ocx</code>、<code>.avi</code>、<code>.mp3</code>、<code>.txt</code>、<code>.doc</code>等）嵌入至一个独立的<code>.exe</code>可执行文件当中，并且在运行时不会产生任何的临时文件，从而实现类似于静态编译的效果：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Enigma.png"></p>
<p>程序发布时如果希望<code>.exe</code>拥有一个漂亮的图标，首先，需要添加一个<code>.icon</code>格式的位图文件到项目目录下面：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Favicon-1.png"></p>
<p>然后，打开<code>helloworld.pro</code>文件添加如下配置项：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">RC_ICONS</span> = favicon.<span class="property">ico</span>;</span><br></pre></td></tr></table></figure>
<p>重新编译运行程序，可以发现应用程序的桌面图标以及启动后的左上角图标都被更新为刚才设置的图标：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Favicon-2.png"></p>
<p>如果需要自行将<code>.png</code>制作为<code>.ico</code>图片，则可以选用(ImageMagick)[https://imagemagick.org/index.php]进行创建，安装以后执行如下命令：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">λ magick.exe <span class="built_in">convert</span> icon-<span class="number">16</span>.png icon-<span class="number">32</span>.png icon-<span class="number">256</span>.png icon.ico</span><br></pre></td></tr></table></figure>
<h3 id="main.cpp-版实现">main.cpp 版实现</h3>
<p>打开 Qt Creator 新建一个 <strong>Empty gmake Project</strong>
工程，并将其命名为<code>helloworld</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Code-1.png"></p>
<p>完成之后，双击工程上的<code>helloworld.pro</code>工程配置文件，由于本示例当中使用的类都包含在<code>widgets</code>模块，所以需要添加下面的代码对其进行注册：</p>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QT += widgets</span><br></pre></td></tr></table></figure>
<p>鼠标右键选择工程列表上的工程名称<code>helloworld</code>，在弹出的右键菜单上选择【Add
New...】，然后选择【C++ Source
File】新建一个<code>main.cpp</code>源文件：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Code-2.png"></p>
<p>向<code>main.cpp</code>里添加下面的源代码，然后点击 Qt Creator
左下角的【运行】按钮就可以观察到之前程序所展示的效果：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLabel&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFont&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> * argv[])</span></span>&#123;</span><br><span class="line">  <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 设置全局字体以及尺寸 */</span></span><br><span class="line">  QFont font;</span><br><span class="line">  font.<span class="built_in">setFamily</span>(<span class="string">&quot;Consolas&quot;</span>);</span><br><span class="line">  font.<span class="built_in">setPixelSize</span>(<span class="number">16</span>);</span><br><span class="line">  app.<span class="built_in">setFont</span>(font);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 设置对话框尺寸 */</span></span><br><span class="line">  QDialog dialog;</span><br><span class="line">  dialog.<span class="built_in">resize</span>(<span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 设置标签文本与位置 */</span></span><br><span class="line">  <span class="function">QLabel <span class="title">label</span><span class="params">(&amp;dialog)</span></span>;</span><br><span class="line">  label.<span class="built_in">move</span>(<span class="number">100</span>, <span class="number">120</span>);</span><br><span class="line">  label.<span class="built_in">setText</span>(<span class="string">&quot;Hello World! Hello Qt!&quot;</span>);</span><br><span class="line"></span><br><span class="line">  dialog.<span class="built_in">show</span>();</span><br><span class="line">  <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>事实上，我们也可以抛开 Qt Creator 提供的 IDE
环境，手动生成工程并编译代码。首先新建一个<code>helloworld</code>工程目录以及对应的<code>main.cpp</code>文件，然后进入<code>helloworld</code>执行<code>qmake -project</code>命令生成<code>.pro</code>工程配置文件：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">qmake</span> -<span class="title">project</span></span></span><br></pre></td></tr></table></figure>
<p>向<code>helloworld.pro</code>文件添加<code>QT += widgets</code>配置项，然后输入<code>qmake</code>命令生成编译所需的
<strong>Makefile</strong>
文件，以及相应的<code>debug</code>和<code>release</code>目录：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">qmake</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Info</span>: <span class="title">creating</span> <span class="title">stash</span> <span class="title">file</span> <span class="title">C</span>:\<span class="title">Workspace</span>\<span class="title">helloworld</span>\.<span class="title">qmake.stash</span></span></span><br></pre></td></tr></table></figure>
<p>执行<code>mingw32-make</code>命令基于 <strong>Makefile</strong>
编译程序并将<code>helloworld.exe</code>程序输出至<code>release</code>目录：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">mingw32</span>-<span class="title">make</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">C</span>:/<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">bin</span>/<span class="title">qmake.exe</span> -<span class="title">o</span> <span class="title">Makefile</span> <span class="title">helloworld.pro</span></span></span><br><span class="line"><span class="function"><span class="title">mingw32</span>-<span class="title">make</span> -<span class="title">f</span> <span class="title">Makefile.Release</span></span></span><br><span class="line"><span class="function"><span class="title">mingw32</span>-<span class="title">make</span>[1]: <span class="title">Entering</span> <span class="title">directory</span> &#x27;<span class="title">C</span>:/<span class="title">Workspace</span>/<span class="title">helloworld</span>&#x27;</span></span><br><span class="line"><span class="function"><span class="title">g</span>++ -<span class="title">c</span> -<span class="title">fno</span>-<span class="title">keep</span>-<span class="title">inline</span>-<span class="title">dllexport</span> -<span class="title">O2</span> -<span class="title">Wall</span> -<span class="title">Wextra</span> -<span class="title">Wextra</span> -<span class="title">fexceptions</span> -<span class="title">mthreads</span> -<span class="title">DUNICODE</span> -<span class="title">D_UNICODE</span> -<span class="title">DWIN32</span> -<span class="title">DMINGW_HAS_SECURE_API</span>=1 -<span class="title">DQT_NO_DEBUG</span> -<span class="title">DQT_WIDGETS_LIB</span> -<span class="title">DQT_GUI_LIB</span> -<span class="title">DQT_CORE_LIB</span> -<span class="title">DQT_NEEDS_QMAIN</span> -<span class="title">I</span>. -<span class="title">I</span>. -<span class="title">I</span>../../<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span> -<span class="title">I</span>../../<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span>/<span class="title">QtWidgets</span> -<span class="title">I</span>../../<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span>/<span class="title">QtGui</span> -<span class="title">I</span>../../<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span>/<span class="title">QtANGLE</span> -<span class="title">I</span>../../<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span>/<span class="title">QtCore</span> -<span class="title">Irelease</span> -<span class="title">I</span>../../<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">mkspecs</span>/<span class="title">win32</span>-<span class="title">g</span>++  -<span class="title">o</span> <span class="title">release</span>/<span class="title">main.o</span> <span class="title">main.cpp</span></span></span><br><span class="line"><span class="function"><span class="title">g</span>++ -<span class="title">Wl</span>,-<span class="title">s</span> -<span class="title">Wl</span>,-<span class="title">subsystem</span>,<span class="title">windows</span> -<span class="title">mthreads</span> -<span class="title">o</span> <span class="title">release</span>/<span class="title">helloworld.exe</span> <span class="title">release</span>/<span class="title">main.o</span>  <span class="title">C</span>:/<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">lib</span>/<span class="title">libQt5Widgets.a</span> <span class="title">C</span>:/<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">lib</span>/<span class="title">libQt5Gui.a</span> <span class="title">C</span>:/<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">lib</span>/<span class="title">libQt5Core.a</span>  -<span class="title">lmingw32</span> <span class="title">C</span>:/<span class="title">Software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">lib</span>/<span class="title">libqtmain.a</span> -<span class="title">LC</span>:/<span class="title">openssl</span>/<span class="title">lib</span> -<span class="title">LC</span>:/<span class="title">Utils</span>/<span class="title">my_sql</span>/<span class="title">mysql</span>-5.7.25-<span class="title">win32</span>/<span class="title">lib</span> -<span class="title">LC</span>:/<span class="title">Utils</span>/<span class="title">postgresql</span>/<span class="title">pgsql</span>/<span class="title">lib</span> -<span class="title">lshell32</span></span></span><br><span class="line"><span class="function"><span class="title">mingw32</span>-<span class="title">make</span>[1]: <span class="title">Leaving</span> <span class="title">directory</span> &#x27;<span class="title">C</span>:/<span class="title">Workspace</span>/<span class="title">helloworld</span>&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="hellodialog.ui-版实现">hellodialog.ui 版实现</h3>
<p>延用上一步的工程，根据如下步骤新建一个<code>hellodialog.ui</code>文件，并自动进入【设计】模式：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/UI-1.png"></p>
<p><img src="/C&C++/Qt-Widgets/Hello/UI-2.png"></p>
<p><img src="/C&C++/Qt-Widgets/Hello/UI-3.png"></p>
<p>首先，将外层<code>QDialog</code>对话框的<code>objectName</code>属性名称修改为<code>HelloDialog</code>。然后，添加一个<code>Label</code>部件然后设置字体为<code>14</code>像素的<code>Consolas</code>，完成后保存并按下快捷键【Ctrl
+ 2】切换回【编辑】界面，此时可以看到<code>.ui</code>本质是一个 XML
文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Dialog<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QDialog&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Dialog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Dialog<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>90<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>130<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>221<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>21<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;font&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">font</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">family</span>&gt;</span>Consolas<span class="tag">&lt;/<span class="name">family</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">pointsize</span>&gt;</span>14<span class="tag">&lt;/<span class="name">pointsize</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Hello World! Hello Qt!<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>按下快捷键【Ctrl + Shift + B】或者鼠标点击 Qt Creator
左下角的【构建项目】按钮，会将<code>hellodialog.ui</code>解析为<code>build-helloworld-Desktop_Qt_5_14_2_MinGW_32_bit-Release</code>目录下的一个名为<code>ui_hellodialog.h</code>头文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> UI_HELLODIALOG_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> UI_HELLODIALOG_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtCore/QVariant&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtWidgets/QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtWidgets/QDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtWidgets/QLabel&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ui_HelloDialog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        QLabel *label;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 设置界面 */</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setupUi</span><span class="params">(QDialog *HelloDialog)</span></span>&#123;</span><br><span class="line">        <span class="comment">/* 设置对话框部件名称与大小尺寸*/</span></span><br><span class="line">        <span class="keyword">if</span> (HelloDialog-&gt;<span class="built_in">objectName</span>().<span class="built_in">isEmpty</span>())</span><br><span class="line">            HelloDialog-&gt;<span class="built_in">setObjectName</span>(QString::<span class="built_in">fromUtf8</span>(<span class="string">&quot;HelloDialog&quot;</span>));</span><br><span class="line">        HelloDialog-&gt;<span class="built_in">resize</span>(<span class="number">400</span>, <span class="number">300</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 设置标签部件的名称、大小、位置 */</span></span><br><span class="line">        label = <span class="keyword">new</span> <span class="built_in">QLabel</span>(HelloDialog);</span><br><span class="line">        label-&gt;<span class="built_in">setObjectName</span>(QString::<span class="built_in">fromUtf8</span>(<span class="string">&quot;label&quot;</span>));</span><br><span class="line">        label-&gt;<span class="built_in">setGeometry</span>(<span class="built_in">QRect</span>(<span class="number">90</span>, <span class="number">130</span>, <span class="number">221</span>, <span class="number">21</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 设置字体格式与大小 */</span></span><br><span class="line">        QFont font;</span><br><span class="line">        font.<span class="built_in">setFamily</span>(QString::<span class="built_in">fromUtf8</span>(<span class="string">&quot;Consolas&quot;</span>));</span><br><span class="line">        font.<span class="built_in">setPointSize</span>(<span class="number">14</span>);</span><br><span class="line">        label-&gt;<span class="built_in">setFont</span>(font);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">retranslateUi</span>(HelloDialog);                     <span class="comment">// 调用 retranslateUi(QDialog *Dialog)</span></span><br><span class="line">        QMetaObject::<span class="built_in">connectSlotsByName</span>(HelloDialog);   <span class="comment">// 调用 QMetaObject 类的静态函数 connectSlotsByName(Dialog)，使得部件可以基于对象名进行信号与槽的关联</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 对窗口字符串进行编码转换 */</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">retranslateUi</span><span class="params">(QDialog *HelloDialog)</span> </span>&#123;</span><br><span class="line">        HelloDialog-&gt;<span class="built_in">setWindowTitle</span>(QCoreApplication::<span class="built_in">translate</span>(<span class="string">&quot;HelloDialog&quot;</span>, <span class="string">&quot;Dialog&quot;</span>, <span class="literal">nullptr</span>));</span><br><span class="line">        label-&gt;<span class="built_in">setText</span>(QCoreApplication::<span class="built_in">translate</span>(<span class="string">&quot;HelloDialog&quot;</span>, <span class="string">&quot;Hello World! Hello Qt!&quot;</span>, <span class="literal">nullptr</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloDialog</span>: <span class="keyword">public</span> Ui_HelloDialog &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>从上面代码可以看出，Qt
在【设计】模式下实现的<code>.ui</code>文件，在编译过程当中会最终转换为<code>.h</code>头文件。接下来修改<code>main.cpp</code>的源代码，导入这个转换之后的<code>.h</code>头文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_hellodialog.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QDialog dialog;</span><br><span class="line">    Ui::HelloDialog ui;   <span class="comment">// 采用 ui_hellodialog.h 中定义的 Ui_HelloDialog 类声明 ui 属性</span></span><br><span class="line">    ui.<span class="built_in">setupUi</span>(&amp;dialog);  <span class="comment">// 调用 Ui_HelloDialog 中定义的 setupUi() 函数</span></span><br><span class="line">    dialog.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同样的，我们也可以直接借助命令行工具完成<code>hellodialog.ui</code>和<code>main.cpp</code>文件的编译，保留这两个文件并且清除其它的工程文件，然后打开命令行工具，使用<code>uic</code>命令将<code>hellodialog.ui</code>解析为<code>ui_hellodialog.h</code>头文件：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">ls</span></span></span><br><span class="line"><span class="function"><span class="title">hellodialog.ui</span>  <span class="title">main.cpp</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">uic</span> -<span class="title">o</span> <span class="title">ui_hellodialog.h</span> <span class="title">hellodialog.ui</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">ls</span></span></span><br><span class="line"><span class="function"><span class="title">hellodialog.ui</span>  <span class="title">main.cpp</span>  <span class="title">ui_hellodialog.h</span></span></span><br></pre></td></tr></table></figure>
<p><code>ui_hellodialog.h</code>头文件解析完成之后，同样通过执行<code>qmake -project</code>命令生成<code>helloworld.pro</code>工程配置文件：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">qmake</span> -<span class="title">project</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">ls</span></span></span><br><span class="line"><span class="function"><span class="title">hellodialog.ui</span>  <span class="title">helloworld.pro</span>  <span class="title">main.cpp</span>  <span class="title">ui_hellodialog.h</span></span></span><br></pre></td></tr></table></figure>
<p>向<code>helloworld.pro</code>文件添加<code>QT += widgets</code>配置项，然后输入<code>qmake</code>命令生成编译所需的
Makefile：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">qmake</span></span></span><br><span class="line"><span class="function"><span class="title">Info</span>: <span class="title">creating</span> <span class="title">stash</span> <span class="title">file</span> <span class="title">D</span>:\<span class="title">Workspace</span>\<span class="title">helloworld</span>\.<span class="title">qmake.stash</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">ls</span></span></span><br><span class="line"><span class="function"><span class="title">debug</span>/          <span class="title">helloworld.pro</span>  <span class="title">Makefile</span>        <span class="title">Makefile.Release</span>  <span class="title">ui_hellodialog.h</span></span></span><br><span class="line"><span class="function"><span class="title">hellodialog.ui</span>  <span class="title">main.cpp</span>        <span class="title">Makefile.Debug</span>  <span class="title">release</span>/</span></span><br></pre></td></tr></table></figure>
<p>依然运行<code>mingw32-make</code>命令基于 Makefile
编译程序并将<code>helloworld.exe</code>输出到<code>release</code>目录：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">mingw32</span>-<span class="title">make</span></span></span><br><span class="line"><span class="function"><span class="title">mingw32</span>-<span class="title">make</span> -<span class="title">f</span> <span class="title">Makefile.Release</span></span></span><br><span class="line"><span class="function"><span class="title">mingw32</span>-<span class="title">make</span>[1]: <span class="title">Entering</span> <span class="title">directory</span> &#x27;<span class="title">D</span>:/<span class="title">Workspace</span>/<span class="title">helloworld</span>&#x27;</span></span><br><span class="line"><span class="function"><span class="title">g</span>++ -<span class="title">c</span> -<span class="title">fno</span>-<span class="title">keep</span>-<span class="title">inline</span>-<span class="title">dllexport</span> -<span class="title">O2</span> -<span class="title">Wall</span> -<span class="title">Wextra</span> -<span class="title">Wextra</span> -<span class="title">fexceptions</span> -<span class="title">mthreads</span> -<span class="title">DUNICODE</span> -<span class="title">D_UNICODE</span> -<span class="title">DWIN32</span> -<span class="title">DMINGW_HAS_SECURE_API</span>=1 -<span class="title">DQT_NO_DEBUG</span> -<span class="title">DQT_WIDGETS_LIB</span> -<span class="title">DQT_GUI_LIB</span> -<span class="title">DQT_CORE_LIB</span> -<span class="title">DQT_NEEDS_QMAIN</span> -<span class="title">I</span>. -<span class="title">I</span>. -<span class="title">I</span>../../<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span> -<span class="title">I</span>../../<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span>/<span class="title">QtWidgets</span> -<span class="title">I</span>../../<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span>/<span class="title">QtGui</span> -<span class="title">I</span>../../<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span>/<span class="title">QtANGLE</span> -<span class="title">I</span>../../<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">include</span>/<span class="title">QtCore</span> -<span class="title">Irelease</span> -<span class="title">I</span>. -<span class="title">I</span>../../<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">mkspecs</span>/<span class="title">win32</span>-<span class="title">g</span>++  -<span class="title">o</span> <span class="title">release</span>/<span class="title">main.o</span> <span class="title">main.cpp</span></span></span><br><span class="line"><span class="function"><span class="title">g</span>++ -<span class="title">Wl</span>,-<span class="title">s</span> -<span class="title">Wl</span>,-<span class="title">subsystem</span>,<span class="title">windows</span> -<span class="title">mthreads</span> -<span class="title">o</span> <span class="title">release</span>/<span class="title">helloworld.exe</span> <span class="title">release</span>/<span class="title">main.o</span>  <span class="title">D</span>:/<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">lib</span>/<span class="title">libQt5Widgets.a</span> <span class="title">D</span>:/<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">lib</span>/<span class="title">libQt5Gui.a</span> <span class="title">D</span>:/<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">lib</span>/<span class="title">libQt5Core.a</span>  -<span class="title">lmingw32</span> <span class="title">D</span>:/<span class="title">software</span>/<span class="title">Tech</span>/<span class="title">Qt</span>/5.14.2/<span class="title">mingw73_32</span>/<span class="title">lib</span>/<span class="title">libqtmain.a</span> -<span class="title">LC</span>:/<span class="title">openssl</span>/<span class="title">lib</span> -<span class="title">LC</span>:/<span class="title">Utils</span>/<span class="title">my_sql</span>/<span class="title">mysql</span>-5.7.25-<span class="title">win32</span>/<span class="title">lib</span> -<span class="title">LC</span>:/<span class="title">Utils</span>/<span class="title">postgresql</span>/<span class="title">pgsql</span>/<span class="title">lib</span> -<span class="title">lshell32</span></span></span><br><span class="line"><span class="function"><span class="title">mingw32</span>-<span class="title">make</span>[1]: <span class="title">Leaving</span> <span class="title">directory</span> &#x27;<span class="title">D</span>:/<span class="title">Workspace</span>/<span class="title">helloworld</span>&#x27;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">D</span>:\<span class="title">Workspace</span>\<span class="title">helloworld</span></span></span><br><span class="line"><span class="function">λ <span class="title">ls</span> <span class="title">release</span>\</span></span><br><span class="line"><span class="function"><span class="title">helloworld.exe</span>*  <span class="title">main.o</span></span></span><br></pre></td></tr></table></figure>
<h3 id="hellodialog.cpp-版实现">hellodialog.cpp 版实现</h3>
<p>首先，打开 Qt Creator 新建一个 <strong>Empty gmake Project</strong>
工程，依然将其命名为<code>helloworld</code>。完成以后打开自动生成的<code>helloworld.pro</code>添加<code>QT += widgets</code>并保存。然后，在工程中新建一个
<strong>C++ Class</strong> 文件：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Class-1.png"></p>
<p>将该类的名称定义为<code>HelloDialog</code>，基类指定为<code>QDialog</code>，然后由
Qt Creator
自动生成相应的<code>hellodialog.h</code>和<code>hellodialog.cpp</code>源文件：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Class-2.png"></p>
<p>然后再添加一个<code>main.cpp</code>源文件，并且加入如下代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;hellodialog.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    HelloDialog dialog;</span><br><span class="line">    dialog.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接着将上一小节建立的<code>hellodialog.ui</code>文件复制到当前目录，然后使用
Qt Creator
上的【添加现有文件...】将该<code>.ui</code>添加至当前工程，最终形成如下项目结构：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Class-3.png"></p>
<p>接下来，向<code>hellodialog.h</code>添加如下代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> HELLODIALOG_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> HELLODIALOG_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 定义命名空间 Ui，避免与与本文件当中声明的 HelloDialog 同名 */</span></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">HelloDialog</span>;   <span class="comment">// 前置声明 HelloDialog 类（由 ui_hellodialog.h 定义）以加快编译速度</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 定义新的 HelloDialog 类，并继承 QDialog 类 */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloDialog</span> : <span class="keyword">public</span> QDialog &#123;</span><br><span class="line">    Q_OBJECT           <span class="comment">// 定义 Q_OBJECT 宏，以扩展 C++ 类的功能；例如：使用信号槽时，必须在类定义的开始位置声明该宏；</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">HelloDialog</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;  <span class="comment">// 显式构造函数，其参数用于指定父窗口，当前设置为 0 表示没有父窗口</span></span><br><span class="line">        ~<span class="built_in">HelloDialog</span>();                             <span class="comment">// 析构函数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::HelloDialog *ui; <span class="comment">// 定义 HelloDialog 类对象的指针</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>然后，继续向<code>hellodialog.cpp</code>添加下面的代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;hellodialog.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_hellodialog.h&quot;</span>     <span class="comment">// 包含 .ui 头文件</span></span></span><br><span class="line"></span><br><span class="line">HelloDialog::<span class="built_in">HelloDialog</span>(QWidget * parent) : <span class="built_in">QDialog</span>(parent)&#123;</span><br><span class="line">    ui = <span class="keyword">new</span> Ui::HelloDialog;   <span class="comment">// 创建 Ui::HelloDialog 对象</span></span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);          <span class="comment">// 为当前类所代表的对话框创建图形界面</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">HelloDialog::~<span class="built_in">HelloDialog</span>()&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后编译上述工程代码，可以观察到与前面小节相同的示例效果。</p>
<h3 id="设计师界面类版实现">设计师界面类版实现</h3>
<p>依然打开 Qt Creator 新建一个 <strong>Empty gmake Project</strong>
工程，同样将其命名为<code>helloworld</code>，然后添加<code>QT += widgets</code>保存，接下来在工程中新建一个
<strong>Qt 设计师界面类</strong>：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Designer-1.png"></p>
<p>将界面模板选择为 <strong>Dialog without Buttons</strong>：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Designer-2.png"></p>
<p>设置类名为<code>HelloDialog</code>，然后 Qt Creator
将会同时自动生成<code>helloworld.ui</code>、<code>helloworld.h</code>、<code>helloworld.cpp</code>源代码文件：</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Designer-3.png"></p>
<p>按下快捷键【Ctrl +
3】进入【设计】模式，鼠标拖拽一个<code>Label</code>部件并且修改其文本为<code>Hello World! Hello Qt!</code>与字体为<code>16</code>像素的<code>Consolas</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Designer-4.png"></p>
<p>接着往工程当中添加一个<code>main.cpp</code>源文件，并且加入如下代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;hellodialog.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    HelloDialog dialog;</span><br><span class="line">    dialog.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> app.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本小节的内容就是前一小节操作的简化或者说自动化版本，因为 <strong>Qt
设计师界面类</strong> 本质上就是之前小节中 C++ 类与 <code>.ui</code>
文件的结合，Qt Creator 只是自动化的完成了源文件创建的步骤。</p>
<h3 id="qt-creator-定位器">Qt Creator 定位器</h3>
<p>Qt Creator
与其它开源编辑器最大的不同之处在于，其在主界面左下方提供了一个<strong>定位器</strong>功能，可以方便的<code>打开文件</code>、<code>定位到指定行</code>、<code>打开特定的帮助文档</code>、<code>查找项目中的函数</code>等。定位器通过多种<strong>过滤器</strong>来实现不同的功能，按下快捷键【Ctrl
+
K】就会显示这些过滤器的前缀及其功能，使用的格式为<code>前缀符号 待定位内容</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Locator-1.png"></p>
<p>例如：在 Qt Creator 主界面按下【Ctrl + K】
进入定位器并输入<code>l 8</code>，即可跳转到编辑模式当前打开源文件的第 8
行。再次按下【Ctrl + K】
并且输入<code>? qla</code>，回车后即可打开<code>QLabel</code>的帮助文档。</p>
<p><img src="/C&C++/Qt-Widgets/Hello/Locator-2.png"></p>
<h2 id="项目模板">项目模板</h2>
<h3 id="console-application">Console Application</h3>
<p><img src="/C&C++/Qt-Widgets/Template/Console.png"></p>
<h4 id="demo.pro">Demo.pro</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">QT -= gui</span><br><span class="line"></span><br><span class="line">CONFIG += c++11 console</span><br><span class="line">CONFIG -= app_bundle</span><br><span class="line"></span><br><span class="line"># 让标记为【deprecated】的 Qt 特性，由编译器发出警告信息</span><br><span class="line">DEFINES += QT_DEPRECATED_WARNINGS</span><br><span class="line"></span><br><span class="line"># 让标记为【deprecated】的 Qt 特性无法通过编译</span><br><span class="line"># DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # 禁用 Qt 6.0.0 之前的所有废弃 API</span><br><span class="line"></span><br><span class="line">SOURCES += \</span><br><span class="line">        main.cpp</span><br><span class="line"></span><br><span class="line"># 默认的部署规则</span><br><span class="line">qnx: target.path = /tmp/$$&#123;TARGET&#125;/bin</span><br><span class="line">else: unix:!android: target.path = /opt/$$&#123;TARGET&#125;/bin</span><br><span class="line">!isEmpty(target.path): INSTALLS += target</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCoreApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QCoreApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    <span class="comment">/* ... ... ... */</span></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="widgets-application">Widgets Application</h3>
<p><img src="/C&C++/Qt-Widgets/Template/Widgets.png"></p>
<h4 id="demo.pro-1">Demo.pro</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, 4): QT += widgets</span><br><span class="line"></span><br><span class="line">CONFIG += c++11</span><br><span class="line"></span><br><span class="line"># 让标记为【deprecated】的 Qt 特性，由编译器发出警告信息</span><br><span class="line">DEFINES += QT_DEPRECATED_WARNINGS</span><br><span class="line"></span><br><span class="line"># 让标记为【deprecated】的 Qt 特性无法通过编译</span><br><span class="line"># DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # 禁用 Qt 6.0.0 之前的所有废弃 API</span><br><span class="line"></span><br><span class="line">SOURCES += \</span><br><span class="line">    main.cpp \</span><br><span class="line">    mainwindow.cpp</span><br><span class="line"></span><br><span class="line">HEADERS += \</span><br><span class="line">    mainwindow.h</span><br><span class="line"></span><br><span class="line">FORMS += \</span><br><span class="line">    mainwindow.ui</span><br><span class="line"></span><br><span class="line"># 默认的部署规则</span><br><span class="line">qnx: target.path = /tmp/$$&#123;TARGET&#125;/bin</span><br><span class="line">else: unix:!android: target.path = /opt/$$&#123;TARGET&#125;/bin</span><br><span class="line">!isEmpty(target.path): INSTALLS += target</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.h">mainwindow.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123; <span class="keyword">class</span> <span class="title class_">MainWindow</span>; &#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">MainWindow</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    ~<span class="built_in">MainWindow</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::MainWindow *ui;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.cpp">mainwindow.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) : <span class="built_in">QMainWindow</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-1">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.ui">mainwindow.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMainWindow&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MainWindow&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>800<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>600<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;centralwidget&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMenuBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;menubar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>800<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QStatusBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;statusbar&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="窗口部件">窗口部件</h2>
<p>Qt 小部件（<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qtwidgets-index.html">Qt
Widgets</a>）是用于放置其它部件的容器，通常由 1 个框架和 1
个标题栏组成。常用的窗口类型有<code>QWidget</code>（基础窗口部件，所有窗口部件的基类）、<code>QMainWindow</code>（带有菜单栏和工具栏的主窗口类）、<code>Dialog</code>（各种对话框的基类）三种。</p>
<h3 id="qwidget-基础窗口部件">QWidget 基础窗口部件</h3>
<p><code>QWidget</code>类是所有用户界面对象的基类，它分别继承自<code>QObject</code>类（所有支持
Qt
对象模型的对象的基类）和<code>QPaintDevice</code>类（所有可以绘制的对象的基类），因此提供有界面绘制与用户输入处理等基本功能，如果需要设计自定义的窗口部件，则可以考虑继承<code>QWidget</code>及其子类。</p>
<p>下面的程序当中定义了 1
个<code>Qwidget</code>类对象的指针变量<code>widget</code>，2
个<code>QLabel</code>对象指针<code>label1</code>和<code>label2</code>，其中<code>label1</code>没有父窗口，而<code>label2</code>被放置在<code>widget</code>父窗口内部：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtWidgets&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 窗口，QWidget 类对象的 parent 参数默认为 0 */</span></span><br><span class="line">    QWidget *widget = <span class="keyword">new</span> <span class="built_in">QWidget</span>();</span><br><span class="line">    widget-&gt;<span class="built_in">setWindowTitle</span>(QObject::<span class="built_in">tr</span>(<span class="string">&quot;我是 widget&quot;</span>));   <span class="comment">// 设置窗口标题</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 窗口，QLabel 类对象的 parent 参数默认为 0 */</span></span><br><span class="line">    QLabel *label1 = <span class="keyword">new</span> <span class="built_in">QLabel</span>();</span><br><span class="line">    label1-&gt;<span class="built_in">setWindowTitle</span>(QObject::<span class="built_in">tr</span>(<span class="string">&quot;我是 label&quot;</span>));</span><br><span class="line">    label1-&gt;<span class="built_in">setText</span>(QObject::<span class="built_in">tr</span>(<span class="string">&quot;label1 : 我是一个窗口。&quot;</span>));   <span class="comment">// 设置显示内容</span></span><br><span class="line">    label1-&gt;<span class="built_in">resize</span>(<span class="number">250</span>, <span class="number">20</span>);   <span class="comment">// 设置部件尺寸，以便显示完整内容</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* label2 的 parent 参数为 widget */</span></span><br><span class="line">    QLabel *label2 = <span class="keyword">new</span> <span class="built_in">QLabel</span>(widget);</span><br><span class="line">    label2-&gt;<span class="built_in">setText</span>(QObject::<span class="built_in">tr</span>(<span class="string">&quot;label2 : 我不是独立窗口，只是 widget 的子部件。&quot;</span>));</span><br><span class="line">    label2-&gt;<span class="built_in">resize</span>(<span class="number">300</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 显示到屏幕 */</span></span><br><span class="line">    label1-&gt;<span class="built_in">show</span>();</span><br><span class="line">    widget-&gt;<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> ret = a.<span class="built_in">exec</span>();</span><br><span class="line">    <span class="keyword">delete</span> label1;</span><br><span class="line">    <span class="keyword">delete</span> widget;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/C&C++/Qt-Widgets/Window/1.png"></p>
<blockquote>
<p><strong>注意</strong>：上面代码使用<code>new</code>操作符实例化类，但是并未使用<code>delete</code>进行释放，因为
Qt
里销毁父对象时会自动销毁子对象。例如指定<code>label2</code>的父部件为<code>widget</code>，所以执行<code>delete widget</code>就会自动销毁<code>label2</code>。</p>
</blockquote>
<p><code>QWidget</code>类的构造函数可以接收 2 个参数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QWidget::<span class="built_in">QWidget</span>(QWidget *parent = <span class="literal">nullptr</span>, Qt::WindowFlags f = Qt::<span class="built_in">WindowFlags</span>())</span><br></pre></td></tr></table></figure>
<ul>
<li><code>QWidget *parent</code>：如果值为<code>nullptr</code>，则该部件为一个窗口。如果值为其它部件，则此该部件将会成为子窗口。当父部件被删除时，该部件也将被删除；</li>
<li><code>Qt::WindowFlags f</code>：通常为<code>0</code>，可以将其设置为自定义窗口的框架（此时父窗口必须为<code>nullptr</code>），如果自定义框架，则需要采用
2 个窗口标志位之间的按位异或值；</li>
</ul>
<p>例如：<code>Qt::FramelessWindowHint</code>可以生成一个无边框的窗口，<code>Qt::WindowStaysOnTopHint</code>用于让指定窗口停留在其它所有窗口最上层。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QtWidgets&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 窗口，QWidget 类对象的 parent 参数默认为 0 */</span></span><br><span class="line">    QWidget *widget = <span class="keyword">new</span> <span class="built_in">QWidget</span>(<span class="number">0</span>, Qt::Dialog | Qt::FramelessWindowHint);</span><br><span class="line">    <span class="comment">// ... ... ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 窗口，QLabel 类对象的 parent 参数默认为 0 */</span></span><br><span class="line">    QLabel *label1 = <span class="keyword">new</span> <span class="built_in">QLabel</span>(<span class="number">0</span>, Qt::SplashScreen | Qt::WindowStaysOnTopHint);</span><br><span class="line">    <span class="comment">// ... ... ...</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* label2 的 parent 参数为 widget */</span></span><br><span class="line">    QLabel *label2 = <span class="keyword">new</span> <span class="built_in">QLabel</span>(widget);</span><br><span class="line">    <span class="comment">// ... ... ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/C&C++/Qt-Widgets/Window/2.png"></p>
<p>Qt Creator
提供的示例程序<code>Window Flags Example</code>演示了几乎所有的窗口类型，下图是这些示例的运行效果：</p>
<p><img src="/C&C++/Qt-Widgets/Window/3.gif"></p>
<p><code>QWidget</code>当中还提供了一个<code>void QWidget::setWindowState(Qt::WindowStates windowState)</code>函数用于设置窗口状态，其中参数<code>Qt::WindowStates</code>是用于设置当前窗口状态的枚举值：</p>
<table style="width:100%;">
<colgroup>
<col style="width: 22%">
<col style="width: 12%">
<col style="width: 21%">
<col style="width: 10%">
<col style="width: 21%">
<col style="width: 10%">
</colgroup>
<tbody>
<tr class="odd">
<td><code>Qt::WindowNoTate</code></td>
<td>默认正常状态</td>
<td><code>Qt::WindowMaximized</code></td>
<td>窗口最大化</td>
<td><code>Qt::Windowminimized</code></td>
<td>窗口最小化</td>
</tr>
<tr class="even">
<td><code>Qt::WindowFullScreen</code></td>
<td>全屏显示</td>
<td><code>Qt::WindowActive</code></td>
<td>活动窗口</td>
<td> </td>
<td> </td>
</tr>
</tbody>
</table>
<p><strong>窗口几何结构</strong>是指窗口的大小尺寸以其出现的位置，默认情况下，窗口部件的尺寸等于其所包含子部件的大小尺寸；QWidget
提供了几个用于处理窗口几何结构的函数，其中一些函数作用于<strong>不包括窗口框架</strong>（Window
Frame）的区域，例如：<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#geometry-prop"><code>geometry()</code></a>、<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#width-prop"><code>width()</code></a>、<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#height-prop"><code>height()</code></a>、<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#rect-prop"><code>rect()</code></a>、<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#size-prop"><code>size()</code></a>。另一些的作用区域则<strong>包括窗口框架</strong>，例如：<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#x-prop"><code>x()</code></a>、<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#y-prop"><code>y()</code></a>、<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#frameGeometry-prop"><code>frameGeometry()</code></a>、<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#pos-prop"><code>pos()</code></a>、<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qwidget.html#move-1"><code>move()</code></a>。</p>
<p><img src="/C&C++/Qt-Widgets/Window/4.png"></p>
<h3 id="debug-调试">Debug 调试</h3>
<p>本小节会在讲解窗口几何结构相关函数的同时，展现 Qt Creator
中程序调试相关的内容。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    QWidget widget;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> x = widget.<span class="built_in">x</span>();</span><br><span class="line">    <span class="type">int</span> y = widget.<span class="built_in">y</span>();</span><br><span class="line"></span><br><span class="line">    QRect geometry = widget.<span class="built_in">geometry</span>();</span><br><span class="line">    QRect frame = widget.<span class="built_in">frameGeometry</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>选中上面代码里的类或者函数名称，按下按键【F1】就可以查看到其对应的文档帮助信息，或者按下【F2】跳转到其源代码。单击鼠标右键在第
8 行设置断点，然后按下左下角【Start debugging of startup
project】按钮或者按下快捷键【F5】进入调试模式界面：</p>
<p><img src="/C&C++/Qt-Widgets/Window/5.png"></p>
<ol type="1">
<li>【<strong>继续执行
Continue</strong>】：继续执行后面的代码，直至遇到下一个断点或者程序运行结束；</li>
<li>【<strong>停止调试
Stop</strong>】：按下该按钮以后立即结束调试；</li>
<li>【<strong>单步跳过 Step
Over</strong>】：执行本行代码，然后指向下一行代码。</li>
<li>【<strong>单步进入 Step
Into</strong>】：进入当前调用函数的内部；</li>
<li>【<strong>单步跳出 Step
Out</strong>】：当进入函数内部时，用于跳出该函数，通常与【单步进入】配合使用；</li>
<li>【<strong>重启调试会话
Restarts</strong>】：重新启动当前的调试会话；</li>
<li>【<strong>显示对应汇编指令</strong>】：可以继续进行单步调试；</li>
<li>【<strong>堆栈视图</strong>】：显示从程序开始到断点位置，所有嵌套调用函数所在的源文件名称与行号。</li>
<li>【<strong>其他视图</strong>】：可选择多种视图，例如：用于显示局部变量及其类型和数值的<strong>局部变量和表达式视图</strong>（locals
and
Expressions）；用来显示所有断点，并且添加或删除断点的<strong>断点视图</strong>（Breakpoints）；显示所有线程以及当前所在线程的线程视图（Threads）；用于管理保存当前调试状态的<strong>快照视图</strong>（Snapshots）；</li>
</ol>
<p>鼠标点击【<strong>单步进入 Step
Into</strong>】按钮，或者按下【F11】快捷键，则堆栈视图中会显示<code>geometry()</code>函数在源代码当中的位置。接下来，单击【<strong>单步跳出
Step Out</strong>】按钮回到主函数断点处，然后持续单击【<strong>单步跳过
Step
Over</strong>】按钮单步执行程序，同时查看<strong>局部变量和表达式视图</strong>中相应变量的变化情况。最后，当执行流程到达<code>return a.exec()</code>语句时，单击【<strong>停止调试
Stop</strong>】按钮结束本次调试。</p>
<p><img src="/C&C++/Qt-Widgets/Window/6.gif"></p>
<p>从上面变量监视器的动图当中可以观察到：<code>x</code>、<code>y</code>、<code>geometry</code>、<code>frame</code>这
4
个变量的初始值是一个随机数，调试完成以后<code>x</code>、<code>y</code>的值都为默认值<code>0</code>，而<code>geometry = 640×480+0+0</code>，<code>frame = 639×479+0+0</code>。这里造成<code>x</code>、<code>y</code>的值为<code>0</code>的原因是由于窗口没有能够显示。接下来在<code>QWidget widget</code>语句后面添加用于显示窗口的代码<code>widget.show()</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    QWidget widget;</span><br><span class="line">    widget.<span class="built_in">show</span>(); <span class="comment">// 添加显示窗口代码</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> x = widget.<span class="built_in">x</span>();</span><br><span class="line">    <span class="type">int</span> y = widget.<span class="built_in">y</span>();</span><br><span class="line"></span><br><span class="line">    QRect geometry = widget.<span class="built_in">geometry</span>();</span><br><span class="line">    QRect frame = widget.<span class="built_in">frameGeometry</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>修改完成以后，再次进入调试模式，会发现窗口只会在任务栏显示了一个标题，此时继续单击【<strong>单步跳过
Step
Over</strong>】。当程序运行到最后的<code>return a.exec()</code>语句时，再次单击【<strong>单步跳过
Step
Over</strong>】以后，程序窗口终于得以完整呈显。出现这种现象的原因，是由于仅当程序进入<strong>主事件循环</strong>以后才可以接收事件，而<code>widget.show()</code>函数会触发一个显示事件，所以上面代码只会在完成<code>a.exe()</code>函数的调用，并且进入主事件循环以后才能被正常显示。</p>
<p>Qt
程序调试过程当中，还可以使用<code>qDebug()</code>函数将调试信息直接输出至控制台，请观察下面的示例代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    QWidget widget;</span><br><span class="line">    widget.<span class="built_in">resize</span>(<span class="number">400</span>, <span class="number">300</span>);       <span class="comment">// 设置窗口大小尺寸（不包含边框）</span></span><br><span class="line">    widget.<span class="built_in">move</span>(<span class="number">200</span>, <span class="number">100</span>);         <span class="comment">// 设置窗口显示位置</span></span><br><span class="line">    widget.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> x = widget.<span class="built_in">x</span>();</span><br><span class="line">    <span class="built_in">qDebug</span>(<span class="string">&quot;x: %d&quot;</span>, x);            <span class="comment">// 窗口位置 x 坐标值</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> y = widget.<span class="built_in">y</span>();</span><br><span class="line">    <span class="built_in">qDebug</span>(<span class="string">&quot;y: %d&quot;</span>, y);            <span class="comment">// 窗口位置 y 坐标值</span></span><br><span class="line"></span><br><span class="line">    QRect geometry = widget.<span class="built_in">geometry</span>();</span><br><span class="line">    QRect frame = widget.<span class="built_in">frameGeometry</span>();</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;geometry: &quot;</span> &lt;&lt; geometry &lt;&lt; <span class="string">&quot;frame: &quot;</span> &lt;&lt; frame;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码分别采用了<code>qDebug()</code>函数的 2 种输出方法：</p>
<ol type="1">
<li>将字符串作为参数传递给<code>qDebug()</code>函数，这种方式不需要<code>#include &lt;QDebug&gt;</code>头文件，上面使用这种方法输出<code>x</code>和<code>y</code>的值；</li>
<li>以输出流的方式让<code>qDebug()</code>一次性输出多个值，<strong>必须</strong>添加<code>#include &lt;QDebug&gt;</code>头文件，上面代码采用该方式输出<code>geometry</code>和<code>frame</code>的值；</li>
</ol>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span>:<span class="number">48</span>:<span class="number">33</span>: Starting D:\Workspace\build-mywidget2-Desktop_Qt_5_14_2_MinGW_32_bit-Debug\debug\mywidget2.exe ...</span><br><span class="line"><span class="function">x: 200</span></span><br><span class="line"><span class="function"><span class="title">y</span>: 100</span></span><br><span class="line"><span class="function"><span class="title">geometry</span>:  <span class="title">QRect</span>(201,131 400<span class="title">x300</span>) <span class="title">frame</span>:  <span class="title">QRect</span>(200,100 402<span class="title">x332</span>)</span></span><br><span class="line"><span class="function">10:48:37: <span class="title">D</span>:\<span class="title">Workspace</span>\<span class="title">build</span>-<span class="title">mywidget2</span>-<span class="title">Desktop_Qt_5_14_2_MinGW_32_bit</span>-<span class="title">Debug</span>\<span class="title">debug</span>\<span class="title">mywidget2.exe</span> <span class="title">exited</span> <span class="title">with</span> <span class="title">code</span> 0</span></span><br></pre></td></tr></table></figure>
<p>以输出流方式使用<code>qDebug()</code>时，还可以添加<code>endl</code>标识符让调试信息自动换行：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;geometry: &quot;</span> &lt;&lt; geometry &lt;&lt; endl &lt;&lt; <span class="string">&quot;frame: &quot;</span> &lt;&lt; frame;</span><br></pre></td></tr></table></figure>
<p>加入<code>endl</code>之后，<code>geometry</code>与<code>frame</code>将会分为两行进行显示：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">geometry:  <span class="title">QRect</span>(201,131 400<span class="title">x300</span>)</span></span><br><span class="line"><span class="function"><span class="title">frame</span>:  <span class="title">QRect</span>(200,100 402<span class="title">x332</span>)</span></span><br></pre></td></tr></table></figure>
<h3 id="qdialog-对话框">QDialog 对话框</h3>
<p>本小节首先会讲述两种不同类型的对话框，然后分析一个由多窗口组成并且窗口间可以相互切换的程序，最后介绍
Qt 提供的几个标准对话框，并涉及信号和槽的初步知识。</p>
<h4 id="模态与非模态">模态与非模态</h4>
<p><code>QDialog</code>类是所有<strong>对话框</strong>的基类，对话框通常用于与用户进行简单的交互。根据能否与程序其它窗口进行交互，可以将对话框分为<strong>模态</strong>（Modal）和<strong>非模态</strong>的（Modeless）两类。</p>
<p>下面<code>MyWidget</code>类的构造函数当中，定义了一个<code>QDialog</code>类对象，并通过<code>this</code>参数指定其父窗口为<code>MyWidget</code>类对象，最后调用<code>show()</code>函数显示对话框。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* MyWidget 构造函数 */</span></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="function">QDialog <span class="title">dialog</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    dialog.<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 对象生命周期结束时调用 */</span></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述程序运行之后，会发现对话框一闪而过，然后屏幕只显示<code>MyWidget</code>父窗口。这是由于
C++
函数中定义的变量，会在该函数执行完成后自动释放。因此，这里的<code>dialog</code>对象只会在该构造函数当中有效，该构造函数执行完成之后<code>dialog</code>就被自动销毁。避免这个问题，需要进行如下修改：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* MyWidget 构造函数 */</span></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    QDialog *dialog = <span class="keyword">new</span> <span class="built_in">QDialog</span>(<span class="keyword">this</span>);</span><br><span class="line">    dialog-&gt;<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码使用了<code>dialog</code>对象的指针，并采用运算符<code>new</code>开辟了内存空间，再次运行程序就可以正常显示。</p>
<p><img src="/C&C++/Qt-Widgets/Window/7.png"></p>
<p>事实上，不采用指针也可以正常显示对话框，继续对上面的示例代码进行修改：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* MyWidget 构造函数 */</span></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="function">QDialog <span class="title">dialog</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    dialog.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再次运行程序，会发现首先弹出对话框，关闭之后才会再弹出<code>MyWidget</code>窗口，这种对话框就可以称为<strong>模态对话框</strong>，而之前的对话框则称为<strong>非模态对话框</strong>。</p>
<ul>
<li><strong>模态对话框</strong>：不能与程序中其它窗口进行交互，由对话框自身调用<code>exec()</code>函数产生；</li>
<li><strong>非模态对话框</strong>：可以与程序内其它窗口交互，使用<code>new</code>操作符进行创建，然后调用<code>show()</code>函数显示；</li>
</ul>
<p>事实上，<code>show()</code>函数也可以用于建立模态对话框，只需在其前面调用<code>setModal(true)</code>函数即可：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* MyWidget 构造函数 */</span></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    QDialog *dialog = <span class="keyword">new</span> <span class="built_in">QDialog</span>(<span class="keyword">this</span>);</span><br><span class="line">    dialog-&gt;<span class="built_in">setModal</span>(<span class="literal">true</span>);   <span class="comment">//</span></span><br><span class="line">    dialog-&gt;<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>观察程序的运行，虽然生成的对话框是模态的，但是与调用<code>exec()</code>函数时的效果有所不同。因为<code>MyWidget</code>窗口也同时被显示出来，这是由于<code>show()</code>调用完毕之后，函数会立即将控制权交给调用者，程序可以继续往下执行。然而在调用<code>exec()</code>函数的时候，只有当对话框被关闭时才会返回。</p>
<p>上面代码中的<code>setModal()</code>函数用于设置以模态还是非模态方式打开对话框，默认为<code>false</code>，即对话框的<code>show()</code>展示为非模态；将该属性置为<code>true</code>等于将<code>QWidget::windowModality</code>设置为<code>Qt::ApplicationModal</code>。</p>
<blockquote>
<p><strong>注意</strong>：<code>QWidget</code>提供的<code>setWindowModality()</code>函数用于设置被模态部件阻塞的窗口，可以是<code>Qt::NonModal</code>（默认值，不阻塞任何窗口，即非模态）、<code>Qt::WindowModal</code>（阻塞其父窗口和所有祖先窗口以及子窗口）、<code>Qt::ApplicationModal</code>（阻塞当前应用程序的所有窗口）之一。</p>
</blockquote>
<h4 id="多窗口切换">多窗口切换</h4>
<p>Qt
采用<strong>信号槽</strong>机制来完成对象之间的通信，例如单击窗口上的按钮弹出对话框，那可以将该按钮的单击信号与槽中定义的对话框关联起来，单击按钮时就会发射信号，从而显示槽中定义的对话框。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** main.cpp */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    MyWidget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>向<code>mywidget.ui</code>界面添加 1
个<code>Label</code>（修改显示的文本内容<code>我是主界面！</code>）和 1
个<code>Push Button</code>（将<code>object Name</code>修改为<code>showChildButton</code>，显示文本内容为<code>显示子窗口</code>），</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyWidget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;showChildButton&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>150<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>210<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>显示子窗口<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>80<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>80<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>141<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>41<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>我是主界面！<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后在<code>mywidget.h</code>文件的<code>MyWidget</code>类定义的最后，用<code>slot</code>关键字声明一个<strong>槽</strong>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** mywidget.h */</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyWidget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">showChildDialog</span><span class="params">()</span></span>;   <span class="comment">// 声明一个可以在类外部进行调用的槽</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<p>鼠标选中<code>showChildDialog()</code>槽，按下快捷键【Alt +
Enter】或者鼠标右键菜单里选择【Refactor】，在下面的弹出菜单上选择【在
mywidget.cpp 添加定义】项：</p>
<p><img src="/C&C++/Qt-Widgets/Window/8.png"></p>
<p>此时，编辑器会自动跳转至<code>mywidget.cpp</code>源文件，并且自动创建
1
个<code>showChildDialog()</code>槽，手动向其中添加对话框显示相关的代码，同时修改<code>MyWidget</code>类：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** mywidget.cpp */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">/* 连接信号与槽 */</span></span><br><span class="line">    <span class="built_in">connect</span>(ui-&gt;showChildButton, &amp;QPushButton::clicked,</span><br><span class="line">            <span class="keyword">this</span>, &amp;MyWidget::showChildDialog);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::showChildDialog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QDialog *dialog = <span class="keyword">new</span> <span class="built_in">QDialog</span>(<span class="keyword">this</span>);</span><br><span class="line">    dialog-&gt;<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码使用了<code>connect()</code>函数将按钮单击信号<code>clicked()</code>与新建的<code>showChildDialog()</code>槽关联在一起。<code>clicked</code>信号定义在<code>QPushButton</code>类当中，而<code>connect()</code>函数定义在<code>QObject</code>类当中，由于<code>MyWidget</code>类继承了<code>QObject</code>，所以可以直接进行使用。<code>connect()</code>函数的
4
个参数分别是<code>发射信号的对象</code>、<code>发射的信号</code>、<code>接收信号的对象</code>、<code>接收信号的槽</code>。运行程序，然后<code>MyWidget</code>主界面上的按钮，就会弹出一个<code>dialog</code>对话框。</p>
<p><img src="/C&C++/Qt-Widgets/Window/9.gif"></p>
<p>上述信号与槽的关联方法称为<strong>手动关联</strong>，此外还有一种更为方便的<strong>自动关联</strong>，即将相关函数整合到<strong>槽</strong>命名当中，例如上面例子中的<code>showChildDialog()</code>槽可以重命名为<code>on_showChildButton_clicked()</code>，这样通过<code>on_发射信号的部件名称_信号名称</code>格式的命名风格，就能够省略<code>connect()</code>关联函数，实现信号与槽的自动关联。</p>
<p><img src="/C&C++/Qt-Widgets/Window/10.png"></p>
<p>首先，选中上面代码里的<code>showChildDialog()</code>函数名称，鼠标右键依次选择弹出菜单上的【Refactor
-&gt; Rename Symbol Under Cursor】或者直接按下【Ctrl + Shift +
R】快捷键，在出现的替换栏中输入<code>on_showChildButton_clicked()</code>，再单击【Replace】按钮即可，此时<code>mywidget.cpp</code>源文件和<code>mywidget.h</code>头文件中的函数名称都进行批量修改。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** mywidget.h */</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyWidget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_showChildButton_clicked</span><span class="params">()</span></span>;   <span class="comment">// 将 showChildDialog() 槽重命名为 on_showChildButton_clicked()</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<p>然后，删除<code>mywidget.cpp</code>当中<code>MyWidget</code>类构造函数里的<code>connect</code>方法：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** mywidget.cpp */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">/* 移除 connect() 关联函数 */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_showChildButton_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QDialog *dialog = <span class="keyword">new</span> <span class="built_in">QDialog</span>(<span class="keyword">this</span>);</span><br><span class="line">    dialog-&gt;<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>程序运行效果与之前一致，Qt
设计器生成的槽就采用自动方式生成，但是对于不在 Qt
设计器中添加的界面部件，就还额外要在调用<code>setupUi()</code>函数前定义该部件，而且还要手动调用<code>setObjectName()</code>函数指定部件的对象名称，这样才能完成自动关联。日常开发里，通常会选用显式声明<code>connect()</code>的<strong>手动方式</strong>。</p>
<p>接下来，再来定义一个带按钮的对话框，并在 Qt
设计器中进行<strong>信号</strong>与<strong>槽</strong>的关联，最终实现主界面与对话框的切换导航。</p>
<p><strong>添加自定义对话框<code>MyDialog</code></strong>，基于前面的项目添加<strong>Qt
设计师界面类</strong>，界面模板选择<code>Dialog without Buttons</code>，类名称修改为<code>MyDialog</code>，然后向窗口拖入【进入主界面】和【退出程序】两个
<strong>Push Button</strong>。</p>
<p><img src="/C&C++/Qt-Widgets/Window/11.png"></p>
<p><strong>设计信号和槽</strong>，这里使用 Qt
设计器实现【退出程序】按钮的信号槽关联，单击 Qt Creator 顶部的【Edit
Signals/Slots】图标或是按下快捷键【F4】，进入了信号槽编辑模式，鼠标左键选中【退出程序】并且拖动到窗口界面，然后松开鼠标左键，此时会弹出【配置连接】对话框。</p>
<p><img src="/C&C++/Qt-Widgets/Window/12.png"></p>
<p>选中对话框底部的【显示从 QWidget
继承的信号和槽】，然后选中左侧<code>QPushButton</code>栏中的<strong>信号</strong><code>clicked()</code>，右侧<code>QDialog</code>栏中的<strong>槽</strong><code>close()</code>，完成后单击【OK】按钮（此处还可以单击【编辑】按钮添加<strong>自定义槽</strong>，但是这样还需要在<code>MyDialog</code>类中实现自定义槽）。这样【退出程序】按钮的单击<strong>信号</strong>就与对话框内的关闭操作<strong>槽</strong>关联起来，如果需要取消关联，只需在信号槽编辑模式下选中关联，按下【Delete】键，或者鼠标右键点击【删除】即可。</p>
<p><img src="/C&C++/Qt-Widgets/Window/13.png"></p>
<p>此时，Qt Creator
底部的【信号槽编辑器】就可以观察到当前设置好的关联。当然，也可以直接在【信号槽编辑器】当中去建立关联，这与上面通过鼠标选中部件进行关联的操作等效。</p>
<p><img src="/C&C++/Qt-Widgets/Window/14.png"></p>
<p>完成全部信号槽关联工作以后按下【F3】按键或者鼠标单击【Edit
Widgets】图标，回到部件编辑模式。紧接着关联【进入主界面】按钮的信号与槽，鼠标选择该按钮，选择右键菜单上的【转到槽...】，然后在弹出的对话框中选择<code>clicked()</code>信号，最后点击【OK】按钮。此时会自动切换到代码编辑模式，并且定位到自动生成的<code>on_pushButton_clicked()</code>槽：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyDialog::on_pushButton_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">accept</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中的<code>accept()</code>函数是<code>QDialog</code>类当中的 1
个槽，对于使用<code>exec()</code>函数实现的模态对话框，调用该<strong>槽</strong>就会隐藏这个模态对话框，并返回<code>QDialog::Accepted</code>值用于判断当前按下的是哪个按钮；与之相对应，另一个<code>reject()</code>槽则可以返回<code>QDialog::Rejected</code>值，前面定义的【退出程序】按钮也可以关联到这个槽。接下来修改<code>main.cpp</code>源文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mydialog.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MyDialog dialog;                        <span class="comment">// 新建 MyDialog 类对象</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(dialog.<span class="built_in">exec</span>() == QDialog::Accepted)&#123;   <span class="comment">// 判断 dialog 的执行结果</span></span><br><span class="line">        MyWidget w;</span><br><span class="line">        w.<span class="built_in">show</span>();                           <span class="comment">// 如果按下【进入主界面】按钮，则显示主界面</span></span><br><span class="line">        <span class="keyword">return</span> a.<span class="built_in">exec</span>();                    <span class="comment">// 正常运行程序</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;                          <span class="comment">// 否则退出程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码在主函数当中建立了一个<code>MyDialog</code>对象，然后判断其<code>exec()</code>函数的返回值，如果当前按下【进入主界面】按钮，则返回值等于<code>QDialog::Accepted</code>，于是显示主界面并正常执行程序，如果不是则直接退出程序。进行到这里，代码已经可以从登录对话框进入主界面，再从主界面显示
1 个对话框。</p>
<p>接下来，实现从主界面重新进入登录界面的功能。双击<code>mywidget.ui</code>文件进入
Qt Creator 设计模式，向界面添加【重新登录】和【退出】两个 <strong>Push
button</strong>，然后进入信号槽模式，将【退出】按钮的<code>clicked()</code>信号与<code>MyWidget</code>界面的<code>close()</code>槽关联。完成以后，再转到【重新登录】按钮的<code>clicked()</code>信号对应的槽，并进行如下修改：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mydialog.h&quot;</span>   <span class="comment">// 包含 MyDialog 类的头文件</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_showChildButton_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QDialog *dialog = <span class="keyword">new</span> <span class="built_in">QDialog</span>(<span class="keyword">this</span>);</span><br><span class="line">    dialog-&gt;<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">close</span>();           <span class="comment">// 首先，关闭主界面（并未退出程序，只有在剩下最后 1 个主界面时，即没有父窗口的界面，才会真正退出）</span></span><br><span class="line">    MyDialog dlg;      <span class="comment">// 然后，新建 MyDialog 对象</span></span><br><span class="line">    <span class="keyword">if</span>(dlg.<span class="built_in">exec</span>() == QDialog::Accepted)</span><br><span class="line">        <span class="built_in">show</span>();        <span class="comment">// 最后，如果按下【进入主窗口】按钮，则再次显示主界面；否则，由于已经没有可显示的界面，程序将会退出</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述示例代码最终的运行效果如下面的动图所示：</p>
<p><img src="/C&C++/Qt-Widgets/Window/15.gif"></p>
<h4 id="标准对话框">标准对话框</h4>
<p>Qt
为文件、字体、颜色的选择操作，提供了如下开箱即用的对话框小部件，它们全部继承自<code>QDialog</code>类：</p>
<table>
<thead>
<tr class="header">
<th>对话框类</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>QColorDialog</code></td>
<td>用于指定颜色的对话框小部件；</td>
</tr>
<tr class="even">
<td><code>QFileDialog</code></td>
<td>允许用户选择文件或者目录的小部件；</td>
</tr>
<tr class="odd">
<td><code>QFontDialog</code></td>
<td>用于选择字体的对话框小部件；</td>
</tr>
<tr class="even">
<td><code>QInputDialog</code></td>
<td>可供用户输入单个值的简单对话框；</td>
</tr>
<tr class="odd">
<td><code>QMessageBox</code></td>
<td>通知用户或者询问用户并接收答案的模态对话框；</td>
</tr>
<tr class="even">
<td><code>QProgressDialog</code></td>
<td>用于对缓慢操作的进度进行反馈的对话框小部件；</td>
</tr>
</tbody>
</table>
<p>通过将各种小部件组合到<code>QDialog</code>当中，就可以轻松的创建各种自定义对话框，下面这
2 个类可以用于构建自定义的对话框:</p>
<table>
<colgroup>
<col style="width: 25%">
<col style="width: 74%">
</colgroup>
<thead>
<tr class="header">
<th>对话框类</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>QDialog</code></td>
<td>对话框窗口的基类；</td>
</tr>
<tr class="even">
<td><code>QDialogButtonBox</code></td>
<td>用于在一个适合当前小部件风格的布局里展现按钮小部件；</td>
</tr>
</tbody>
</table>
<p>新建一个名为<code>demo</code>的 Qt Widgets
工程，基类选择<code>QWidget</code>，类名称修改为<code>MyWidget</code>，项目完整源代码如下所示：</p>
<h5 id="demo.pro-2">demo.pro</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line"><span class="built_in">greaterThan</span>(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mydialog2</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        mywidget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mywidget.h</span><br><span class="line"></span><br><span class="line">FORMS    += mywidget.ui</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="main.cpp-2">main.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** main.cpp */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MyWidget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="mywidget.h">mywidget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** mywidget.h */</span></span><br><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWizard&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QErrorMessage</span>; <span class="comment">// 用于提供错误信息显示对话框</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyWidget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_1_clicked</span><span class="params">()</span></span>;   <span class="comment">// 颜色对话框</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_2_clicked</span><span class="params">()</span></span>;   <span class="comment">// 文件对话框</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_3_clicked</span><span class="params">()</span></span>;   <span class="comment">// 字体对话框</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_4_clicked</span><span class="params">()</span></span>;   <span class="comment">// 输入对话框</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_5_clicked</span><span class="params">()</span></span>;   <span class="comment">// 消息对话框</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_6_clicked</span><span class="params">()</span></span>;   <span class="comment">// 进度对话框</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_7_clicked</span><span class="params">()</span></span>;   <span class="comment">// 错误信息对话框</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_8_clicked</span><span class="params">()</span></span>;   <span class="comment">// 向导对话框</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line"></span><br><span class="line">        QErrorMessage *errordlg;          <span class="comment">// QErrorMessage 错误信息私有变量</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 如下 3 个函数的返回值为 QWizardPage 类的指针，用于生成 3 个向导页面 */</span></span><br><span class="line">        <span class="function">QWizardPage *<span class="title">createPage1</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function">QWizardPage *<span class="title">createPage2</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function">QWizardPage *<span class="title">createPage3</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="mywidget.cpp">mywidget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** mywidget.cpp */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QColorDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFileDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFontDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QInputDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QProgressDialog&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QErrorMessage&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    errordlg = <span class="keyword">new</span> <span class="built_in">QErrorMessage</span>(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 颜色对话框 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_1_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 调用 QColorDialog 的静态函数显示颜色对话框，3 个参数分别用于设置初始颜色、指定父窗口、设置对话框标题 */</span></span><br><span class="line">    <span class="comment">// QColor color = QColorDialog::getColor(Qt::red, this, tr(&quot;颜色对话框&quot;), QColorDialog::ShowAlphaChannel);   //</span></span><br><span class="line"></span><br><span class="line">    <span class="function">QColorDialog <span class="title">dialog</span><span class="params">(Qt::red, <span class="keyword">this</span>)</span></span>;               <span class="comment">// 创建 QColorDialog 对象</span></span><br><span class="line">    dialog.<span class="built_in">setOption</span>(QColorDialog::ShowAlphaChannel); <span class="comment">// 显示 alpha 选项</span></span><br><span class="line">    dialog.<span class="built_in">exec</span>();                                    <span class="comment">// 以模态方式运行颜色对话框</span></span><br><span class="line">    QColor color = dialog.<span class="built_in">currentColor</span>();             <span class="comment">// 获取当前的颜色</span></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;color: &quot;</span> &lt;&lt; color;                   <span class="comment">// 控制台打印颜色</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文件对话框 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_2_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* getOpenFileName() 用于选择单个文件，4 个参数分别用于指定父窗口、对话框标题、默认打开的目录路径、文件类型过滤器（默认可选择所有文件，也可以使用;;设置多个过滤器）*/</span></span><br><span class="line">    <span class="comment">// QString fileName = QFileDialog::getOpenFileName(this, tr(&quot;文件对话框&quot;), &quot;D:&quot;, tr(&quot;图片文件(*png *jpg);;文本文件(*txt)&quot;));</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 以模态方式运行可以选择多个文件的文件对话框，并返回当前选择的文件名称 */</span></span><br><span class="line">    QStringList fileNames = QFileDialog::<span class="built_in">getOpenFileNames</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;文件对话框&quot;</span>), <span class="string">&quot;D:&quot;</span>, <span class="built_in">tr</span>(<span class="string">&quot;图片文件(*png *jpg)&quot;</span>));</span><br><span class="line">    <span class="built_in">qDebug</span>()&lt;&lt; <span class="string">&quot;fileNames:&quot;</span> &lt;&lt; fileNames;  <span class="comment">// 控制台打印当前选择的文件名称</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 字体对话框 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_3_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">bool</span> ok;                                        <span class="comment">// 布尔型变量 ok 用于标记【OK】按钮是否被按下</span></span><br><span class="line">    QFont font = QFontDialog::<span class="built_in">getFont</span>(&amp;ok, <span class="keyword">this</span>);   <span class="comment">// 调用 QFontDialog 类的静态函数 getFont() 获取选择的字体，第 1 个参数用于存放按钮状态</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ok) ui-&gt;pushButton_3-&gt;<span class="built_in">setFont</span>(font);        <span class="comment">// 如果按下【OK】按钮，就让【字体对话框】按钮使用新字体。</span></span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;没有选择字体！&quot;</span>);           <span class="comment">// 反之按下【Cancel】按钮，则控制台输出提示信息</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 输入对话框 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_4_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">bool</span> ok;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* getText() 用于提供输入字符串的对话框，其 6 个参数分别用于指定父窗口、窗口标题、标签显示文本、输入字符串的显示模式、输入框默认字符串、获取按钮状态的布尔变量 */</span></span><br><span class="line">    QString string = QInputDialog::<span class="built_in">getText</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;输入字符串对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;请输入用户名：&quot;</span>), QLineEdit::Normal, <span class="built_in">tr</span>(<span class="string">&quot;admin&quot;</span>), &amp;ok);</span><br><span class="line">    <span class="keyword">if</span>(ok) <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;string:&quot;</span> &lt;&lt; string;</span><br><span class="line">    <span class="comment">/* getInt() 用于提供整型数值的输入，参数 100 表示默认数值，参数 -1000 和 1000 分别表示可输入的最小值和最大值，参数 10 表示箭头按钮每次变化 10 */</span></span><br><span class="line">    <span class="type">int</span> value1 = QInputDialog::<span class="built_in">getInt</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;输入整数对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;请输入-1000到1000之间的数值&quot;</span>), <span class="number">100</span>, <span class="number">-1000</span>, <span class="number">1000</span>, <span class="number">10</span>, &amp;ok);</span><br><span class="line">    <span class="keyword">if</span>(ok) <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;value1:&quot;</span> &lt;&lt; value1;</span><br><span class="line">    <span class="comment">/* getDouble() 用于提供浮点数的输入，其中的参数 2 表示小数的位数 */</span></span><br><span class="line">    <span class="type">double</span> value2 = QInputDialog::<span class="built_in">getDouble</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;输入浮点数对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;请输入-1000到1000之间的数值&quot;</span>), <span class="number">0.00</span>, <span class="number">-1000</span>, <span class="number">1000</span>, <span class="number">2</span>, &amp;ok);</span><br><span class="line">    <span class="keyword">if</span>(ok) <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;value2:&quot;</span> &lt;&lt; value2;</span><br><span class="line">    QStringList items;</span><br><span class="line">    items &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;条目1&quot;</span>) &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;条目2&quot;</span>);</span><br><span class="line">    <span class="comment">/* getItem() 用于提供一个条目的输入，其中参数 0 表示默认显示列表的第 0 个条目，参数 true 设置是否可以被修改 */</span></span><br><span class="line">    QString item = QInputDialog::<span class="built_in">getItem</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;输入条目对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;请选择或输入一个条目&quot;</span>), items, <span class="number">0</span>, <span class="literal">true</span>, &amp;ok);</span><br><span class="line">    <span class="keyword">if</span>(ok) <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;item:&quot;</span> &lt;&lt; item;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 消息对话框，所包含静态方法的参数分别用于设置父窗口、标题栏、显示信息、包含的按钮（由 QMessageBox 类提供）*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_5_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* question() 问题对话框 */</span></span><br><span class="line">    <span class="type">int</span> ret1 = QMessageBox::<span class="built_in">question</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;问题对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;您访问过我的博客吗？&quot;</span>), QMessageBox::Yes, QMessageBox::No);</span><br><span class="line">    <span class="keyword">if</span>(ret1 == QMessageBox::Yes) <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;问题！&quot;</span>);</span><br><span class="line">    <span class="comment">/* information() 提示对话框 */</span></span><br><span class="line">    <span class="type">int</span> ret2 = QMessageBox::<span class="built_in">information</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;提示对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;这是我的博客地址：https://uinika.gitee.io/&quot;</span>), QMessageBox::Ok);</span><br><span class="line">    <span class="keyword">if</span>(ret2 == QMessageBox::Ok) <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;提示！&quot;</span>);</span><br><span class="line">    <span class="comment">/* warning() 警告对话框 */</span></span><br><span class="line">    <span class="type">int</span> ret3 = QMessageBox::<span class="built_in">warning</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;警告对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;系统运行警告信息！&quot;</span>), QMessageBox::Abort);</span><br><span class="line">    <span class="keyword">if</span>(ret3 == QMessageBox::Abort) <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;警告！&quot;</span>);</span><br><span class="line">    <span class="comment">/* critical() 危险错误对话框 */</span></span><br><span class="line">    <span class="type">int</span> ret4 = QMessageBox::<span class="built_in">critical</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;危险错误对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;系统运行出现危险错误！&quot;</span>), QMessageBox::YesAll);</span><br><span class="line">    <span class="keyword">if</span>(ret4 == QMessageBox::YesAll) <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;危险错误&quot;</span>);</span><br><span class="line">    <span class="comment">/* about() 关于对话框 */</span></span><br><span class="line">    QMessageBox::<span class="built_in">about</span>(<span class="keyword">this</span>, <span class="built_in">tr</span>(<span class="string">&quot;关于对话框&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;关于我的博客：https://uinika.github.io/&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 进度对话框 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_6_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">QProgressDialog <span class="title">dialog</span><span class="params">(tr(<span class="string">&quot;文件复制进度&quot;</span>), tr(<span class="string">&quot;取消&quot;</span>), <span class="number">0</span>, <span class="number">50000</span>, <span class="keyword">this</span>)</span></span>;</span><br><span class="line">    dialog.<span class="built_in">setWindowTitle</span>(<span class="built_in">tr</span>(<span class="string">&quot;进度对话框&quot;</span>));      <span class="comment">// 设置窗口标题</span></span><br><span class="line">    dialog.<span class="built_in">setWindowModality</span>(Qt::WindowModal);   <span class="comment">// 设置对话框为模态</span></span><br><span class="line">    dialog.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 模拟复制进度 */</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">50000</span>; i++) &#123;</span><br><span class="line">        dialog.<span class="built_in">setValue</span>(i);                     <span class="comment">// 设置进度条当前值</span></span><br><span class="line">        QCoreApplication::<span class="built_in">processEvents</span>();      <span class="comment">// 避免界面冻结</span></span><br><span class="line">        <span class="keyword">if</span>(dialog.<span class="built_in">wasCanceled</span>()) <span class="keyword">break</span>;         <span class="comment">// 如果按下【取消】按钮则中断操作</span></span><br><span class="line">    &#125;</span><br><span class="line">    dialog.<span class="built_in">setValue</span>(<span class="number">50000</span>);                     <span class="comment">// 显示 100%，上面 for 循环少加了 1</span></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;复制结束！&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 错误信息对话框 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_7_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    errordlg-&gt;<span class="built_in">setWindowTitle</span>(<span class="built_in">tr</span>(<span class="string">&quot;错误信息对话框&quot;</span>));</span><br><span class="line">    errordlg-&gt;<span class="built_in">showMessage</span>(<span class="built_in">tr</span>(<span class="string">&quot;这里是出错信息！&quot;</span>));   <span class="comment">// 以非模态方式显示对话框</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 向导对话框页面 1、2、3，基于 QWizardPage 类进行创建 */</span></span><br><span class="line"><span class="function">QWizardPage * <span class="title">MyWidget::createPage1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QWizardPage *page = <span class="keyword">new</span> QWizardPage;</span><br><span class="line">    page-&gt;<span class="built_in">setTitle</span>(<span class="built_in">tr</span>(<span class="string">&quot;介绍&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">QWizardPage * <span class="title">MyWidget::createPage2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QWizardPage *page = <span class="keyword">new</span> QWizardPage;</span><br><span class="line">    page-&gt;<span class="built_in">setTitle</span>(<span class="built_in">tr</span>(<span class="string">&quot;用户选择信息&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">QWizardPage * <span class="title">MyWidget::createPage3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QWizardPage *page = <span class="keyword">new</span> QWizardPage;</span><br><span class="line">    page-&gt;<span class="built_in">setTitle</span>(<span class="built_in">tr</span>(<span class="string">&quot;结束&quot;</span>));</span><br><span class="line">    <span class="keyword">return</span> page;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 向导对话框，基于进行创建 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushButton_8_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 新建 QWizard 对象，并且设置窗口标题 */</span></span><br><span class="line">    <span class="function">QWizard <span class="title">wizard</span><span class="params">(<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    wizard.<span class="built_in">setWindowTitle</span>(<span class="built_in">tr</span>(<span class="string">&quot;向导对话框&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 添加向导页面并且展示，其参数为 QWizardPage 类型的指针 */</span></span><br><span class="line">    wizard.<span class="built_in">addPage</span>(<span class="built_in">createPage1</span>());</span><br><span class="line">    wizard.<span class="built_in">addPage</span>(<span class="built_in">createPage2</span>());</span><br><span class="line">    wizard.<span class="built_in">addPage</span>(<span class="built_in">createPage3</span>());</span><br><span class="line">    wizard.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="mywidget.ui">mywidget.ui</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyWidget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton_1&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>40<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>颜色对话框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton_2&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>40<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>文件对话框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton_3&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>90<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>字体对话框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton_4&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>90<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>输入对话框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton_5&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>140<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>消息对话框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton_6&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>140<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>进度对话框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton_7&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>190<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>101<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>错误信息对话框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton_8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>190<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>91<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>向导对话框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/C&C++/Qt-Widgets/Window/16.gif"></p>
<h3 id="qframe-边框">QFrame 边框</h3>
<p><code>QFrame</code>类是带边框小部件的基类，其子类包括常用的标签部件<code>QLabel</code>、<code>QLCDNumber</code>、<code>QSplitter</code>、<code>QStackedWidget</code>、<code>QToolBox</code>、<code>QAbstractScrollArea</code>类（所有带滚动区域部件的抽象基类）。注意
Qt
中凡是带有<code>Abstract</code>字样的类都是抽象类，抽象类不能直接使用，只能用于继承并实现自定义类，或是直接使用其子类。</p>
<p>带边框小部件最明显的特征是拥有一个明显的边界框架，而<code>QFrame</code>类的主要功能就是用来实现不同的边框效果，这些边框主要由的<strong>形状</strong>（<code>QFrame::Shape</code>）和<strong>阴影</strong>（<code>QFrame::Shadow</code>）组合形成。</p>
<table>
<colgroup>
<col style="width: 21%">
<col style="width: 7%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th>QFrame::Shape 枚举常量</th>
<th>值</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>QFrame::NoFrame</code></td>
<td><code>0</code></td>
<td><code>QFrame</code>不进行绘制；</td>
</tr>
<tr class="even">
<td><code>QFrame::Box</code></td>
<td><code>0x0001</code></td>
<td><code>QFrame</code>围绕其内容绘制一个边框；</td>
</tr>
<tr class="odd">
<td><code>QFrame::Panel</code></td>
<td><code>0x0002</code></td>
<td><code>QFrame</code>绘制一个使内容显示为凸起或凹陷的面板；</td>
</tr>
<tr class="even">
<td><code>QFrame::StyledPanel</code></td>
<td><code>0x0006</code></td>
<td>绘制一个矩形面板，其外观取决于当前的 GUI
样式，即可以是凸起也可以是凹陷；</td>
</tr>
<tr class="odd">
<td><code>QFrame::HLine</code></td>
<td><code>0x0004</code></td>
<td>绘制一条没有框架的水平线（可用作分隔符）；</td>
</tr>
<tr class="even">
<td><code>QFrame::VLine</code></td>
<td><code>0x0005</code></td>
<td>绘制一条没有框架的垂直线（可用作分隔符）；</td>
</tr>
<tr class="odd">
<td><code>QFrame::WinPanel</code></td>
<td><code>0x0003</code></td>
<td>绘制类似于 Windows 2000 上的矩形面板，可以凸起或者凹陷；</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 19%">
<col style="width: 6%">
<col style="width: 73%">
</colgroup>
<thead>
<tr class="header">
<th>QFrame::Shadow 枚举常量</th>
<th>值</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>QFrame::Plain</code></td>
<td><code>0x0010</code></td>
<td>框架和内容与周围环境齐平，使用调色板<code>QPalette::WindowText</code>绘制颜色（没有任何
3D 效果）；</td>
</tr>
<tr class="even">
<td><code>QFrame::Raised</code></td>
<td><code>0x0020</code></td>
<td>框架和内容发生凸起（使用当前<strong>颜色组</strong>的明暗色绘制 3D
凸起线）；</td>
</tr>
<tr class="odd">
<td><code>QFrame::Sunken</code></td>
<td><code>0x0030</code></td>
<td>框架和内容发生凹陷（使用当前<strong>颜色组</strong>的明暗色绘制 3D
凹下线）；</td>
</tr>
</tbody>
</table>
<p>上述<code>QFrame</code>枚举值合成的全部边框效果如下图所示：</p>
<p><img src="/C&C++/Qt-Widgets/Window/17.png"></p>
<blockquote>
<p><strong>注意</strong>：<code>lineWidth</code>是边框边界线的宽度；而<code>midLineWidth</code>是在边框中额外插入一条线的宽度，从而形成
3D
效果，并且只在<code>Box</code>、<code>HLine</code>、<code>VLine</code>表现为凸起或者凹陷时有效。</p>
</blockquote>
<p>接下来，编写程序演示具体效果。新建名称为<code>myframe</code>工程，选择<code>QWidget</code>为基类，类名设置为<code>MyWidget</code>。完成以后打开<code>mywidget.ui</code>文件。然后，打开
Qt Creator 设计器从左侧部件列表拖入 1
个<code>Frame</code>到工作区，然后在右下方属性栏将其<code>frameShape</code>更改为<code>Box</code>、<code>frameshadow</code>修改为<code>Sunken</code>、<code>lineWidth</code>设置为<code>5</code>，<code>midLineWidth</code>设置为<code>10</code>。这里设置的小部件属性，也可以在<code>mywidget.cpp</code>的构造函数<code>MyWidget()</code>里用代码进行实现：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 如下 2 段代码也可用 setFrameStyle(QFrame::Box | QFrame::Sunken) 语句代替 */</span></span><br><span class="line">    ui-&gt;frame-&gt;<span class="built_in">setFrameShape</span>(QFrame::Box);</span><br><span class="line">    ui-&gt;frame-&gt;<span class="built_in">setFrameShadow</span>(QFrame::Sunken);</span><br><span class="line"></span><br><span class="line">    ui-&gt;frame-&gt;<span class="built_in">setLineWidth</span>(<span class="number">5</span>);</span><br><span class="line">    ui-&gt;frame-&gt;<span class="built_in">setMidLineWidth</span>(<span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：在 Qt Creator
设计器的属性栏当中设置的属性，在<code>.cpp</code>代码当中都会对应的方法进行相同的设置。</p>
</blockquote>
<h4 id="qlabel">QLabel</h4>
<p>小部件<code>QLabel</code>用于显示文本或者图片，打开 Qt Creator
设计器，向工作区拖入 1
个<code>Label</code>小部件，然后拉伸其长宽度，并在右侧属性栏中设置其<code>alignment</code>对齐属性，【水平的】栏目改为<code>Align HCenter</code>，【垂直的】栏目改为<code>Align VCenter</code>，从而让<code>QLabel</code>里的文本居中显示，然后通过修改<code>mywidget.cpp</code>的构造函数将<code>font</code>属性设置为<code>18</code>像素的加粗倾斜<code>Consolas</code>字体：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    QFont font;</span><br><span class="line">    font.<span class="built_in">setFamily</span>(<span class="string">&quot;Consolas&quot;</span>);</span><br><span class="line">    font.<span class="built_in">setPointSize</span>(<span class="number">14</span>);</span><br><span class="line">    font.<span class="built_in">setBold</span>(<span class="literal">true</span>);</span><br><span class="line">    font.<span class="built_in">setItalic</span>(<span class="literal">true</span>);</span><br><span class="line">    ui-&gt;label-&gt;<span class="built_in">setFont</span>(font);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Qt Creator
设计器右下角的【QLabel】属性栏里的【wordWrap】可以实现文本的自动换行，如果不想换行而是让其自动省略，则可以选择用于计算给定字体字符串大小的<code>QFontMetrics</code>类，该类即可以通过创建对象的方式使用，也可以通过调用<code>QWidget::fontMetrics()</code>函数返回当前小部件字体的<code>QFontMetrics</code>对象。该对象下的<code>elidedText()</code>函数用于进行文本省略操作，其第
1 个参数用于指定待省略的文本、第 2
个参数指定省略号<code>...</code>出现的位置（<code>Qt:ElideLeft</code>文本开头、<code>Qt::ElideMiddle</code>文本中间、<code>Qt::Elideright</code>文本末尾）、第
3
个参数为以像素为单位的文本长度，超过该值即进行省略。继续在<code>mywidget.cpp</code>的构造函数当中添加如下代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    QString string = <span class="built_in">tr</span>(<span class="string">&quot;标题太长，需要进行省略！&quot;</span>);</span><br><span class="line">    QString str = ui-&gt;label2-&gt;<span class="built_in">fontMetrics</span>().<span class="built_in">elidedText</span>(string, Qt::ElideRight, <span class="number">80</span>);</span><br><span class="line">    ui-&gt;label2-&gt;<span class="built_in">setText</span>(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>勾选 Qt Creator
设计器右下角【QLabel】属性栏里的【scaledContents】可以根据标签尺寸缩放其中的内容，然后向<code>mywidget.cpp</code>添加<code>#include &lt;QPixmap&gt;</code>头文件，并往构造函数添加如下代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPixmap&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    ui-&gt;label3-&gt;<span class="built_in">setPixmap</span>(<span class="built_in">QPixmap</span>(<span class="string">&quot;../avatar.png&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>QLabel</code>里还可以显示 GIF
动态图片，往<code>mywidget.cpp</code>中添加头文件<code>#include &lt;QMovie&gt;</code>，然后向其构造函数添加下面代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMovie&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    QMovie *movie = <span class="keyword">new</span> <span class="built_in">QMovie</span>(<span class="string">&quot;../animation.gif&quot;</span>);</span><br><span class="line">    ui-&gt;label4-&gt;<span class="built_in">setMovie</span>(movie);</span><br><span class="line">    movie-&gt;<span class="built_in">start</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：上述实验需要首先将图片<code>avatar.png</code>和<code>animation.gi</code>添加至当前工程的上一层目录。</p>
</blockquote>
<h4 id="qlcdnumber">QLCDNumber</h4>
<p><code>QLCDNumber</code>小部件可用于实现类似 LED 数码管的显示效果，从
Qt Creator 设计器部件栏中拖入 1 个【LCD
Number】部件到工作区，然后更改其属性。选中【smallDecimalPoint】项以显示小数点；【digitCount】项的作用是设置显示的数字个数，这里设置为<code>8</code>以显示
8
个数字；【mode】选择<code>Dec</code>以显示十进制数值；【segmentStyle】用于将数值的显示样式设置为<code>Filled</code>；最后，用【value】将需要显示的数值设置为<code>2020.51</code>。</p>
<h4 id="qstackedwidget">QStackedWidget</h4>
<p><code>QStackedWidget</code>类提供了一个拥有多张页面的部件栈，每个页面都可以拥有自己的小部件，但是每次只能显示
1
张页面。需要与<code>QComboBox</code>或者<code>QListWidget</code>搭配使用以选择指定页面。</p>
<p>从 Qt Creator 设计器部件栏中分别拖入 1 个【List Widget】和【Stacked
Widget】小部件，鼠标右键点击【List
Widget】，在弹出菜单中选择【编辑项目】，然后在弹出的【编辑列表窗口部件】对话框中点击左下角【+】添加
2
项，并且分别命名为<code>第一页</code>和<code>第二页</code>。接下来，向【Stacked
Widget】拖入 1
个<code>Label</code>，更改文本为<code>第一页</code>。再单击<code>Stacked Widget</code>小部件右上角的小箭头进入下一页，再拖入一个标签并更改文本为<code>第二页</code>。然后，再将【Stacked
Widget】部件的【frameShape】属性更改为<code>StyledPanel</code>。</p>
<p>最后，点击工作区顶部的【Edit
Signals/Slots】按钮进入<strong>信号槽设计模式</strong>，将<code>listWidget</code>部件的<code>currentChanged()</code>信号与<code>stackedWidget</code>的<code>setCurrentIndex()</code>槽进行关联，设置完成以后，就可以通过单击<code>listWidget</code>中的项目来选择<code>stackedWidget</code>里的页面。</p>
<h4 id="qtoolbox">QToolBox</h4>
<p><code>QToolBox</code>类提供了一列带有选项卡的部件，类似于 Skype
好友菜单的效果。从 Qt Creator 设计器部件栏中拖入 1 个【Tool
Box】至工作区，鼠标选中小部件并点击右键菜单上的【插入页 →
在当前页之后】插入一个新的页，然后修改其【frame Shape】属性为
<code>Box</code>，并分别将各页标签对应的【currentItemText】修改为<code>好友</code>、<code>黑名单</code>、<code>陌生人</code>。</p>
<h4 id="本节完整示例">本节完整示例</h4>
<p>本节所有示例的运行效果以及源代码分别如下面所示：</p>
<p><img src="/C&C++/Qt-Widgets/Window/18.gif"></p>
<h5 id="myframe.pro">myframe.pro</h5>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = demo</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        mywidget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mywidget.h</span><br><span class="line"></span><br><span class="line">FORMS    += mywidget.ui</span><br><span class="line"></span><br><span class="line">DISTFILES += \</span><br><span class="line">    animation.gif \</span><br><span class="line">    avatar.png</span><br></pre></td></tr></table></figure>
<h5 id="mywidget.h-1">mywidget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyWidget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="mywidget.cpp-1">mywidget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPixmap&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMovie&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* QFrame */</span></span><br><span class="line">    ui-&gt;frame-&gt;<span class="built_in">setFrameShape</span>(QFrame::Box);</span><br><span class="line">    ui-&gt;frame-&gt;<span class="built_in">setFrameShadow</span>(QFrame::Sunken);</span><br><span class="line">    ui-&gt;frame-&gt;<span class="built_in">setLineWidth</span>(<span class="number">5</span>);</span><br><span class="line">    ui-&gt;frame-&gt;<span class="built_in">setMidLineWidth</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* QFont */</span></span><br><span class="line">    QFont font;</span><br><span class="line">    font.<span class="built_in">setFamily</span>(<span class="string">&quot;Consolas&quot;</span>);</span><br><span class="line">    font.<span class="built_in">setPointSize</span>(<span class="number">18</span>);</span><br><span class="line">    font.<span class="built_in">setBold</span>(<span class="literal">true</span>);</span><br><span class="line">    font.<span class="built_in">setItalic</span>(<span class="literal">true</span>);</span><br><span class="line">    ui-&gt;label1-&gt;<span class="built_in">setFont</span>(font);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* QFontMetrics */</span></span><br><span class="line">    QString string = <span class="built_in">tr</span>(<span class="string">&quot;标题太长，需要进行省略！&quot;</span>);</span><br><span class="line">    QString str = ui-&gt;label2-&gt;<span class="built_in">fontMetrics</span>().<span class="built_in">elidedText</span>(string, Qt::ElideRight, <span class="number">80</span>);</span><br><span class="line">    ui-&gt;label2-&gt;<span class="built_in">setText</span>(str);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* QPixmap */</span></span><br><span class="line">    ui-&gt;label3-&gt;<span class="built_in">setPixmap</span>(<span class="built_in">QPixmap</span>(<span class="string">&quot;../avatar.png&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* QMovie */</span></span><br><span class="line">    QMovie *movie = <span class="keyword">new</span> <span class="built_in">QMovie</span>(<span class="string">&quot;../animation.gif&quot;</span>);</span><br><span class="line">    ui-&gt;label4-&gt;<span class="built_in">setMovie</span>(movie);</span><br><span class="line">    movie-&gt;<span class="built_in">start</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="mywidget.ui-1">mywidget.ui</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyWidget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>927<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>334<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QFrame&quot;</span> <span class="attr">name</span>=<span class="string">&quot;frame&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>40<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>30<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>120<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>80<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;frameShape&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>QFrame::StyledPanel<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;frameShadow&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>QFrame::Raised<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLCDNumber&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lcdNumber&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>650<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>40<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>191<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>51<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;smallDecimalPoint&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;digitCount&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>10<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;segmentStyle&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>QLCDNumber::Filled<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;value&quot;</span> <span class="attr">stdset</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">double</span>&gt;</span>2020.509999999999991<span class="tag">&lt;/<span class="name">double</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QListWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;listWidget&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>190<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>81<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>101<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>第一页<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>第二页<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QStackedWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;stackedWidget&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>330<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>190<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>141<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>101<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;frameShape&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>QFrame::StyledPanel<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;currentIndex&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>1<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;page&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label_2&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">x</span>&gt;</span>40<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">width</span>&gt;</span>54<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">height</span>&gt;</span>12<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>第一页<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;page_2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label_3&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">x</span>&gt;</span>40<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">width</span>&gt;</span>54<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">height</span>&gt;</span>12<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>第二页<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QToolBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;toolBox&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>180<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>69<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>101<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;frameShape&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>QFrame::Box<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;currentIndex&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>1<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;page_3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>67<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;label&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>好友<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;page_5&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>67<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;label&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>黑名单<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;page_4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>67<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;label&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>陌生人<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label2&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>280<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>60<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>71<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>31<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>省略标题<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;alignment&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span>Qt::AlignCenter<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label3&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>420<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>20<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>118<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>122<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Avatar<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;scaledContents&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;alignment&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span>Qt::AlignCenter<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label4&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>590<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>110<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>320<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>200<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>GIF<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;alignment&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span>Qt::AlignCenter<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label1&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>170<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>30<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>111<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>91<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>Hank<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;scaledContents&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;alignment&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span>Qt::AlignCenter<span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wordWrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">connection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">sender</span>&gt;</span>listWidget<span class="tag">&lt;/<span class="name">sender</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">signal</span>&gt;</span>currentRowChanged(int)<span class="tag">&lt;/<span class="name">signal</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">receiver</span>&gt;</span>stackedWidget<span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">slot</span>&gt;</span>setCurrentIndex(int)<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">hints</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;sourcelabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>193<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>142<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;destinationlabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>264<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>146<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">hints</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">connections</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="qabstractbutton-按钮">QAbstractButton 按钮</h3>
<p><code>QAbstractButton</code>是按钮小部件的抽象基类，提供了按钮的通用功能，其子类包括标准按钮<code>QPushButton</code>、单选框按钮<code>QRadioButton</code>、复选框<code>QCheckBox</code>、工具按钮<code>QToolButton</code>。新建<code>mybutton</code>工程，选择<code>QWidget</code>为基类，类名设置为<code>MyWidget</code>。然后在工程目录下新建<code>images</code>文件夹，并放入
2 张示例用的图标。</p>
<p><img src="/C&C++/Qt-Widgets/Window/19.gif"></p>
<ol type="1">
<li>首先，放置<code>QPushButton</code>按钮，打开工程里的<code>mywidget.ui</code>文件，放置
3 个【Push
Button】到设计器工作区，然后将其【objectName】依次修改为<code>pushBtn1</code>、<code>pushBtn2</code>、<code>pushBtn3</code>。选中<code>pushBtn1</code>的<code>checkable</code>属性，使其拥有<strong>选中</strong>和<strong>未选中</strong>
2
种状态；再选中<code>pushBtn2</code>的<code>flat</code>属性，使其不显示该按钮的边框；再鼠标选中<code>pushBtn1</code>右键点击【转到槽】进入其<code>toggled(bool)</code>信号的槽，添加<code>qDebug()</code>控制台打印信息。</li>
<li>然后，放置单选框按钮<code>QRadioButton</code>和复选框<code>QCheckBox</code>，将它们放置到
2 个【Group
Box】内进行管理，并将其标题分别修改为<code>复选框</code>和<code>单选框</code>。然后向复选框中拖入<code>迈腾</code>、<code>亚洲龙</code>、<code>阿特兹</code>3
个【Check
Box】；再向单选框拖入<code>买了</code>、<code>不买</code>、<code>等等看</code>
3 个【Radio Button】；这里还可以选中【Check
Box】的<code>tristate</code>属性，使其拥有<code>不改变</code>、<code>选中</code>、<code>未选中</code>
3 种状态。</li>
<li>最后，如果需要处理按钮选择以后的操作，则可以关联其<code>stateChanged(int)</code>信号到自定义槽；除此之外，还可以使用<code>isChecked()</code>函数查看按钮是否被选中；除了<code>QGroupBox</code>类之外，<code>QButtonGroup</code>类也可以用于管理多个按钮。</li>
</ol>
<h4 id="mybutton.pro">mybutton.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mybutton</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        mywidget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mywidget.h</span><br><span class="line"></span><br><span class="line">FORMS    += mywidget.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-3">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MyWidget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mywidget.h-2">mywidget.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyWidget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushBtn1_toggled</span><span class="params">(<span class="type">bool</span> checked)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_checkBox_stateChanged</span><span class="params">(<span class="type">int</span> arg1)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mywidget.cpp-2">mywidget.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMenu&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    ui-&gt;pushBtn1-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;&amp;Hank&quot;</span>));   <span class="comment">// 字母前面添加 &amp; 符号，即将其快捷键设置为 Alt + H</span></span><br><span class="line">    ui-&gt;pushBtn2-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;帮助(&amp;H)&quot;</span>));</span><br><span class="line">    ui-&gt;pushBtn2-&gt;<span class="built_in">setIcon</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;../mybutton/images/help.png&quot;</span>));</span><br><span class="line">    ui-&gt;pushBtn3-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;z&amp;oom&quot;</span>));</span><br><span class="line">    QMenu *menu = <span class="keyword">new</span> <span class="built_in">QMenu</span>(<span class="keyword">this</span>);</span><br><span class="line">    menu-&gt;<span class="built_in">addAction</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;../mybutton/images/zoom-in.png&quot;</span>), <span class="built_in">tr</span>(<span class="string">&quot;放大&quot;</span>));</span><br><span class="line">    ui-&gt;pushBtn3-&gt;<span class="built_in">setMenu</span>(menu);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_pushBtn1_toggled</span><span class="params">(<span class="type">bool</span> checked)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;按钮是否按下：&quot;</span>) &lt;&lt; checked;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mywidget.ui-2">mywidget.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyWidget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushBtn1&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>20<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>PushButton<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkable&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushBtn2&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>150<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>20<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>PushButton<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;flat&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushBtn3&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>270<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>20<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>PushButton<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QGroupBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;groupBox&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>20<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>120<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>141<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>151<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>复选框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QCheckBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;checkBox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>30<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>71<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>迈腾<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;tristate&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QCheckBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;checkBox_2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>70<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>71<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>亚洲龙<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QCheckBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;checkBox_3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>110<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>71<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>阿特兹<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QGroupBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;groupBox_2&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>190<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>120<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>161<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>151<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;title&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>单选框<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QRadioButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;radioButton&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>30<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>89<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>买了<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QRadioButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;radioButton_2&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>70<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>89<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>不买<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QRadioButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;radioButton_3&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>110<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>89<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>等等看<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="qlineedit-行编辑器">QLineEdit 行编辑器</h3>
<p><code>QLineEdit</code>小部件是一个单行的文本编辑器，用于接收用户输入和编辑单行的纯文本内容，而且提供了撤销、恢复、剪切、拖放等功能。Qt
Creator
新建一个<code>mybutton</code>工程，选择<code>QWidget</code>为基类，类名设置为<code>MyWidget</code>。然后进入设计模式，向工作区拖入
4 个【Line
Edit】，然后依次修改其<code>objectName</code>为<code>lineEdit1</code>、<code>lineEdit2</code>、<code>lineEdit3</code>、<code>lineEdit4</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Window/20.png"></p>
<ol type="1">
<li><strong>显示模式</strong>：<code>QLineEdit</code>行编辑器拥有 4
种显示模式，可以在【echoMode】属性中进行修改，其属性值可以选择<code>Normal</code>正常显示输入的信息、<code>NoEcho</code>不显示任何输入以确保不会泄露输入的字符位数、<code>Password</code>显示为星号密码样式、<code>PasswordEchoOnEdit</code>在编辑时显示正常字符，其他情况下显示为密码样式。这里，将<code>lineEdit1</code>的【echoMode】设置为<code>Password</code>。</li>
<li><strong>输入掩码</strong>：<code>QLineEdit</code>还提供了输入掩码（Input
Mask）限制输入内容，通过一些特殊字符对输入内容与格式进行设置。下面将<code>lineedit2</code>的【inputMask】属性设置为<code>&gt;AA-90-bb! a\#H;*”</code>。除此之外，同样也可以采用<code>setInputMask()</code>函数在代码中进行输入掩码相关的设置。最后编辑<code>lineEdit1</code>行编辑框的默认信号<code>returnPressed()</code>所对应的槽函数<code>on_lineEdit2_returnPressed()</code>，添加相应的处理代码。</li>
<li><strong>输入验证</strong>：<code>QLineEdit</code>还可以使用验证器<code>QValidator</code>对输入进行约束，需要包含<code>#include &lt;QValidator&gt;</code>头文件；</li>
<li><strong>自动补全</strong>：<code>QLineEdit</code>利用<code>QCompleter</code>类实现，需要包含<code>#include &lt;QCompleter&gt;</code>头文件；</li>
</ol>
<blockquote>
<p><strong>注意</strong>：<code>lineedit2</code>的【inputMask】属性值<code>&gt;AA-90-bb-!aa\#H;*</code>当中，符号<code>&gt;</code>表示输入的字母自动转换为大写；<code>AA</code>表示开始必须输入
2
个字母；<code>-</code>号为分隔符，可以直接显示，但不可以输入；<code>9</code>表示必须输入
1 个数字；<code>0</code>表示输入一个数字；<code>bb</code>表示该 2
位可以留空或输入二进制字符<code>0</code>和<code>1</code>；<code>!</code>表示停止大小写转换，即让开头的<code>&gt;</code>失效；<code>aa</code>表示可以留空或输入
2
个字母；<code>#</code>符号表示将<code>#</code>用作分隔符，由于<code>#</code>号具有特殊含义，所以前面加上<code>\</code>进行转义；<code>H</code>表明必须输入
1 个十六进制字符；<code>;*</code>表示用<code>*</code>号来填充空格。</p>
</blockquote>
<h4 id="mylineedit.pro">mylineedit.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mylineedit</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        mywidget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mywidget.h</span><br><span class="line"></span><br><span class="line">FORMS    += mywidget.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-4">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MyWidget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="mywidget.h-3">mywidget.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyWidget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_lineEdit2_returnPressed</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_lineEdit3_returnPressed</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mywidget.cpp-3">mywidget.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QCompleter&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QValidator&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 正则表达式验证器，输入可选的 -，然后输入 1 ~ 3 个数字 */</span></span><br><span class="line">    <span class="comment">// QRegExp rx(&quot;-?\\d&#123;1,3&#125;&quot;);   //</span></span><br><span class="line">    <span class="comment">// QValidator *validator = new QRegExpValidator(rx, this);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 验证器，只允许输入 100 ~ 999 范围的数值 */</span></span><br><span class="line">    QValidator *validator = <span class="keyword">new</span> <span class="built_in">QIntValidator</span>(<span class="number">100</span>, <span class="number">999</span>, <span class="keyword">this</span>);</span><br><span class="line">    ui-&gt;lineEdit3-&gt;<span class="built_in">setValidator</span>(validator);               <span class="comment">// 在行编辑器中使用验证器</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 自动补全，输入字母 Q 自动提示 Qt 和 Qt Creator 选项 */</span></span><br><span class="line">    QStringList wordList;</span><br><span class="line">    wordList &lt;&lt; <span class="string">&quot;Qt&quot;</span> &lt;&lt; <span class="string">&quot;Qt Creator&quot;</span> &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;你好&quot;</span>);</span><br><span class="line">    QCompleter *completer = <span class="keyword">new</span> <span class="built_in">QCompleter</span>(wordList, <span class="keyword">this</span>);</span><br><span class="line">    completer-&gt;<span class="built_in">setCaseSensitivity</span>(Qt::CaseInsensitive);   <span class="comment">// 取消大小写敏感</span></span><br><span class="line">    ui-&gt;lineEdit4-&gt;<span class="built_in">setCompleter</span>(completer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* lineEdit2 回车键按下信号 returnPressed() 对应的槽函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_lineEdit2_returnPressed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ui-&gt;lineEdit3-&gt;<span class="built_in">setFocus</span>();                    <span class="comment">// 首先，让 lineEdit3 获得焦点</span></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; ui-&gt;lineEdit2-&gt;<span class="built_in">text</span>();            <span class="comment">// 然后，输出 lineEdit2 当中的内容</span></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; ui-&gt;lineEdit2-&gt;<span class="built_in">displayText</span>();     <span class="comment">// 最后，输出 lineEdit2 显示的内容</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* lineEdit3 回车键按下信号 returnPressed() 对应的槽函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyWidget::on_lineEdit3_returnPressed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; ui-&gt;lineEdit3-&gt;<span class="built_in">text</span>();            <span class="comment">// 输入正确值以后，按下回车键输出 lineEdit3 当前填写的内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mywidget.ui-3">mywidget.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyWidget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>50<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>61<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>显示模式：<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLineEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lineEdit1&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>140<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>171<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;echoMode&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>QLineEdit::Password<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label_2&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>50<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>100<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>61<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>输入掩码：<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLineEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lineEdit2&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>140<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>100<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>171<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;inputMask&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span><span class="symbol">&amp;gt;</span>AA-90-bb-!aa\#H;*<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label_3&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>50<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>150<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>61<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>输入验证：<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLineEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lineEdit3&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>140<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>150<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>171<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLabel&quot;</span> <span class="attr">name</span>=<span class="string">&quot;label_4&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>50<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>200<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>61<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>自动完成：<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLineEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lineEdit4&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>140<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>200<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>171<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>20<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="qabstractspinbox-微调框">QAbstractSpinBox 微调框</h3>
<p><code>QAbstractSpinBox</code>是一个抽象基类，用于提供 1
个行编辑器和微调框来显示或设定值，其拥有<code>QDateTimeEdit</code>（用于设置日期时间）、<code>QSpinBox</code>（用于设置整数）、<code>QDoubleSpinBox</code>（用于设置浮点数）3
个子类。Qt Creator
新建一个<code>myspinbox</code>工程，选择<code>QWidget</code>为基类，类名设置为<code>MyWidget</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Window/21.gif"></p>
<ol type="1">
<li><code>QDateTimeEdit</code>类提供了一个可以编辑时间和日期的小部件，分别向工作区拖入【Time
Edit】、【Date Edit】、【Date/Time Edit】小部件，首先设置【Time
Edit】的<code>displayFormat</code>为<code>h:mm:ssA</code>
以十二小时制进行显示；然后勾选【Date
Edit】的<code>calendarPopup</code>属性，以使用弹出的日历小部件设置日期；最后向<code>MyWidget</code>类的构造函数添加设置时间和显示格式的代码。</li>
<li><code>QSpinBox</code>用于设置整数，<code>QDoubleSpinBox</code>则用于设置浮点数，分别向工作区拖入【Spin
Box】和【Double Spin Box】，将【Spin
Box】的<code>suffix</code>后缀属性设置为<code>%</code>以显示百分数；</li>
</ol>
<h4 id="myspinbox.pro">myspinbox.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = myspinbox</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        mywidget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mywidget.h</span><br><span class="line"></span><br><span class="line">FORMS    += mywidget.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-5">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MyWidget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mywidget.h-4">mywidget.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyWidget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mywidget.cpp-4">mywidget.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    ui-&gt;dateTimeEdit-&gt;<span class="built_in">setDateTime</span>(QDateTime::<span class="built_in">currentDateTime</span>());              <span class="comment">// 设置为当前系统时间</span></span><br><span class="line">    ui-&gt;dateTimeEdit-&gt;<span class="built_in">setDisplayFormat</span>(<span class="built_in">tr</span>(<span class="string">&quot;yyyy年MM月dd日ddd HH时mm分ss秒&quot;</span>));   <span class="comment">// 设置时间显示格式</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mywidget.ui-4">mywidget.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyWidget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QTimeEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;timeEdit&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>40<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>40<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>118<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;displayFormat&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>h:mm:ssA<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QDateEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dateEdit&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>200<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>40<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>110<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;calendarPopup&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QDateTimeEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dateTimeEdit&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>40<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>100<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>271<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSpinBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;spinBox&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>50<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>190<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>91<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>31<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>%<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QDoubleSpinBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;doubleSpinBox&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>170<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>190<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>121<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>31<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="qabstractslider-滑动块">QAbstractSlider 滑动块</h3>
<p><code>QAbstractSlider</code>通过一个滑动块设置某个区间范围内的整数值，该类为一个抽象基类，拥有<code>QScrollBar</code>、<code>QSlider</code>、<code>QDial</code>
3
个子类。其中<code>QScrollBar</code>滚动条常用于<code>QScrollArea</code>类当中实现滚动区域；<code>QSlider</code>则是常见的音量控制或多媒体播放进度滑块小部件；<code>QDial</code>则是一个刻度表盘部件。
Qt Creator
新建一个<code>myslider</code>工程，选择<code>QWidget</code>为基类，类名设置为<code>MyWidget</code>。然后进入设计模式，向工作区拖入【Dial】、【Horizontal
Scroll Bar】、【Vertical Scroll Bar】、【Horizontal Slider】、【Vertical
Slider】、【Spin Box】共 6 个部件。</p>
<p><img src="/C&C++/Qt-Widgets/Window/22.gif"></p>
<p>最后，单击 Qt Creator 顶部的【Edit
Signals/Slots】图标或是按下快捷键【F4】，进入了信号槽编辑模式。将刻度表盘部件<code>dial</code>的<code>sliderMoved(int)</code>信号分别与其它小部件的<code>setValue(int)</code>槽进行连接，从而让其它小部件跟随其一起变化。本小节示例主要依靠
Qt Creator 设计器进行实现，源代码则保持 Qt Creator
自动生成的模板即可。</p>
<h4 id="myslider.pro">myslider.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = myslider</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        mywidget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mywidget.h</span><br><span class="line"></span><br><span class="line">FORMS    += mywidget.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-6">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MyWidget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mywidget.h-5">mywidget.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyWidget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyWidget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mywidget.cpp-5">mywidget.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mywidget.ui-5">mywidget.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyWidget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MyWidget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QDial&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dial&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>30<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>50<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>64<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;notchesVisible&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QScrollBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;horizontalScrollBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>130<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>160<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;focusPolicy&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::StrongFocus<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Horizontal<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;invertedControls&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QScrollBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;verticalScrollBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>360<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>10<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>16<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>160<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;focusPolicy&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::StrongFocus<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Vertical<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;invertedControls&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>true<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSlider&quot;</span> <span class="attr">name</span>=<span class="string">&quot;horizontalSlider&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>20<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>180<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>160<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>19<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Horizontal<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSlider&quot;</span> <span class="attr">name</span>=<span class="string">&quot;verticalSlider&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>240<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>110<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>19<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>160<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Vertical<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSpinBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;spinBox&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>250<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>101<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">connection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">sender</span>&gt;</span>dial<span class="tag">&lt;/<span class="name">sender</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">signal</span>&gt;</span>sliderMoved(int)<span class="tag">&lt;/<span class="name">signal</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">receiver</span>&gt;</span>horizontalScrollBar<span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">slot</span>&gt;</span>setValue(int)<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">hints</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;sourcelabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>57<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>65<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;destinationlabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>154<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>61<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">hints</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">connection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">sender</span>&gt;</span>dial<span class="tag">&lt;/<span class="name">sender</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">signal</span>&gt;</span>sliderMoved(int)<span class="tag">&lt;/<span class="name">signal</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">receiver</span>&gt;</span>verticalScrollBar<span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">slot</span>&gt;</span>setValue(int)<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">hints</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;sourcelabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>59<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>79<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;destinationlabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>368<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>74<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">hints</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">connection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">sender</span>&gt;</span>dial<span class="tag">&lt;/<span class="name">sender</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">signal</span>&gt;</span>sliderMoved(int)<span class="tag">&lt;/<span class="name">signal</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">receiver</span>&gt;</span>horizontalSlider<span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">slot</span>&gt;</span>setValue(int)<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">hints</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;sourcelabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>59<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>83<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;destinationlabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>59<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>186<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">hints</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">connection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">sender</span>&gt;</span>dial<span class="tag">&lt;/<span class="name">sender</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">signal</span>&gt;</span>sliderMoved(int)<span class="tag">&lt;/<span class="name">signal</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">receiver</span>&gt;</span>verticalSlider<span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">slot</span>&gt;</span>setValue(int)<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">hints</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;sourcelabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>75<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>72<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;destinationlabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>242<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>160<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">hints</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">connection</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">sender</span>&gt;</span>dial<span class="tag">&lt;/<span class="name">sender</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">signal</span>&gt;</span>sliderMoved(int)<span class="tag">&lt;/<span class="name">signal</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">receiver</span>&gt;</span>spinBox<span class="tag">&lt;/<span class="name">receiver</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">slot</span>&gt;</span>setValue(int)<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">hints</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;sourcelabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>38<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>90<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hint</span> <span class="attr">type</span>=<span class="string">&quot;destinationlabel&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>39<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>266<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">hint</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">hints</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">connection</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">connections</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="布局管理">布局管理</h2>
<p>Qt
定义了一系列布局管理类，用于描述小部件在程序界面当中的布局方式。当可用的空间量发生变化时，这些布局会自动定位并调整小部件的大小尺寸，以确保其排列一致，用户界面保持整体可用。</p>
<p>所有<code>QWidget</code>子类都可以被布局管理类控制，使用<code>QWidget::setLayout()</code>函数即可将布局应用到小部件，被应用到指定布局的小部件拥有如下功能：</p>
<ul>
<li>子部件的定位</li>
<li>感知默认与最小的窗口尺寸；</li>
<li>尺寸调整处理；</li>
<li>当内容发生变化时自动进行更新（当子部件的字体大小或者内容发生变化时，或者在删除或隐藏子部件的时候）；</li>
</ul>
<h3 id="qlayout-布局类">QLayout 布局类</h3>
<p><code>QLayout</code>类是布局管理器的抽象基类，继承自<code>QObject</code>和<code>QLayoutItem</code>类，其中<code>QLayout</code>和<code>QLayoutItem</code>类仅用于自定义布局管理器，一般情况下只需要使用到<code>QLayout</code>的子类：<code>QHBoxLayout</code>（基本布局管理器）、<code>QVBoxLayout</code>（垂直布局管理器）、<code>QGridLayout</code>（栅格布局管理器）、
<code>QFormlayout</code>（窗体布局管理器）和
<code>QStackedLayout</code>（栈布局管理器）。</p>
<p>Qt Creator
新建一个<code>mylayout</code>工程，选择<code>QWidget</code>为基类，类名设置为<code>MyWidget</code>。然后进入设计模式，向工作区分别拖入
1 个【Text Edit】和【Font Combo
Box】小部件，然后选中最外层的<code>MyWidget</code>部件，并将其<code>geometry</code>属性宽度和高度分别设置为<code>400 * 300</code>；最后，按下快捷键【Ctrl
+ L】或者鼠标点击工作区顶部的【垂直布局】按钮即可让 2
个小部件实现垂直布局， 此时可以看到 2
个小部件会拉伸并且填满整个窗口。</p>
<p><img src="/C&C++/Qt-Widgets/Layout/1.png"></p>
<h4 id="qboxlayout-盒子布局">QBoxLayout 盒子布局</h4>
<p><code>QBoxLayout</code>可以让子部件以水平或者垂直方式排成一列，即将所有空间分为多个盒子，然后分别将每个小部件放入一个盒子。实际开发当中，通常使用其<code>QHBoxLayout</code>水平盒子布局和<code>QVBoxLayout</code>垂直盒子布局
2
个子类。基于上面的<code>mylayout</code>示例工程，鼠标选中所有小部件后点击设计器顶部的【打破布局】按钮，然后清空设计器工作区的所有小部件，并且加入代码以呈现如下效果：</p>
<p><img src="/C&C++/Qt-Widgets/Layout/2.png"></p>
<h5 id="mylayout.pro">mylayout.pro</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line"><span class="built_in">greaterThan</span>(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">CONFIG += c+<span class="number">+11</span></span><br><span class="line"></span><br><span class="line">DEFINES += QT_DEPRECATED_WARNINGS</span><br><span class="line"></span><br><span class="line">SOURCES += \</span><br><span class="line">    main.cpp \</span><br><span class="line">    mywidget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS += \</span><br><span class="line">    mywidget.h</span><br><span class="line"></span><br><span class="line">FORMS += \</span><br><span class="line">    mywidget.ui</span><br></pre></td></tr></table></figure>
<h5 id="main.cpp-7">main.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MyWidget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="mywidget.h-6">mywidget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line">QT_BEGIN_NAMESPACE</span><br><span class="line"><span class="keyword">namespace</span> Ui &#123; <span class="keyword">class</span> <span class="title class_">MyWidget</span>; &#125;</span><br><span class="line">QT_END_NAMESPACE</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">MyWidget</span>(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">        ~<span class="built_in">MyWidget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyWidget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="mywidget.cpp-6">mywidget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QHBoxLayout&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent): <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 实例化 5 个按钮 */</span></span><br><span class="line">    QPushButton *button1 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 1&quot;</span>);</span><br><span class="line">    QPushButton *button2 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 2&quot;</span>);</span><br><span class="line">    QPushButton *button3 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 3&quot;</span>);</span><br><span class="line">    QPushButton *button4 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 4&quot;</span>);</span><br><span class="line">    QPushButton *button5 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 5&quot;</span>);</span><br><span class="line"></span><br><span class="line">    QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout;   <span class="comment">// 实例化水平盒子布局</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 向水平盒子布局添加 5 个按钮 */</span></span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button1);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button2);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button3);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button4);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button5);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setLayout</span>(layout);                       <span class="comment">// 将水平盒子布局设置为当前 MyWidget 类的布局</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果将上述工程中的<code>QHBoxLayout</code>修改为<code>QVBoxLayout</code>，即采用垂直盒子布局，所有按钮即可呈现成为如下效果：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QVBoxLayout&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent): <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 实例化 5 个按钮 */</span></span><br><span class="line">    QPushButton *button1 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 1&quot;</span>);</span><br><span class="line">    QPushButton *button2 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 2&quot;</span>);</span><br><span class="line">    QPushButton *button3 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 3&quot;</span>);</span><br><span class="line">    QPushButton *button4 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 4&quot;</span>);</span><br><span class="line">    QPushButton *button5 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 5&quot;</span>);</span><br><span class="line"></span><br><span class="line">    QVBoxLayout *layout = <span class="keyword">new</span> QVBoxLayout;   <span class="comment">// 实例化垂直盒子布局</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 向垂直盒子布局添加 5 个按钮 */</span></span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button1);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button2);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button3);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button4);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button5);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setLayout</span>(layout);                       <span class="comment">// 将垂直盒子布局设置为当前 MyWidget 类的布局</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/C&C++/Qt-Widgets/Layout/3.png"></p>
<h4 id="qgridlayout-栅格布局">QGridLayout 栅格布局</h4>
<p><code>QGridLayout</code>栅格布局用于在一个二维网格当中放置小部件，每个小部件可以占用多个单元格。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QGridLayout&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent): <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 实例化 5 个按钮 */</span></span><br><span class="line">    QPushButton *button1 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 1&quot;</span>);</span><br><span class="line">    QPushButton *button2 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 2&quot;</span>);</span><br><span class="line">    QPushButton *button3 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 3&quot;</span>);</span><br><span class="line">    QPushButton *button4 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 4&quot;</span>);</span><br><span class="line">    QPushButton *button5 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 5&quot;</span>);</span><br><span class="line"></span><br><span class="line">    QGridLayout *layout = <span class="keyword">new</span> QGridLayout;   <span class="comment">// 实例化栅格布局</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 向栅格布局添加 5 个按钮 */</span></span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button1, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);  <span class="comment">// 位于第 0 行第 0 列，占据 1 行 1 列的空间</span></span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button2, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);  <span class="comment">// 位于第 0 行第 1 列，占据 1 行 1 列的空间</span></span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button3, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);  <span class="comment">// 位于第 1 行第 0 列，占据 1 行 1 列的空间</span></span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button4, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);  <span class="comment">// 位于第 1 行第 1 列，占据 1 行 1 列的空间</span></span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button5, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>);  <span class="comment">// 位于第 2 行第 0 列，占据 1 行 2 列的空间</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">setLayout</span>(layout);                       <span class="comment">// 将栅格布局设置为当前 MyWidget 类的布局</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/C&C++/Qt-Widgets/Layout/4.png"></p>
<h4 id="qformlayout-表单布局">QFormLayout 表单布局</h4>
<p><code>QFormLayout</code>表单布局类用于管理输入小部件以及其相关的小部件形成的表单。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFormLayout&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLineEdit&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent): <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 第 1 组按钮与行编辑器 */</span></span><br><span class="line">    QPushButton *button1 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 1&quot;</span>);</span><br><span class="line">    QLineEdit *lineEdit1 = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="string">&quot;LineEdit 1&quot;</span>);</span><br><span class="line">    <span class="comment">/* 第 2 组按钮与行编辑器 */</span></span><br><span class="line">    QPushButton *button2 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 2&quot;</span>);</span><br><span class="line">    QLineEdit *lineEdit2 = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="string">&quot;LineEdit 2&quot;</span>);</span><br><span class="line">    <span class="comment">/* 第 3 组按钮与行编辑器 */</span></span><br><span class="line">    QPushButton *button3 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 3&quot;</span>);</span><br><span class="line">    QLineEdit *lineEdit3 = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="string">&quot;LineEdit 3&quot;</span>);</span><br><span class="line">    <span class="comment">/* 第 4 组按钮与行编辑器 */</span></span><br><span class="line">    QPushButton *button4 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 4&quot;</span>);</span><br><span class="line">    QLineEdit *lineEdit4 = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="string">&quot;LineEdit 4&quot;</span>);</span><br><span class="line">    <span class="comment">/* 第 5 组按钮与行编辑器 */</span></span><br><span class="line">    QPushButton *button5 = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="string">&quot;Button 5&quot;</span>);</span><br><span class="line">    QLineEdit *lineEdit5 = <span class="keyword">new</span> <span class="built_in">QLineEdit</span>(<span class="string">&quot;LineEdit 5&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 分别向表单布局添加按钮和行编辑器 */</span></span><br><span class="line">    QFormLayout *layout = <span class="keyword">new</span> QFormLayout;</span><br><span class="line">    layout-&gt;<span class="built_in">addRow</span>(button1, lineEdit1);</span><br><span class="line">    layout-&gt;<span class="built_in">addRow</span>(button2, lineEdit2);</span><br><span class="line">    layout-&gt;<span class="built_in">addRow</span>(button3, lineEdit3);</span><br><span class="line">    layout-&gt;<span class="built_in">addRow</span>(button4, lineEdit4);</span><br><span class="line">    layout-&gt;<span class="built_in">addRow</span>(button5, lineEdit5);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setLayout</span>(layout);   <span class="comment">// 将表单布局设置为当前 MyWidget 类的布局</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/C&C++/Qt-Widgets/Layout/5.png"></p>
<h4 id="布局对小部件的处理流程">布局对小部件的处理流程</h4>
<p>向一个布局中添加小部件时，该布局的处理流程如下：</p>
<ol type="1">
<li>最初，所有小部件根据其<code>QWidget::sizePolicy()</code>和<code>QWidget::sizeHint()</code>分配空间；</li>
<li>如果小部件设置了伸缩因子，且其值大于<code>0</code>，则按照伸缩因子指定的比例分配空间；</li>
<li>如果小部件伸缩因子设置为<code>0</code>，那么只会在其它小部件不需要空间时，其才会获得更多空间，且空间会优先分配给具备<code>Expanding</code>大小策略的小部件；</li>
<li>如果小部件分配到的空间小于其<strong>最小</strong>尺寸（如果没有指定最小尺寸<code>minimumSize</code>，则基于其最小尺寸提示<code>minimumSizeHint</code>进行判断），则其会分配到所需的最小空间（小部件不必具有最小尺寸<code>minimumSize</code>或者最小尺寸提示<code>minimumSizeHint</code>，这样其伸缩因子将会成为决定性因素）；</li>
<li>如果小部件分配到的空间大于其<strong>最大</strong>尺寸，则其会分配到所需的最大空间；</li>
</ol>
<h4 id="伸缩因子">伸缩因子</h4>
<p>创建小部件通常并不需要设置任何伸缩因子（Stretch
Factors），但是当将小部件放置到布局里时，就会根据其<code>QWidget::sizePolicy()</code>或者它们的<code>minimumSizeHint</code>分配空间，此时伸缩因子用于控制每个小部件占用的空间比例。</p>
<p>例如：下面是 3
个小部件被放置到没有伸缩因子的<code>QHBoxLayout</code>布局中所呈现的效果。</p>
<p><img src="/C&C++/Qt-Widgets/Layout/6.png"></p>
<p>此时，如果将伸缩因子应用于每个小部件，则它们将会按照比例进行排列（但是绝对不会小于其<code>minimumSizeHint</code>）。</p>
<p><img src="/C&C++/Qt-Widgets/Layout/7.png"></p>
<h4 id="sizehintminimumsizehintqsizepolicy-属性">sizeHint/minimumSizeHint/QSizePolicy
属性</h4>
<p>终上所述，对布局内小部件空间占用产生影响的方法或属性主要有如下几个：</p>
<ul>
<li><code>QWidget::sizeHint()</code>：获得小部件的<strong>推荐尺寸</strong>属性<code>sizeHint</code>，返回值为<code>QSize</code>类型；</li>
<li><code>QWidget::minimumSizeHint()</code>：获得小部件的<strong>最小推荐尺寸</strong>属性<code>minimumSizeHint</code>，返回值为<code>QSize</code>类型；</li>
<li><code>QWidget::setSizePolicy(QSizePolicy)</code>：设置小部件的空间策略；</li>
</ul>
<p><code>#include &lt;QSize&gt;</code>中定义的<code>QSize</code>类专门用于保存小部件的大小尺寸（不包括窗口框架）。而<code>QWidget</code>类提供的<code>QSizePolicy</code>类型（用于描述水平和垂直方向的缩放规则）则用于描述小部件的布局策略，可选的枚举值如下所示：</p>
<table>
<colgroup>
<col style="width: 18%">
<col style="width: 23%">
<col style="width: 57%">
</colgroup>
<thead>
<tr class="header">
<th>枚举常量</th>
<th>取值</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>QSizePolicy::Fixed</code></td>
<td><code>0</code></td>
<td>只能使用<code>sizeHint()</code>提供的值，无法进行伸缩；</td>
</tr>
<tr class="even">
<td><code>QSizePolicy::Minimum</code></td>
<td><code>GrowFlag</code></td>
<td><code>sizeHint()</code>提供的尺寸是最小的，小部件可以进行拉伸；</td>
</tr>
<tr class="odd">
<td><code>QSizePolicy::Maximum</code></td>
<td><code>ShrinkFlag</code></td>
<td><code>sizeHint()</code>提供的尺寸是最大的，小部件可以进行压缩；</td>
</tr>
<tr class="even">
<td><code>QSizePolicy::Preferred</code></td>
<td><code>GrowFlag</code> / <code>ShrinkFlag</code></td>
<td>默认规则，<code>sizeHint()</code>提供的尺寸是最佳的，小部件依然可以进行伸缩，但是效果不如<code>sizeHint()</code>的尺寸；</td>
</tr>
<tr class="odd">
<td><code>QSizePolicy::Expanding</code></td>
<td><code>GrowFlag</code> / <code>ShrinkFlag</code> /
<code>ExpandFlag</code></td>
<td><code>sizeHint()</code>提供的尺寸合理，小部件虽然可以压缩，但会更加倾向通过拉伸来获取更多的空间；</td>
</tr>
<tr class="even">
<td><code>QSizePolicy::MinimumExpanding</code></td>
<td><code>GrowFlag</code> / <code>ExpandFlag</code></td>
<td><code>sizeHint()</code>提供的尺寸最小，小部件会尽可能通过拉伸来获取更多空间；</td>
</tr>
<tr class="odd">
<td><code>QSizePolicy::Ignored</code></td>
<td><code>ShrinkFlag</code> / <code>GrowFlag</code> /
<code>IgnoreFlag</code></td>
<td><code>sizeHint()</code>的尺寸将会被忽略，小部件将获得尽可能多的空间；</td>
</tr>
</tbody>
</table>
<h4 id="综合使用布局">综合使用布局</h4>
<p>各种类型的布局管理，通常在实际项目当中是综合运用的，例如：如下界面的布局就混合使用了<code>QBoxLayout</code>盒子布局、<code>QGridLayout</code>栅格布局、<code>QFormLayout</code>表单布局。</p>
<p><img src="/C&C++/Qt-Widgets/Layout/8.png"></p>
<p>上述界面布局的最终运行效果如下图所示：</p>
<p><img src="/C&C++/Qt-Widgets/Layout/9.png"></p>
<h3 id="qsplitter-分裂器类">QSplitter 分裂器类</h3>
<p><code>QSplitter</code>类提供了一个分裂器部件，可以实现与<code>QBoxLayout</code>类似的布局管理器功能，但是其中包含的部件会随着分裂器大小尺寸的变化而变化。例如：布局管理器当中的按钮，其垂直方向默认不会进行拉伸，但是放入分裂器当中就会。除此之外，布局管理器继承自<code>QObject</code>类，而分裂器则继承自<code>QFrame</code>类，而<code>QFrame</code>又继承自<code>QWidget</code>类，也就是说<code>QSplitter</code>可以像<code>QFrame</code>一样设置边框。</p>
<p>Qt Creator
新建<code>mysplitter</code>工程，选择<code>QWidget</code>作为基类，类名同样设置为<code>MyWidget</code>。进入设计模式，向工作区分别拖入
4 个【Push Button】，然后鼠标选中这 4 个按钮，右键选择【布局 &gt;
使用分裂器水平部局】，即可将 4 个小部件放入 1 个水平分裂器当中</p>
<p><img src="/C&C++/Qt-Widgets/Layout/10.png"></p>
<p>然后适当调整最外层<code>QWidget</code>的几何尺寸，同时用鼠标拖拽放大分裂器，并设置其【frameShape】属性为<code>Box</code>，【frameShadow】属性为<code>Raised</code>，【lineWidth】属性为<code>5</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Layout/11.png"></p>
<h3 id="edit-buddies">Edit Buddies</h3>
<p>Qt 的基本特性之一是提供了<strong>伙伴小部件</strong>（Buddy
Widget）支持，<code>QLabel</code>标签通常会用作交互式小部件的功能说明，为了方便对这些交互式小部件定位，<code>QLabel</code>提供了<strong>伙伴小部件</strong>机制，使用快捷键就可以将键盘焦点放置到对应的小部件，而这个小部件就称为<code>QLabel</code>的<strong>伙伴</strong>。当<code>QLabel</code>中的文本为英文时，在文本首字母前面添加<code>&amp;</code>符号，即可指定快捷键为【Alt
+
字母】；如果<code>QLabel</code>中的文本为中文，则需要在小括号中指定加速键字母。</p>
<p>Qt Creator
新建<code>mybuddy</code>工程，选择<code>QWidget</code>作为基类，类名同样设置为<code>MyWidget</code>。进入设计模式，向工作区分别拖入
4 个【Label】标签以及对应的【Push Button】、【Check Box】、【Line
Edit】、【Spin Box】交互式小部件，然后分别将 4
个【Label】标签的<code>text</code>属性修改为：<code>&amp;PushButton</code>、<code>Check&amp;Box</code>、<code>行编辑框(&amp;L)</code>、<code>数字选择框(&amp;N)</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Layout/12.png"></p>
<p>单击 Qt Creator 设计器工作区顶部的【Edit
Buddies】图标，进入<strong>伙伴编辑模式</strong>，鼠标左键拖动箭头，将标签【Label】与交互式小部件【Push
Button】、【Check Box】、【Line Edit】、【Spin
Box】逐一关联起来。然后点击工作区顶部的【Edit
Widgets】或是按下快捷键【F3】返回<strong>小部件编辑模式</strong>，运行程序后呈现的界面效果如下：</p>
<p><img src="/C&C++/Qt-Widgets/Layout/13.png"></p>
<p>最后，通过键盘分别按下【Alt + P】、【Alt + B】、【Alt + L】、【Alt +
N】快捷键即可呈现与鼠标点击交互式控件时相同的效果。</p>
<h3 id="edit-tab-order">Edit Tab Order</h3>
<p>如果需要使用【Tab】按键在小部件之间移动输入焦点，基于上一步的代码，点击
Qt Creator 设计器工作区顶部的【Edit Tab Order】图标进入 <strong>Tab
顺序编辑模式</strong>：</p>
<p><img src="/C&C++/Qt-Widgets/Layout/14.png"></p>
<p>设置完成之后运行工程，输入焦点会自动落在【Tab】键顺序为<code>1</code>的小部件上，具体效果如下图所示：</p>
<p><img src="/C&C++/Qt-Widgets/Layout/15.gif"></p>
<p>上述的设置等价于向<code>mywidget.cpp</code>源文件中的<code>MyWidget</code>类构造函数添加如下代码：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mywidget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mywidget.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MyWidget::<span class="built_in">MyWidget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyWidget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">setTabOrder</span>(ui-&gt;lineEdit, ui-&gt;spinBox);      <span class="comment">// lineEdit 先于 spinBox</span></span><br><span class="line">    <span class="built_in">setTabOrder</span>(ui-&gt;spinBox, ui-&gt;pushButton);    <span class="comment">// spinBox 先于 pushButton</span></span><br><span class="line">    <span class="built_in">setTabOrder</span>(ui-&gt;pushButton, ui-&gt;checkBox);   <span class="comment">// pushButton 先于 checkBox</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyWidget::~<span class="built_in">MyWidget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="主窗口">主窗口</h2>
<p><strong>主窗口</strong>为构建程序用户界面提供了框架，Qt
提供了<code>QMainWindow</code>以及一系列相关的类共同来完成主窗口的管理，其中<code>QMainWindow</code>类拥有着自己的布局，可以向其中添加<code>QToolBars</code>、<code>QDockWidgets</code>、<code>QMenuBar</code>、<code>QStatusBar</code>等小部件：</p>
<p><img src="/C&C++/Qt-Widgets/Main/1.png"></p>
<ol type="1">
<li><code>QMenuBar</code>：<strong>菜单栏</strong>，位于主窗口的顶部，包含一个下拉菜单项的列表，这些菜单项由<code>QAction</code>动作类实现，1
个主窗口只能有 1 个菜单栏；</li>
<li><code>QToolBar</code>：<strong>工具栏</strong>，用于显示一些常用的菜单项，也可以插入其他窗口部件，并且是可以移动的，1
个主窗口可以拥有多个工具栏；</li>
<li><code>QDockWidget</code>：<strong>Dock
停靠窗口</strong>，可以停靠在中心部件的四周，并且放入一些小部件，1
个主窗口可以拥有多个 <strong>Dock</strong> 部件；</li>
<li><code>QStatusBar</code>：<strong>状态栏</strong>，用于显示程序的一些状态信息，在主窗口的最底部。1
个主窗口只能拥有 1 个状态栏；</li>
<li><strong>Central
Widget</strong>：<strong>中心部件</strong>，主窗口中心区域可以放入<code>QTextEdit</code>或者<code>QGraphicsView</code>等标准
Qt 小部件，是应用程序主要业务功能的体现区域，1 个主窗口只能拥有 1
个中心部件；</li>
</ol>
<h3 id="示例多窗口编辑器">示例：多窗口编辑器</h3>
<p>Qt Creator
新建一个<code>mymainwindow</code>工程，选择<code>QMainWindow</code>为基类，类名设置为<code>MainWindow</code>。然后进入设计模式添加主窗口菜单，鼠标双击左上角的【在这里输入】，将其修改为<code>文件(&amp;F)</code>，然后鼠标点击该菜单，继续将弹出的菜单项修改为<code>新建文件(&amp;N)</code>，此时工作区下方的【Action
Editor】会显示出对应的<strong>Action</strong>，最后按下回车键即可完成菜单项的添加。</p>
<p><img src="/C&C++/Qt-Widgets/Main/5.gif"></p>
<h4 id="myimages.qrc">myimages.qrc</h4>
<p>新建 Qt 资源文件，选中项目然后鼠标右键点击【Add
New...】添加新文件，选择【Qt Resource
File】，文件名称填写为<code>myimages</code>，其他选项默认即可。</p>
<p><img src="/C&C++/Qt-Widgets/Main/2.png"></p>
<p>接下来添加资源，先在工程目录下新建一个名为<code>images</code>的文件夹，并放入<code>new.png</code>和<code>open.png</code>两张图片（图片资源必须放在<code>.qrc</code>资源文件同级或者子级目录下），然后用【资源编辑器】打开<code>myimages.qrc</code>源文件，点击工作区下方的【Add
Prefix】按钮，并命名为<code>/image</code>，然后鼠标再点击【Add
Files】按钮将工程目录下的 2 个图片文件加载进来。</p>
<p>最后着手使用图片，回到<code>mainwindow.ui</code>对应的设计模式，鼠标点击【Action
Editor】上的【新建】按钮，此时会弹出【新建动作】对话框：</p>
<p><img src="/C&C++/Qt-Widgets/Main/3.png"></p>
<p>按照上面截图当中的格式填写对话框，然后点击图标后面的【...】按钮，进入【选择资源】对话框选择<code>new.png</code>作为图标：</p>
<p><img src="/C&C++/Qt-Widgets/Main/4.png"></p>
<p>上述步骤添加的<code>myimages.qrc</code>资源文件本质是一个 XML
文件，用【普通文本编辑器】打开该文件后可以查看到如下内容：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;RCC&gt;</span><br><span class="line">    &lt;qresource prefix=<span class="string">&quot;/image&quot;</span>&gt;</span><br><span class="line">        &lt;file&gt;images/<span class="keyword">new</span>.png&lt;/file&gt;</span><br><span class="line">        &lt;file&gt;images/open.png&lt;/file&gt;</span><br><span class="line">    &lt;/qresource&gt;</span><br><span class="line">&lt;/RCC&gt;</span><br></pre></td></tr></table></figure>
<p>按照上面的<code>myimages.qrc</code>资源文件格式，如果编写代码时需要使用<code>new.png</code>图片，则可以将其路径指定为<code>:/image/images/new.png</code>；其中，前缀<code>/image</code>可以修改为其它名字或者省略。</p>
<h4 id="mymainwindow.pro">mymainwindow.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">CONFIG += c++<span class="number">11</span></span><br><span class="line"></span><br><span class="line">TARGET = mymainwindow</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += \</span><br><span class="line">        main.cpp \</span><br><span class="line">        mainwindow.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mainwindow.h</span><br><span class="line"></span><br><span class="line">FORMS    += mainwindow.ui</span><br><span class="line"></span><br><span class="line">RESOURCES += myimages.qrc</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-8">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.h-1">mainwindow.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MainWindow</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MainWindow</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_action_New_triggered</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_action_Dock_triggered</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MainWindow *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.cpp-1">mainwindow.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QToolButton&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QSpinBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTextEdit&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMdiSubWindow&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLabel&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) : <span class="built_in">QMainWindow</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 添加菜单 */</span></span><br><span class="line">    QMenu *editMenu = ui-&gt;menuBar-&gt;<span class="built_in">addMenu</span>(<span class="built_in">tr</span>(<span class="string">&quot;编辑(&amp;E)&quot;</span>));   <span class="comment">// 添加编辑菜单，可以通过 ui-&gt;menuBar 获取菜单栏</span></span><br><span class="line">    QAction *action_Open = editMenu-&gt;<span class="built_in">addAction</span>(<span class="built_in">QIcon</span>(<span class="string">&quot;:/image/images/open.png&quot;</span>),<span class="built_in">tr</span>(<span class="string">&quot;打开文件(&amp;O)&quot;</span>));   <span class="comment">// 添加打开菜单</span></span><br><span class="line">    action_Open-&gt;<span class="built_in">setShortcut</span>(<span class="built_in">QKeySequence</span>(<span class="string">&quot;Ctrl+O&quot;</span>));        <span class="comment">// 设置快捷键 Ctrl + O</span></span><br><span class="line">    ui-&gt;mainToolBar-&gt;<span class="built_in">addAction</span>(action_Open);                 <span class="comment">// 向工具栏中添加动作，可以通过 ui-&gt;mainToolBar 获取工具栏</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 菜单栏 */</span></span><br><span class="line">    QActionGroup *group = <span class="keyword">new</span> <span class="built_in">QActionGroup</span>(<span class="keyword">this</span>);           <span class="comment">// QActionGroup 动作组，用于包含一组 QAction 动作</span></span><br><span class="line">    QAction *action_L = group-&gt;<span class="built_in">addAction</span>(<span class="built_in">tr</span>(<span class="string">&quot;左对齐(&amp;L)&quot;</span>));  <span class="comment">// QAction 动作，可以放置在菜单栏和工具栏，包含图标、显示文本、快捷键、checkable 等，可以通过其构造函数指定</span></span><br><span class="line">    action_L-&gt;<span class="built_in">setCheckable</span>(<span class="literal">true</span>);                           <span class="comment">// 设置 QAction 动作的 checkable 属性为 true，选中后会打 √</span></span><br><span class="line">    QAction *action_R = group-&gt;<span class="built_in">addAction</span>(<span class="built_in">tr</span>(<span class="string">&quot;右对齐(&amp;R)&quot;</span>));</span><br><span class="line">    action_R-&gt;<span class="built_in">setCheckable</span>(<span class="literal">true</span>);</span><br><span class="line">    QAction *action_C = group-&gt;<span class="built_in">addAction</span>(<span class="built_in">tr</span>(<span class="string">&quot;居中(&amp;C)&quot;</span>));</span><br><span class="line">    action_C-&gt;<span class="built_in">setCheckable</span>(<span class="literal">true</span>);</span><br><span class="line">    action_L-&gt;<span class="built_in">setChecked</span>(<span class="literal">true</span>);     <span class="comment">// 指定左对齐 action_L 处于选中状态</span></span><br><span class="line">    editMenu-&gt;<span class="built_in">addSeparator</span>();       <span class="comment">// 添加间隔器，用于菜单分组</span></span><br><span class="line">    <span class="comment">/* 向 QMenu 菜单添加 QAction 动作 */</span></span><br><span class="line">    editMenu-&gt;<span class="built_in">addAction</span>(action_L);</span><br><span class="line">    editMenu-&gt;<span class="built_in">addAction</span>(action_R);</span><br><span class="line">    editMenu-&gt;<span class="built_in">addAction</span>(action_C);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 工具栏 */</span></span><br><span class="line">    QToolButton *toolBtn = <span class="keyword">new</span> <span class="built_in">QToolButton</span>(<span class="keyword">this</span>);        <span class="comment">// 创建 QToolButton</span></span><br><span class="line">    toolBtn-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;颜色&quot;</span>));</span><br><span class="line">    QMenu *colorMenu = <span class="keyword">new</span> <span class="built_in">QMenu</span>(<span class="keyword">this</span>);</span><br><span class="line">    colorMenu-&gt;<span class="built_in">addAction</span>(<span class="built_in">tr</span>(<span class="string">&quot;红色&quot;</span>));</span><br><span class="line">    colorMenu-&gt;<span class="built_in">addAction</span>(<span class="built_in">tr</span>(<span class="string">&quot;绿色&quot;</span>));</span><br><span class="line">    toolBtn-&gt;<span class="built_in">setMenu</span>(colorMenu);                         <span class="comment">// 为 QToolButton 创建弹出菜单</span></span><br><span class="line">    toolBtn-&gt;<span class="built_in">setPopupMode</span>(QToolButton::MenuButtonPopup); <span class="comment">// 设置菜单弹出模式为按下向下小箭头弹出</span></span><br><span class="line">    ui-&gt;mainToolBar-&gt;<span class="built_in">addWidget</span>(toolBtn);                 <span class="comment">// 向工具栏添加 QToolButton 小部件</span></span><br><span class="line">    <span class="comment">/* 创建并添加 QSpinBox 到工具栏 */</span></span><br><span class="line">    QSpinBox *spinBox = <span class="keyword">new</span> <span class="built_in">QSpinBox</span>(<span class="keyword">this</span>);</span><br><span class="line">    ui-&gt;mainToolBar-&gt;<span class="built_in">addWidget</span>(spinBox);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 状态栏 */</span></span><br><span class="line">    ui-&gt;statusBar-&gt;<span class="built_in">showMessage</span>(<span class="built_in">tr</span>(<span class="string">&quot;欢迎使用多文档编辑器&quot;</span>), <span class="number">2000</span>);   <span class="comment">// 显示 2000 毫秒临时消息</span></span><br><span class="line">    QLabel *permanent = <span class="keyword">new</span> <span class="built_in">QLabel</span>(<span class="keyword">this</span>);                         <span class="comment">// 创建 QLabel 标签</span></span><br><span class="line">    permanent-&gt;<span class="built_in">setFrameStyle</span>(QFrame::Box | QFrame::Sunken);       <span class="comment">// 设置标签样式</span></span><br><span class="line">    permanent-&gt;<span class="built_in">setText</span>(<span class="string">&quot;https://uinika.github.io/&quot;</span>);              <span class="comment">// 设置标签文本</span></span><br><span class="line">    ui-&gt;statusBar-&gt;<span class="built_in">addPermanentWidget</span>(permanent);                 <span class="comment">// 显示永久信息，由于显示在状态栏最右端，所以不会被临时消息遮盖</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 中心区域 */</span></span><br><span class="line"><span class="comment">/* 每次点击【新建文件】按钮即可创建 1 个文本编辑器子窗口 */</span></span><br><span class="line"><span class="comment">/* 首先，在设计模式下放入 MDI Area 小部件；然后，在 Action Editor 鼠标右键选择转到槽，在弹出对话框选中 triggered() 信号对应的槽函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_action_New_triggered</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QTextEdit *edit = <span class="keyword">new</span> <span class="built_in">QTextEdit</span>(<span class="keyword">this</span>);  <span class="comment">// 实例化 1 个文本编辑器</span></span><br><span class="line">    <span class="comment">/* 使用 QMdiArea 类的 addSubWindow() 函数创建子窗口 */</span></span><br><span class="line">    QMdiSubWindow *child = ui-&gt;mdiArea-&gt;<span class="built_in">addSubWindow</span>(edit);</span><br><span class="line">    child-&gt;<span class="built_in">setWindowTitle</span>(<span class="built_in">tr</span>(<span class="string">&quot;多文档编辑器子窗口&quot;</span>));</span><br><span class="line">    child-&gt;<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Dock 部件 */</span></span><br><span class="line"><span class="comment">/* 首先，在设计模式下放入 Dock Widget 小部件，然后在其内部放置 1 个 Push Button 和 1 个 Font Combo Box */</span></span><br><span class="line"><span class="comment">/* 然后，向菜单栏添加【显示 Dock】菜单项，并在 Action Editor 鼠标右键选择转到槽，在弹出对话框选中 triggered() 信号对应的槽函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_action_Dock_triggered</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ui-&gt;dockWidget-&gt;<span class="built_in">show</span>();   <span class="comment">// 如果关闭了 Dock 部件，点击【显示 Dock】菜单项，即可重新显示 Dock</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.ui-1">mainwindow.ui</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;ui version=<span class="string">&quot;4.0&quot;</span>&gt;</span><br><span class="line"> &lt;<span class="keyword">class</span>&gt;MainWindow&lt;/<span class="keyword">class</span>&gt;</span><br><span class="line"> &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QMainWindow&quot;</span> name=<span class="string">&quot;MainWindow&quot;</span>&gt;</span><br><span class="line">  &lt;property name=<span class="string">&quot;geometry&quot;</span>&gt;</span><br><span class="line">   &lt;rect&gt;</span><br><span class="line">    &lt;x&gt;<span class="number">0</span>&lt;/x&gt;</span><br><span class="line">    &lt;y&gt;<span class="number">0</span>&lt;/y&gt;</span><br><span class="line">    &lt;width&gt;<span class="number">400</span>&lt;/width&gt;</span><br><span class="line">    &lt;height&gt;<span class="number">300</span>&lt;/height&gt;</span><br><span class="line">   &lt;/rect&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;property name=<span class="string">&quot;windowTitle&quot;</span>&gt;</span><br><span class="line">   &lt;string&gt;MainWindow&lt;/string&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QWidget&quot;</span> name=<span class="string">&quot;centralWidget&quot;</span>&gt;</span><br><span class="line">   &lt;layout <span class="keyword">class</span>=<span class="string">&quot;QGridLayout&quot;</span> name=<span class="string">&quot;gridLayout&quot;</span>&gt;</span><br><span class="line">    &lt;item row=<span class="string">&quot;0&quot;</span> column=<span class="string">&quot;0&quot;</span>&gt;</span><br><span class="line">     &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QMdiArea&quot;</span> name=<span class="string">&quot;mdiArea&quot;</span>/&gt;</span><br><span class="line">    &lt;/item&gt;</span><br><span class="line">   &lt;/layout&gt;</span><br><span class="line">  &lt;/widget&gt;</span><br><span class="line">  &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QMenuBar&quot;</span> name=<span class="string">&quot;menuBar&quot;</span>&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;geometry&quot;</span>&gt;</span><br><span class="line">    &lt;rect&gt;</span><br><span class="line">     &lt;x&gt;<span class="number">0</span>&lt;/x&gt;</span><br><span class="line">     &lt;y&gt;<span class="number">0</span>&lt;/y&gt;</span><br><span class="line">     &lt;width&gt;<span class="number">400</span>&lt;/width&gt;</span><br><span class="line">     &lt;height&gt;<span class="number">22</span>&lt;/height&gt;</span><br><span class="line">    &lt;/rect&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QMenu&quot;</span> name=<span class="string">&quot;menu_F&quot;</span>&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;title&quot;</span>&gt;</span><br><span class="line">     &lt;string&gt;文件(&amp;amp;F)&lt;/string&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">    &lt;addaction name=<span class="string">&quot;action_New&quot;</span>/&gt;</span><br><span class="line">   &lt;/widget&gt;</span><br><span class="line">   &lt;addaction name=<span class="string">&quot;menu_F&quot;</span>/&gt;</span><br><span class="line">  &lt;/widget&gt;</span><br><span class="line">  &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QToolBar&quot;</span> name=<span class="string">&quot;mainToolBar&quot;</span>&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;toolButtonStyle&quot;</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">enum</span>&gt;Qt::ToolButtonIconOnly&lt;/<span class="keyword">enum</span>&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;attribute name=<span class="string">&quot;toolBarArea&quot;</span>&gt;</span><br><span class="line">    &lt;<span class="keyword">enum</span>&gt;TopToolBarArea&lt;/<span class="keyword">enum</span>&gt;</span><br><span class="line">   &lt;/attribute&gt;</span><br><span class="line">   &lt;attribute name=<span class="string">&quot;toolBarBreak&quot;</span>&gt;</span><br><span class="line">    &lt;<span class="type">bool</span>&gt;<span class="literal">false</span>&lt;/<span class="type">bool</span>&gt;</span><br><span class="line">   &lt;/attribute&gt;</span><br><span class="line">  &lt;/widget&gt;</span><br><span class="line">  &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QStatusBar&quot;</span> name=<span class="string">&quot;statusBar&quot;</span>/&gt;</span><br><span class="line">  &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QDockWidget&quot;</span> name=<span class="string">&quot;dockWidget&quot;</span>&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;windowTitle&quot;</span>&gt;</span><br><span class="line">    &lt;string&gt;工具箱&lt;/string&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;attribute name=<span class="string">&quot;dockWidgetArea&quot;</span>&gt;</span><br><span class="line">    &lt;number&gt;<span class="number">1</span>&lt;/number&gt;</span><br><span class="line">   &lt;/attribute&gt;</span><br><span class="line">   &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QWidget&quot;</span> name=<span class="string">&quot;dockWidgetContents&quot;</span>&gt;</span><br><span class="line">    &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QPushButton&quot;</span> name=<span class="string">&quot;pushButton&quot;</span>&gt;</span><br><span class="line">     &lt;property name=<span class="string">&quot;geometry&quot;</span>&gt;</span><br><span class="line">      &lt;rect&gt;</span><br><span class="line">       &lt;x&gt;<span class="number">0</span>&lt;/x&gt;</span><br><span class="line">       &lt;y&gt;<span class="number">20</span>&lt;/y&gt;</span><br><span class="line">       &lt;width&gt;<span class="number">75</span>&lt;/width&gt;</span><br><span class="line">       &lt;height&gt;<span class="number">23</span>&lt;/height&gt;</span><br><span class="line">      &lt;/rect&gt;</span><br><span class="line">     &lt;/property&gt;</span><br><span class="line">     &lt;property name=<span class="string">&quot;text&quot;</span>&gt;</span><br><span class="line">      &lt;string&gt;PushButton&lt;/string&gt;</span><br><span class="line">     &lt;/property&gt;</span><br><span class="line">    &lt;/widget&gt;</span><br><span class="line">    &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QFontComboBox&quot;</span> name=<span class="string">&quot;fontComboBox&quot;</span>&gt;</span><br><span class="line">     &lt;property name=<span class="string">&quot;geometry&quot;</span>&gt;</span><br><span class="line">      &lt;rect&gt;</span><br><span class="line">       &lt;x&gt;<span class="number">0</span>&lt;/x&gt;</span><br><span class="line">       &lt;y&gt;<span class="number">100</span>&lt;/y&gt;</span><br><span class="line">       &lt;width&gt;<span class="number">81</span>&lt;/width&gt;</span><br><span class="line">       &lt;height&gt;<span class="number">22</span>&lt;/height&gt;</span><br><span class="line">      &lt;/rect&gt;</span><br><span class="line">     &lt;/property&gt;</span><br><span class="line">    &lt;/widget&gt;</span><br><span class="line">   &lt;/widget&gt;</span><br><span class="line">  &lt;/widget&gt;</span><br><span class="line">  &lt;action name=<span class="string">&quot;action_New&quot;</span>&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;icon&quot;</span>&gt;</span><br><span class="line">    &lt;iconset resource=<span class="string">&quot;myimages.qrc&quot;</span>&gt;</span><br><span class="line">     &lt;normaloff&gt;:/image/images/<span class="keyword">new</span>.png&lt;/normaloff&gt;:/image/images/<span class="keyword">new</span>.png&lt;/iconset&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;text&quot;</span>&gt;</span><br><span class="line">    &lt;string&gt;新建文件(&amp;amp;N)&lt;/string&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;toolTip&quot;</span>&gt;</span><br><span class="line">    &lt;string&gt;新建文件&lt;/string&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;shortcut&quot;</span>&gt;</span><br><span class="line">    &lt;string&gt;Ctrl+N&lt;/string&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">  &lt;/action&gt;</span><br><span class="line"> &lt;/widget&gt;</span><br><span class="line"> &lt;layoutdefault spacing=<span class="string">&quot;6&quot;</span> margin=<span class="string">&quot;11&quot;</span>/&gt;</span><br><span class="line"> &lt;resources&gt;</span><br><span class="line">  &lt;include location=<span class="string">&quot;myimages.qrc&quot;</span>/&gt;</span><br><span class="line"> &lt;/resources&gt;</span><br><span class="line"> &lt;connections/&gt;</span><br><span class="line">&lt;/ui&gt;</span><br></pre></td></tr></table></figure>
<h3 id="示例自定义菜单">示例：自定义菜单</h3>
<p>实现自定义菜单需要通过继承<code>QWidgetAction</code>类，并且重写其<code>createWidget()</code>函数。本示例实现的菜单项包含有
1 个标签和 1
个行编辑框，行编辑框中输入的字符串，按下回车键即可自动输出至作为中心小部件的文本编辑器。首先，Qt
Creator
新建一个<code>myaction</code>工程，基类默认为<code>QMainWindow</code>，类名依然设置为<code>MainWindow</code>；然后，向工程添加
<strong>C++ Class</strong>
文件，类名设置为<code>MyAction</code>，基类指定为<code>QWidgetAction</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Main/6.png"></p>
<p>当在本示例的行编辑框中输入文本以后，按下回车键，行编辑框就会发射<code>returnPressed()</code>信号，此时就会调用了相应的<code>sendText()</code>槽函数，而<code>sendText()</code>槽函数当中又发射了<code>getText()</code>信号，该信号当中包含了行编辑框里的文本内容，接着又会调用<code>setText()</code>槽函数，由其将<code>getText()</code>信号发送来的文本输入至文本编辑器里，从而实现按下回车键即可将行编辑框中的文本，发送至作为中心部件的文本编辑器。</p>
<p><img src="/C&C++/Qt-Widgets/Main/7.gif"></p>
<p>如果所有小部件都放置在同一个类当中，则可以直接关联行编辑框的<code>returnPressed()</code>信号到槽函数进行操作。由于现实情况是需要在<code>MyAction</code>和<code>MainWindow</code>两个类之间进行数据传输，所以使用了自定义的信号与槽。</p>
<h4 id="myaction.pro">myaction.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = myaction</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        mainwindow.cpp \</span><br><span class="line">    myaction.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mainwindow.h \</span><br><span class="line">    myaction.h</span><br><span class="line"></span><br><span class="line">FORMS    += mainwindow.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-9">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="myaction.h">myaction.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYACTION_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYACTION_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidgetAction&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QLineEdit</span>;   <span class="comment">// 声明 QLineEdit</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyAction</span> : <span class="keyword">public</span> QWidgetAction &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyAction</span><span class="params">(QObject *parent = <span class="number">0</span>)</span></span>;   <span class="comment">// 声明自定义的 MyAction 类</span></span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function">QWidget* <span class="title">createWidget</span><span class="params">(QWidget *parent)</span></span>;   <span class="comment">// 声明 createWidget() 函数，该函数是 QWidgetAction 类里的虚函数</span></span><br><span class="line">    signals:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">getText</span><span class="params">(<span class="type">const</span> QString &amp;string)</span></span>;      <span class="comment">// 新建信号，用于按下回车键时，将行编辑器 QLineEdit 中的内容发射出去</span></span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">sendText</span><span class="params">()</span></span>;                          <span class="comment">// 新建槽，关联至行编辑器 QLineEdit 的回车键按下信号</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        QLineEdit *lineEdit;                      <span class="comment">// 定义行编辑器类 QLineEdit 的指针</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYACTION_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="myaction.cpp">myaction.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myaction.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLineEdit&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QSplitter&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLabel&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyAction::<span class="built_in">MyAction</span>(QObject *parent) : <span class="built_in">QWidgetAction</span>(parent) &#123;</span><br><span class="line">    lineEdit = <span class="keyword">new</span> QLineEdit;                                                  <span class="comment">// 实例化 QLineEdit 行编辑器</span></span><br><span class="line">    <span class="built_in">connect</span>(lineEdit, &amp;QLineEdit::returnPressed, <span class="keyword">this</span>, &amp;MyAction::sendText);   <span class="comment">// 将行编辑器 QLineEdit 的回车键按下信号 returnPressed 与发送文本的 sendText 槽关联</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用 MyAction 对象，并将其添加至 1 个小部件上时，就会自动调用该函数 */</span></span><br><span class="line"><span class="function">QWidget * <span class="title">MyAction::createWidget</span><span class="params">(QWidget *parent)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 使用 inherits() 函数判断父部件是否为菜单或工具栏 */</span></span><br><span class="line">    <span class="keyword">if</span>(parent-&gt;<span class="built_in">inherits</span>(<span class="string">&quot;QMenu&quot;</span>) || parent-&gt;<span class="built_in">inherits</span>(<span class="string">&quot;QToolBar&quot;</span>))&#123;</span><br><span class="line">        <span class="comment">/* 如果是，则以该小部件为父窗口创建分裂器，并添加 1 个标签和 1 个行编辑框，最后返回该分裂器 */</span></span><br><span class="line">        QSplitter *splitter = <span class="keyword">new</span> <span class="built_in">QSplitter</span>(parent);</span><br><span class="line">        QLabel *label = <span class="keyword">new</span> QLabel;</span><br><span class="line">        label-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;插入文本：&quot;</span>));</span><br><span class="line">        splitter-&gt;<span class="built_in">addWidget</span>(label);</span><br><span class="line">        splitter-&gt;<span class="built_in">addWidget</span>(lineEdit);</span><br><span class="line">        <span class="keyword">return</span> splitter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 如果不是，则返回 0 */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 向行编辑框输入文本并按下回车键时，就会触发 returnPressed() 信号，此时就会自动调用 sendText() 槽 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyAction::sendText</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">emit <span class="title">getText</span><span class="params">(lineEdit-&gt;text())</span></span>;   <span class="comment">// 发射信号，即将行编辑框中的内容发射出去</span></span><br><span class="line">    lineEdit-&gt;<span class="built_in">clear</span>();                <span class="comment">// 清空行编辑框的内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.h-2">mainwindow.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MainWindow</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MainWindow</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MainWindow *ui;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">setText</span><span class="params">(<span class="type">const</span> QString &amp;string)</span></span>;   <span class="comment">// 槽函数 setText() 用于向文本编辑器添加文本</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.cpp-2">mainwindow.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myaction.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) : <span class="built_in">QMainWindow</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    MyAction *action = <span class="keyword">new</span> MyAction;                                           <span class="comment">// 实例化自定义的 MyAction 类</span></span><br><span class="line">    QMenu *editMenu = ui-&gt;menuBar-&gt;<span class="built_in">addMenu</span>(<span class="built_in">tr</span>(<span class="string">&quot;编辑(&amp;E)&quot;</span>));                    <span class="comment">// 添加【编辑(E)】菜单</span></span><br><span class="line">    editMenu-&gt;<span class="built_in">addAction</span>(action);                                               <span class="comment">// 将 MyAction 类的实例 action 添加到【编辑(E)】菜单</span></span><br><span class="line">    <span class="built_in">connect</span>(action, <span class="built_in">SIGNAL</span>(<span class="built_in">getText</span>(QString)), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">setText</span>(QString)));   <span class="comment">// 将 action 的 getText() 信号与 setText() 槽函数进行关联</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 将文本添加至 QTextEdit 编辑器当中 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::setText</span><span class="params">(<span class="type">const</span> QString &amp;string)</span> </span>&#123;</span><br><span class="line">    ui-&gt;textEdit-&gt;<span class="built_in">setText</span>(string);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.ui-2">mainwindow.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMainWindow&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MainWindow&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;centralWidget&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">layout</span> <span class="attr">class</span>=<span class="string">&quot;QGridLayout&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gridLayout&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">row</span>=<span class="string">&quot;0&quot;</span> <span class="attr">column</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QTextEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;textEdit&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">layout</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMenuBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;menuBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QToolBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mainToolBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;toolBarArea&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>TopToolBarArea<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;toolBarBreak&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QStatusBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;statusBar&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="事件系统">事件系统</h2>
<p>Qt
中的事件都继承自<code>QEvent</code>类，事件与信号并不相同，例如鼠标点击按钮，就会产生鼠标事件<code>QMouseEvent</code>（并非按钮产生），被按下的按钮则会发射<code>clicked()</code>信号（由按钮产生）。通常情况下，只需要关心按钮的单击信号，而不需要考虑鼠标事件。但是如果需要在鼠标单击按钮时产生其它效果，则需要关心鼠标事件。由此可见，<strong>事件</strong>与<strong>信号</strong>属于两个不同层面的概念，其发出者和作用者都各不相同，任意<code>QObject</code>的子类实例都可以接收和处理事件。</p>
<p>一个事件可以包含多种事件类型，例如上面提到的鼠标事件<code>QMouseEvent</code>可以进一步分为鼠标按下、双击、移动等操作，这些事件类型都由<code>QEvent</code>类提供的枚举类型<code>QEvent::Type</code>进行表示，其中包含有上百种事件类型。虽然<code>QEvent</code>的子类可以用于定义事件，但是却不能处理事件，事件的处理需要借助于<code>QCoreApplication</code>类<code>notify()</code>函数提供的
5 种事件处理方法：</p>
<ol type="1">
<li>重新实现小部件的<code>paintEvent()</code>、<code>mousePressEvent()</code>等事件处理函数；</li>
<li>重新实现<code>notify()</code>函数，该函数功能强大，可以先于事件过滤器获取事件，从而提供了对事件的完全控制，但是其每次只能处理
1 个事件；</li>
<li>在<code>QCoreApplication::instance()</code>对象上安装事件过滤器，这样事件过滤器就能够处理小部件的所有事件，其功能与重写<code>notify()</code>同样强大；应用程序可拥有多个全局事件过滤器，因而可以同时处理多个事件；</li>
<li>重新实现<code>QObject::event()</code>函数，该函数可以在事件到达默认事件处理函数之前获得该事件；</li>
<li>在对象上安装事件过滤器，此时事件过滤器可以在 1
个界面类当中，同时处理不同子部件的不同事件；</li>
</ol>
<p>由于第 2 种方法需要继承<code>QApplication</code>类，第 3
种方法需要使用全局事件过滤器，从而减缓事件的传递，虽然这 2
种方法功能强大，但是极少被使用到。实际开发环境下，第 1
种方法最为常用，其次是第 5 种方法。</p>
<h3 id="事件的传递">事件的传递</h3>
<p>每个 Qt
应用程序的<code>main()</code>函数最后都会调用<code>QApplication</code>类的<code>exec()</code>方法，该函数会使
Qt 应用程序进入<strong>主事件循环</strong>（Main Event
Loop），从而允许应用程序在运行时接收各种事件。一旦事件发生，Qt
就会自动构建一个相应的<code>QEvent</code>子类对象来表示，然后将其传递给相应的<code>QObject</code>对象或者子对象，本小节将通过两个典型的示例来展示
Qt 事件的传递过程。</p>
<h4 id="示例嵌套小部件之间的事件传递">示例：嵌套小部件之间的事件传递</h4>
<p>Qt Creator
新建一个<code>myevent</code>工程，基类默认为<code>QWidget</code>，类名保持为<code>Widget</code>；然后，向工程添加类名为<code>MyLineEdit</code>的
C++ Class
文件，基类指定为<code>QLineEdit</code>。最后，将<code>MyLineEdit</code>添加至<code>Widget</code>里面，并且两者都同时实现了<strong>键盘按下事件</strong>处理函数。从上面示例的运行结果可以看到，事件首先传递给获得焦点的窗口小部件，但是如果其忽略该事件，那么该事件就会继续传递给其父部件。重新实现事件处理函数时，通常需要调用父类的相应事件处理函数来实现默认操作。</p>
<p><img src="/C&C++/Qt-Widgets/Event/1.gif"></p>
<h5 id="myevent.pro">myevent.pro</h5>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = myevent</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        widget.cpp \</span><br><span class="line">    mylineedit.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h \</span><br><span class="line">    mylineedit.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui</span><br></pre></td></tr></table></figure>
<h5 id="main.cpp-10">main.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="mylineedit.h">mylineedit.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYLINEEDIT_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYLINEEDIT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLineEdit&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyLineEdit</span> : <span class="keyword">public</span> QLineEdit &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyLineEdit</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">keyPressEvent</span><span class="params">(QKeyEvent *event)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYLINEEDIT_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="mylineedit.cpp">mylineedit.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mylineedit.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyLineEdit::<span class="built_in">MyLineEdit</span>(QWidget *parent) : <span class="built_in">QLineEdit</span>(parent)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* MyLineEdit 的键盘按下事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyLineEdit::keyPressEvent</span><span class="params">(QKeyEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;MyLineEdit键盘按下事件&quot;</span>);</span><br><span class="line">    QLineEdit::<span class="built_in">keyPressEvent</span>(event);          <span class="comment">// 调用 QLineEdit 类的默认事件处理函数</span></span><br><span class="line">    event-&gt;<span class="built_in">ignore</span>();                          <span class="comment">// 忽略事件，必须放置在代码最后</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.h">widget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyLineEdit</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">        MyLineEdit *lineEdit;</span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">keyPressEvent</span><span class="params">(QKeyEvent *event)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="widget.cpp">widget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mylineedit.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    lineEdit = <span class="keyword">new</span> <span class="built_in">MyLineEdit</span>(<span class="keyword">this</span>);</span><br><span class="line">    lineEdit-&gt;<span class="built_in">move</span>(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Widget 的键盘按下事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::keyPressEvent</span><span class="params">(QKeyEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;Widget键盘按下事件&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.ui">widget.ui</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="示例带有过滤器的嵌套小部件事件传递">示例：带有过滤器的嵌套小部件事件传递</h4>
<p>改进上面的例子，添加事件过滤器后观察事件的捕获顺序。首先，事件经过事件过滤器；然后到达<strong>焦点小部件</strong>的<code>event()</code>函数，最后进入<strong>焦点小部件</strong>的事件处理函数；如果<strong>焦点小部件</strong>忽略了该事件，那么就会执行其<strong>父部件</strong>的事件处理函数。</p>
<p><img src="/C&C++/Qt-Widgets/Event/2.png"></p>
<p>值得注意的是，这里的<code>event()</code>函数、事件处理函数都是在<strong>焦点小部件</strong>内部重新定义的，而事件过滤器却是定义在焦点小部件的<strong>父部件</strong>里面。</p>
<p><img src="/C&C++/Qt-Widgets/Event/3.png"></p>
<h5 id="mylineedit.h-1">mylineedit.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYLINEEDIT_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYLINEEDIT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QLineEdit&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyLineEdit</span> : <span class="keyword">public</span> QLineEdit &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyLineEdit</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">event</span><span class="params">(QEvent *event)</span></span>;</span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">keyPressEvent</span><span class="params">(QKeyEvent *event)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYLINEEDIT_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="mylineedit.cpp-1">mylineedit.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mylineedit.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyLineEdit::<span class="built_in">MyLineEdit</span>(QWidget *parent) : <span class="built_in">QLineEdit</span>(parent)&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* MyLineEdit 的键盘按下事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyLineEdit::keyPressEvent</span><span class="params">(QKeyEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;MyLineEdit键盘按下事件&quot;</span>);</span><br><span class="line">    QLineEdit::<span class="built_in">keyPressEvent</span>(event);          <span class="comment">// 执行QLineEdit类的默认事件处理</span></span><br><span class="line">    event-&gt;<span class="built_in">ignore</span>();                          <span class="comment">// 忽略该事件</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 事件 */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">MyLineEdit::event</span><span class="params">(QEvent *event)</span>  </span>&#123;</span><br><span class="line">    <span class="comment">/* 通过 QEvent 的 type() 函数获取事件类型 */</span></span><br><span class="line">    <span class="keyword">if</span>(event-&gt;<span class="built_in">type</span>() == QEvent::KeyPress) &#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;MyLineEdit的event()函数&quot;</span>);   <span class="comment">// 如果是键盘按下事件 QEvent::KeyPress 则输出信息</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> QLineEdit::<span class="built_in">event</span>(event);   <span class="comment">// 返回布尔类型，即 QLineEdit 父类 event() 函数的执行结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.h-1">widget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyLineEdit</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">eventFilter</span><span class="params">(QObject *obj, QEvent *event)</span></span>;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">        MyLineEdit *lineEdit;</span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">keyPressEvent</span><span class="params">(QKeyEvent *event)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="widget.cpp-1">widget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mylineedit.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    lineEdit = <span class="keyword">new</span> <span class="built_in">MyLineEdit</span>(<span class="keyword">this</span>);</span><br><span class="line">    lineEdit-&gt;<span class="built_in">move</span>(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    lineEdit-&gt;<span class="built_in">installEventFilter</span>(<span class="keyword">this</span>);   <span class="comment">// 在 Widget 类上为 lineEdit 安装事件过滤器</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Widget 的键盘按下事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::keyPressEvent</span><span class="params">(QKeyEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;Widget键盘按下事件&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Widget 事件过滤器 */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Widget::eventFilter</span><span class="params">(QObject *obj, QEvent *event)</span>  </span>&#123;</span><br><span class="line">    <span class="comment">/* 判断事件的对象是否为 lineEdit */</span></span><br><span class="line">    <span class="keyword">if</span>(obj == lineEdit)&#123;</span><br><span class="line">        <span class="comment">/* 判断事件类型 */</span></span><br><span class="line">        <span class="keyword">if</span>(event-&gt;<span class="built_in">type</span>() == QEvent::KeyPress) &#123;</span><br><span class="line">            <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">tr</span>(<span class="string">&quot;Widget的事件过滤器&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> QWidget::<span class="built_in">eventFilter</span>(obj, event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="鼠标与滚轮事件">鼠标与滚轮事件</h3>
<p><code>QMouseEvent</code>类用于表示鼠标事件，窗口小部件当中按下鼠标键或者移动鼠标指针时，都会产生鼠标事件。通过<code>QMouseEvent</code>类可以知道哪个鼠标键被按下，当前鼠标指针的位置等。日常开发工作当中，通常会重新定义小部件的鼠标事件处理函数来实现一些自定义操作。
另一个与鼠标操作相关的<code>QWheelEvent</code>类，则用于表示鼠标滚轮事件，可以获取鼠标滚轮的移动方向和距离。下面的示例，在主界面上<strong>按住鼠标左键</strong>可以拖动窗口，<strong>双击鼠标左键</strong>则可以使其全屏，<strong>按住鼠标右键</strong>则会使指针变为自定义图片，使用<strong>鼠标滚轮</strong>还可以放大或缩小编辑框内文本内容的尺寸。</p>
<p><img src="/C&C++/Qt-Widgets/Event/4.gif"></p>
<p>Qt Creator
新建一个<code>mymouseevent</code>工程，基类默认为<code>QWidget</code>，类名保持为<code>Widget</code>不变，然后进入设计模式向界面拖入一个【Text
Edit】小部件。</p>
<blockquote>
<p><strong>注意</strong>：默认情况下，按下鼠标键时移动鼠标，Qt
才会产生鼠标移动事件；如果希望不按鼠标键，也可以获取鼠标移动事件，则需要在小部件构造函数内添加如下代码，开启窗口小部件的鼠标跟踪功能：</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setMouseTracking</span>(<span class="literal">true</span>);   <span class="comment">// 开启窗口小部件的鼠标跟踪功能</span></span><br></pre></td></tr></table></figure>
<h4 id="mymouseevent.pro">mymouseevent.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mymouseevent</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">           widget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-11">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="widget.h-2">widget.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">        QPoint offset;   <span class="comment">// 保存鼠标指针与窗口位置的差值</span></span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">mousePressEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">mouseReleaseEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">mouseDoubleClickEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">mouseMoveEvent</span><span class="params">(QMouseEvent *event)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">wheelEvent</span><span class="params">(QWheelEvent *event)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="widget.cpp-2">widget.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMouseEvent&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    QCursor cursor;                        <span class="comment">// 创建 QCursor 光标对象</span></span><br><span class="line">    cursor.<span class="built_in">setShape</span>(Qt::OpenHandCursor);   <span class="comment">// 光标进入 Widget 部件后变为伸开的手掌</span></span><br><span class="line">    <span class="built_in">setCursor</span>(cursor);                     <span class="comment">// 设置光标至当前 Widget 部件</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标键按下事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::mousePressEvent</span><span class="params">(QMouseEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 如果鼠标左键被按下 */</span></span><br><span class="line">    <span class="keyword">if</span>(event-&gt;<span class="built_in">button</span>() == Qt::LeftButton)&#123;</span><br><span class="line">        QCursor cursor;</span><br><span class="line">        cursor.<span class="built_in">setShape</span>(Qt::ClosedHandCursor);</span><br><span class="line">        QApplication::<span class="built_in">setOverrideCursor</span>(cursor);   <span class="comment">// 鼠标指针形状变为收起的手掌</span></span><br><span class="line">        offset = event-&gt;<span class="built_in">globalPos</span>() - <span class="built_in">pos</span>();       <span class="comment">// 获取指针与窗口位置的差值，globalPos() 可以获取指针在桌面上的位置</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 如果鼠标右键被按下 */</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(event-&gt;<span class="built_in">button</span>() == Qt::RightButton)&#123;</span><br><span class="line">        QCursor <span class="built_in">cursor</span>(<span class="built_in">QPixmap</span>(<span class="string">&quot;../mymouseevent/logo.png&quot;</span>));   <span class="comment">// 设置自定义图片作为鼠标指针</span></span><br><span class="line">        QApplication::<span class="built_in">setOverrideCursor</span>(cursor);               <span class="comment">// 执行鼠标指针设置，需要与后面的 restoreOverrideCursor() 配合使用</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标移动事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::mouseMoveEvent</span><span class="params">(QMouseEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 判断鼠标左键是否按下 */</span></span><br><span class="line">    <span class="keyword">if</span>(event-&gt;<span class="built_in">buttons</span>() &amp; Qt::LeftButton)&#123;</span><br><span class="line">        QPoint temp;</span><br><span class="line">        temp = event-&gt;<span class="built_in">globalPos</span>() - offset;   <span class="comment">// 指针当前的位置减去指针与窗口位置的差值，可以得到了窗口需要移动的位置</span></span><br><span class="line">        <span class="built_in">move</span>(temp);                           <span class="comment">// 移动窗口到指定位置</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标释放事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::mouseReleaseEvent</span><span class="params">(QMouseEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">Q_UNUSED</span>(event);                         <span class="comment">// 避免代码编译时出现参数未使用的警告信息</span></span><br><span class="line">    QApplication::<span class="built_in">restoreOverrideCursor</span>();   <span class="comment">// 恢复鼠标指针形状，需要与前面的 setOverrideCursor(cursor) 配合使用</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 鼠标双击事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::mouseDoubleClickEvent</span><span class="params">(QMouseEvent *event)</span>  </span>&#123;</span><br><span class="line">    <span class="comment">/* 如果鼠标左键是否按下 */</span></span><br><span class="line">    <span class="keyword">if</span>(event-&gt;<span class="built_in">button</span>() == Qt::LeftButton)&#123;</span><br><span class="line">        <span class="comment">/* 如果处于全屏状态 */</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">windowState</span>() != Qt::WindowFullScreen) &#123;</span><br><span class="line">            <span class="built_in">setWindowState</span>(Qt::WindowFullScreen);   <span class="comment">// 设置窗口为全屏</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 如果没有全屏 */</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">setWindowState</span>(Qt::WindowNoState);     <span class="comment">// 恢复窗口为默认大小</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚轮事件处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::wheelEvent</span><span class="params">(QWheelEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 如果鼠标滚轮向前进行旋转，使用 QWheelEvent 类的 delta() 函数可以获取滚轮的滑动距离 */</span></span><br><span class="line">    <span class="keyword">if</span>(event-&gt;<span class="built_in">delta</span>() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        ui-&gt;textEdit-&gt;<span class="built_in">zoomIn</span>();    <span class="comment">// 放大文本</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 如果鼠标滚轮向后进行旋转 */</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        ui-&gt;textEdit-&gt;<span class="built_in">zoomOut</span>();   <span class="comment">// 缩小文本</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="widget.ui-1">widget.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QTextEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;textEdit&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>30<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>201<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>131<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="键盘事件">键盘事件</h3>
<p><code>QKeyEvent</code>类用于描述一个键盘事件，当键盘按键被按下或者释放时，处于键盘输入焦点的小部件就会产生键盘事件。<code>QKeyEvent</code>类的<code>key()</code>函数可以获取具体按键（键名存放在<a target="_blank" rel="noopener" href="http://doc.qt.io/qt-5/qt.html#Key-enum"><code>Qt::Key</code></a>枚举类型中），【Ctrl】和【Shift】之类的修饰键则需要用<code>QKeyEvent</code>类的<code>modifiers()</code>函数获取（键名存放在<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qt.html#KeyboardModifier-enum"><code>Qt::KeyboardModifier</code></a>枚举类型中）。打开
Qt Creator
新建<code>mykeyevent</code>工程，基类默认为<code>QWidget</code>，类名保持<code>Widget</code>不变。</p>
<h4 id="示例ctrlm-窗口最大化">示例：Ctrl+M 窗口最大化</h4>
<p>本示例不需要对<code>widget.ui</code>进行更改，保持默认界面即可。主要通过【Ctrl
+
M】快捷键最大化当前窗口。键盘按下事件处理函数中，首先会检测【Ctrl】键是否按下，如果是，则再检测【M】键是否按下。</p>
<h5 id="mykeyevent.pro">mykeyevent.pro</h5>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mykeyevent</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp \</span><br><span class="line">           widget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui</span><br></pre></td></tr></table></figure>
<h5 id="main.cpp-12">main.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.h-3">widget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">keyPressEvent</span><span class="params">(QKeyEvent *event)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">keyReleaseEvent</span><span class="params">(QKeyEvent *event)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="widget.cpp-3">widget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 键盘按下事件 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::keyPressEvent</span><span class="params">(QKeyEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 判断是否按下 Ctrl 键 */</span></span><br><span class="line">    <span class="keyword">if</span>(event-&gt;<span class="built_in">modifiers</span>() == Qt::ControlModifier)&#123;</span><br><span class="line">        <span class="comment">/* 判断是否按下 M 键 */</span></span><br><span class="line">        <span class="keyword">if</span>(event-&gt;<span class="built_in">key</span>() == Qt::Key_M)&#123;</span><br><span class="line">            <span class="built_in">setWindowState</span>(Qt::WindowMaximized);   <span class="comment">// 最大化当前窗口</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> QWidget::<span class="built_in">keyPressEvent</span>(event);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 按键释放事件 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::keyReleaseEvent</span><span class="params">(QKeyEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 其它处理操作 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="示例方向键组合移动按钮">示例：方向键组合移动按钮</h4>
<p>上面的例子通过同时按下【Ctrl】键和【M】键来实现一定操作，本小节将尝试同时按下两个不同的普通按键来移动一个按钮的位置。基于前一小节的代码，进入
Qt Creator 设计模式向界面放置 1 个【Horizontal
Line】小部件，分别设置其【X】、【Y】坐标属性为<code>50</code>、<code>100</code>；再拖入
1 个【Vertical
Line】小部件，将其【X】、【Y】坐标属性设置为<code>100</code>、<code>20</code>；最后，拖入
1 个【Push
Button】，设置其【X】、【Y】坐标属性为<code>120</code>、<code>120</code>，并修改其内容为<code>请按方向键</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Event/5.gif"></p>
<p>下面代码，首先在<strong>键盘按下事件处理函数</strong><code>keyPressEvent()</code>中对方向键【↑】和【←】是否按下进行标记，并且在发生自动重复时不进行任何处理。然后在<strong>按键释放事件处理函数</strong><code>keyReleaseEvent()</code>中，分别对【↑】和【←】按键的释放进行了处理。当按下方向键【←】时，<code>keyPressEvent()</code>中便会标记<code>keyLeft = true</code>，此时如果同时按下方向键【↑】，那么<code>keyUp = true</code>。松开方向键【↑】，<code>keyReleaseEvent()</code>会标记<code>keyUp = false</code>，由于此时<code>keyLeft = true</code>，所以按钮进行斜向移动，并且让移动标志<code>move = true</code>。此时再释放方向键【←】，<code>keyReleaseEvent()</code>会标记<code>keyLeft = false</code>，由于已经进行过斜向移动，所以<code>move = true</code>不再进行操作。</p>
<h5 id="widget.h-4">widget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">        <span class="type">bool</span> keyUp;     <span class="comment">// 方向键【↑】按下标志</span></span><br><span class="line">        <span class="type">bool</span> keyLeft;   <span class="comment">// 方向键【←】按下标志</span></span><br><span class="line">        <span class="type">bool</span> move;      <span class="comment">// 是否完成 1 次移动标志</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">keyPressEvent</span><span class="params">(QKeyEvent *event)</span></span>;</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">keyReleaseEvent</span><span class="params">(QKeyEvent *event)</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="widget.cpp-4">widget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="built_in">setFocus</span>();   <span class="comment">// 让 Widget 界面获得焦点</span></span><br><span class="line">    <span class="comment">/* 初始化头文件中定义的标志变量 */</span></span><br><span class="line">    keyUp = <span class="literal">false</span>;</span><br><span class="line">    keyLeft = <span class="literal">false</span>;</span><br><span class="line">    move = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 键盘按下事件 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::keyPressEvent</span><span class="params">(QKeyEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*  测试按下方向键【↑】是否一直按下 */</span></span><br><span class="line">    <span class="comment">//    if(event-&gt;key() == Qt::Key_Up)&#123;</span></span><br><span class="line">    <span class="comment">//        qDebug() &lt;&lt; &quot;press:&quot;&lt;&lt;event-&gt;isAutoRepeat();</span></span><br><span class="line">    <span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (event-&gt;<span class="built_in">key</span>() == Qt::Key_Up) &#123;</span><br><span class="line">        <span class="keyword">if</span>(event-&gt;<span class="built_in">isAutoRepeat</span>()) <span class="keyword">return</span>;    <span class="comment">// 长按按键时，如果重复则不做处理</span></span><br><span class="line">        keyUp = <span class="literal">true</span>;                        <span class="comment">// 标记方向键【↑】已经按下</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (event-&gt;<span class="built_in">key</span>() == Qt::Key_Left) &#123;</span><br><span class="line">        <span class="keyword">if</span> (event-&gt;<span class="built_in">isAutoRepeat</span>()) <span class="keyword">return</span>;</span><br><span class="line">        keyLeft = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 按键释放事件 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::keyReleaseEvent</span><span class="params">(QKeyEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*  测试按下方向键【↑】是否一直按下 */</span></span><br><span class="line">    <span class="comment">//    if(event-&gt;key() == Qt::Key_Up)&#123;</span></span><br><span class="line">    <span class="comment">//        qDebug() &lt;&lt; &quot;release:&quot;&lt;&lt; event-&gt;isAutoRepeat();</span></span><br><span class="line">    <span class="comment">//        qDebug() &lt;&lt; &quot;up&quot;;</span></span><br><span class="line">    <span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 如果按下【↑】按键 */</span></span><br><span class="line">    <span class="keyword">if</span> (event-&gt;<span class="built_in">key</span>() == Qt::Key_Up) &#123;</span><br><span class="line">        <span class="keyword">if</span> (event-&gt;<span class="built_in">isAutoRepeat</span>()) <span class="keyword">return</span>;</span><br><span class="line">        keyUp = <span class="literal">false</span>;                       <span class="comment">// 释放按键后将标志设置为false</span></span><br><span class="line">        <span class="comment">/* 如果已经完成 1 次移动 */</span></span><br><span class="line">        <span class="keyword">if</span> (move) &#123;</span><br><span class="line">            move = <span class="literal">false</span>;                    <span class="comment">// 将移动标志设置为 false</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 如果按下方向键【←】且没有释放 */</span></span><br><span class="line">        <span class="keyword">if</span> (keyLeft) &#123;</span><br><span class="line">            ui-&gt;pushButton-&gt;<span class="built_in">move</span>(<span class="number">30</span>, <span class="number">80</span>);    <span class="comment">// 让按钮斜向移动</span></span><br><span class="line">            move = <span class="literal">true</span>;                     <span class="comment">// 将移动标志设置为 true</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 否则直接向上移动 */</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            ui-&gt;pushButton-&gt;<span class="built_in">move</span>(<span class="number">120</span>, <span class="number">80</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 如果按下【←】按键 */</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (event-&gt;<span class="built_in">key</span>() == Qt::Key_Left) &#123;</span><br><span class="line">        <span class="keyword">if</span> (event-&gt;<span class="built_in">isAutoRepeat</span>()) <span class="keyword">return</span>;</span><br><span class="line">        keyLeft = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">/* 如果已经完成 1 次移动 */</span></span><br><span class="line">        <span class="keyword">if</span> (move) &#123;</span><br><span class="line">            move = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 如果按下方向键【↑】且没有释放 */</span></span><br><span class="line">        <span class="keyword">if</span> (keyUp) &#123;</span><br><span class="line">            ui-&gt;pushButton-&gt;<span class="built_in">move</span>(<span class="number">30</span>, <span class="number">80</span>);    <span class="comment">// 让按钮斜向移动</span></span><br><span class="line">            move = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 否则直接向上移动 */</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            ui-&gt;pushButton-&gt;<span class="built_in">move</span>(<span class="number">30</span>, <span class="number">120</span>);   <span class="comment">// 让按钮向左移动</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 如果按下【↓】按键 */</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (event-&gt;<span class="built_in">key</span>() == Qt::Key_Down) &#123;</span><br><span class="line">        ui-&gt;pushButton-&gt;<span class="built_in">move</span>(<span class="number">120</span>, <span class="number">120</span>);      <span class="comment">// 还原按钮初始位置</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.ui-2">widget.ui</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;Line&quot;</span> <span class="attr">name</span>=<span class="string">&quot;line&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>50<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>100<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>291<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Horizontal<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;Line&quot;</span> <span class="attr">name</span>=<span class="string">&quot;line_2&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>100<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>20<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>20<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>231<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Vertical<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>120<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>120<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>请按方向键<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="定时器事件">定时器事件</h3>
<p>通过<code>QTimer</code>类可以实例化一个定时器，而<code>QTimerEvent</code>类用于描述定时器事件，对于<code>QObject</code>的子类，只需要调用<code>int QObject:startTimer(int interval)</code>函数即可开启一个定时器，其中参数<code>interval</code>以毫秒为单位，返回值为当前定时器的整型<strong>编号</strong>。如果定时器发生溢出，则可以在<code>timerEvent()</code>函数进行相应操作。此外，通过<code>qrand()</code>和<code>qsrand()</code>函数可以生成随机数。打开
Qt Creator
新建<code>mytimerevent</code>工程，基类默认为<code>QWidget</code>，类名同样保持<code>Widget</code>不变。</p>
<h4 id="示例打印定时器溢出信息">示例：打印定时器溢出信息</h4>
<p><img src="/C&C++/Qt-Widgets/Event/6.gif"></p>
<h5 id="mytimerevent.pro">mytimerevent.pro</h5>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mytimerevent</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp \</span><br><span class="line">           widget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui</span><br></pre></td></tr></table></figure>
<h5 id="main.cpp-13">main.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.h-5">widget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">        <span class="type">int</span> id1, id2, id3;</span><br><span class="line">    <span class="keyword">protected</span>:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">timerEvent</span><span class="params">(QTimerEvent *event)</span></span>;   <span class="comment">// 声明定时器溢出处理函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="widget.cpp-5">widget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">/* 启动定时器，并且返回其 ID */</span></span><br><span class="line">    id1 = <span class="built_in">startTimer</span>(<span class="number">1000</span>);   <span class="comment">// 定时 1 秒</span></span><br><span class="line">    id2 = <span class="built_in">startTimer</span>(<span class="number">1500</span>);   <span class="comment">// 定时 1.5 秒</span></span><br><span class="line">    id3 = <span class="built_in">startTimer</span>(<span class="number">2000</span>);   <span class="comment">// 定时 2 秒</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 定时器溢出处理函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::timerEvent</span><span class="params">(QTimerEvent *event)</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* 通过 QTimerEvent 类的 timerId() 函数获取定时器编号，从而判断是哪一个定时器，进而分别打印不同语句 */</span></span><br><span class="line">    <span class="keyword">if</span> (event-&gt;<span class="built_in">timerId</span>() == id1) &#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;timer1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (event-&gt;<span class="built_in">timerId</span>() == id2) &#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;timer2&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;timer3&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="示例数码管动态时间显示">示例：数码管动态时间显示</h4>
<p>基于上一小节的工程，进入 Qt Creator
的设计模式，向<code>widget.ui</code>界面上添加【LCD
Number】小部件，并修改相应代码，运行以后可观察到如下效果：</p>
<p><img src="/C&C++/Qt-Widgets/Event/7.gif"></p>
<h5 id="widget.h-6">widget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">        <span class="type">int</span> id1, id2, id3;</span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">timerUpdate</span><span class="params">()</span></span>;   <span class="comment">// 声明槽函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="widget.cpp-6">widget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTimer&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QTime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Widget 类的构造函数 */</span></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 开启 1 秒定时器，溢出时将会发射 timeout() 信号，进而执行 timerUpdate() 槽函数 */</span></span><br><span class="line">    QTimer *timer = <span class="keyword">new</span> <span class="built_in">QTimer</span>(<span class="keyword">this</span>);                               <span class="comment">// 使用 QTimer 类创建一个定时器</span></span><br><span class="line">    <span class="built_in">connect</span>(timer, &amp;QTimer::timeout, <span class="keyword">this</span>, &amp;Widget::timerUpdate);   <span class="comment">// 将定时器的溢出信号关联至自定义的槽函数</span></span><br><span class="line">    timer-&gt;<span class="built_in">start</span>(<span class="number">1000</span>);                                             <span class="comment">// 启动定时器，溢出时间设置为 1 秒；如果要停止定时器，则可以调用 stop()</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 调用 qsrand() 随机设置定时器初值，避免后续运行 qrand() 时产生相同的随机数 */</span></span><br><span class="line">    <span class="built_in">qsrand</span>(<span class="built_in">QTime</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>).<span class="built_in">secsTo</span>(QTime::<span class="built_in">currentTime</span>()));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* QTimer 类的 singleShot() 可以开启仅运行一次的定时器，这里将溢出时间设置为 10 秒，发生溢出时就调用 Widget 的 close() 函数关闭窗口 */</span></span><br><span class="line">    QTimer::<span class="built_in">singleShot</span>(<span class="number">10000</span>, <span class="keyword">this</span>, &amp;Widget::close);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 定义槽函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::timerUpdate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    QTime time = QTime::<span class="built_in">currentTime</span>();      <span class="comment">// 获取当前系统时间</span></span><br><span class="line">    QString text = time.<span class="built_in">toString</span>(<span class="string">&quot;hh:mm&quot;</span>);  <span class="comment">// 转换为可以显示的字符串</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 使用 QTime 类的 second() 函数获取秒数，将其进行除 2 取余操作 */</span></span><br><span class="line">    <span class="keyword">if</span>((time.<span class="built_in">second</span>() % <span class="number">2</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">        text[<span class="number">2</span>]=<span class="string">&#x27; &#x27;</span>;                   <span class="comment">// 如果结果为 0，就让【时】与【分】之间的【:】显示为空格，从而实现间隔 1 秒闪烁 1 次的效果</span></span><br><span class="line">    &#125;</span><br><span class="line">    ui-&gt;lcdNumber-&gt;<span class="built_in">display</span>(text);      <span class="comment">// LCD Number 小部件显示时间字符串</span></span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> rand = <span class="built_in">qrand</span>() % <span class="number">300</span>;          <span class="comment">// 调用 qrand() 与 300 取余运算，即可生成介于 0 ~ 299 之间的整型随机数</span></span><br><span class="line">    ui-&gt;lcdNumber-&gt;<span class="built_in">move</span>(rand, rand);   <span class="comment">// 间隔 1 秒移动 LCD Number 小部件到一个随机位置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.ui-3">widget.ui</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLCDNumber&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lcdNumber&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>90<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>100<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>231<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>51<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="事件过滤器">事件过滤器</h3>
<p><strong>事件过滤器</strong>用于完成一个部件对其它多个部件的事件监视，是由<code>QObject</code>类中的<code>installEventFilter()</code>和<code>eventFilter()</code>两个函数组成的一种操作。借助事件过滤器可以方便的处理多个小部件的事件，否则就需要子类化各个小部件，然后重新实现其对应的各个事件处理函数，从而导致代码极为繁琐。</p>
<p>除此之外，如果需要发送事件到某个小部件，则可以考虑采用<code>QCoreApplication</code>类的如下
2 个函数来完成：</p>
<ol type="1">
<li><code>bool sendEvent(QObject *receiver, QEvent *event)</code>：立即处理指定事件，<code>QEvent</code>对象参数在事件发送完成后无法自动删除，因此需要在<strong>栈</strong>上创建该对象；</li>
<li><code>void postEvent(QObject *receiver, QEvent *event, int priority = Qt::NormalEventPriority)</code>：将事件放入等待调度队列，下次
Qt
主事件循环运行时再行处理，参数对象<code>QEvent</code>必须使用<code>new</code>关键字创建在<strong>堆</strong>上，事件发送完毕后事件队列会自动删除该对象；</li>
</ol>
<p>下面通过一个完整的示例来演示事件过滤器的具体使用方法，这里继续新建一个<code>myeventfilter</code>工程，基类选择<code>QWidget</code>，类名保持<code>Widget</code>不变。完成以后进入
Qt Creator 设计模式，并向界面拖入 1 个【Text Edit】 和 1 个【Spin
Box】小部件。</p>
<p><img src="/C&C++/Qt-Widgets/Event/8.gif"></p>
<h4 id="myeventfilter.pro">myeventfilter.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = myeventfilter</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp \</span><br><span class="line">           widget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-14">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="widget.h-7">widget.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">        <span class="function"><span class="type">bool</span> <span class="title">eventFilter</span><span class="params">(QObject *obj, QEvent *event)</span></span>;  <span class="comment">// 声明事件过滤器</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="widget.cpp-7">widget.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QKeyEvent&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWheelEvent&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 小部件使用事件过滤器，需要首先调用 installEventFilter() 进行安装，          */</span></span><br><span class="line">    <span class="comment">/* 函数参数为 this 表示要在当前 Widget 小部件中，监视 textEdit 和 spinBox 事件 */</span></span><br><span class="line">    ui-&gt;textEdit-&gt;<span class="built_in">installEventFilter</span>(<span class="keyword">this</span>);</span><br><span class="line">    ui-&gt;spinBox-&gt;<span class="built_in">installEventFilter</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 向 spinBox 小部件发送方向键【↑】被按下的事件，使其显示的初始值由 0 变为 1 */</span></span><br><span class="line">    <span class="function">QKeyEvent <span class="title">myEvent</span><span class="params">(QEvent::KeyPress, Qt::Key_Up, Qt::NoModifier)</span></span>;</span><br><span class="line">    qApp-&gt;<span class="built_in">sendEvent</span>(ui-&gt;spinBox, &amp;myEvent);   <span class="comment">// qApp 是 QApplication 对象的全局指针，等价于调用 QApplication::sendEvent()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 重新实现 Widget 类的 eventFilter() 方法定义事件过滤器，用于截取并处理 textEdit 和 spinBox 小部件的事件 */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Widget::eventFilter</span><span class="params">(QObject *obj, QEvent *event)</span>  </span>&#123;</span><br><span class="line">    <span class="comment">/* 如果当前部件类型为 textEdit */</span></span><br><span class="line">    <span class="keyword">if</span> (obj == ui-&gt;textEdit) &#123;</span><br><span class="line">        <span class="comment">/* 判断事件类型是否为鼠标滚轮事件 */</span></span><br><span class="line">        <span class="keyword">if</span> (event-&gt;<span class="built_in">type</span>() == QEvent::Wheel) &#123;</span><br><span class="line">            QWheelEvent *wheelEvent = <span class="built_in">static_cast</span>&lt;QWheelEvent*&gt;(event);   <span class="comment">// 把 event 强制转换为当前发生的事件类型</span></span><br><span class="line">            <span class="comment">/* 通过鼠标滚轮缩放 textEdit 小部件里的内容 */</span></span><br><span class="line">            <span class="keyword">if</span> (wheelEvent-&gt;<span class="built_in">delta</span>() &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                ui-&gt;textEdit-&gt;<span class="built_in">zoomIn</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                ui-&gt;textEdit-&gt;<span class="built_in">zoomOut</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;    <span class="comment">// 返回 true 表示事件已经处理，后续传递过程中无须再进行处理</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;   <span class="comment">// 返回 false 表示事件未处理，后续传递过程需要再进一步处理</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 如果当前部件类型为 spinBox */</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (obj == ui-&gt;spinBox) &#123;</span><br><span class="line">        <span class="keyword">if</span> (event-&gt;<span class="built_in">type</span>() == QEvent::KeyPress) &#123;</span><br><span class="line">            QKeyEvent *keyEvent = <span class="built_in">static_cast</span>&lt;QKeyEvent*&gt;(event);</span><br><span class="line">            <span class="comment">/* 如果按下的是空格键 */</span></span><br><span class="line">            <span class="keyword">if</span> (keyEvent-&gt;<span class="built_in">key</span>() == Qt::Key_Space) &#123;</span><br><span class="line">                ui-&gt;spinBox-&gt;<span class="built_in">setValue</span>(<span class="number">0</span>);   <span class="comment">// 那么将 spinBox 的值设置为 0</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 如果即不是 textEdit，也不是 spinBox，就直接返回 QWidget 的 eventFilter() 函数 */</span></span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> QWidget::<span class="built_in">eventFilter</span>(obj, event);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="widget.ui-4">widget.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QTextEdit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;textEdit&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>20<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>20<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>171<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>171<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSpinBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;spinBox&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>250<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>80<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>91<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>41<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="对象模型">对象模型</h2>
<p>标准 C++ 对象模型（<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/object.html">Object
Model</a>）在处理图形界面编程的一些问题时不够灵活，因此 Qt 在标准 C++
对象模型的基础上增加了一些新的特性，从而形成了自己的对象模型，这些特性如下所示：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/signalsandslots.html"><strong>Signals and
Slots</strong></a>：一种非常强大的无缝对象通信机制，信号与插槽；</li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/properties.html"><strong>Object
Properties</strong></a>：可以查询与设计的对象属性；</li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/eventsandfilters.html"><strong>Events and
Event Filters</strong></a>：强大的事件以及事件过滤器；</li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/internationalization.html"><strong>String
Translation for
Internationalization</strong></a>：用于国际化的上下文字符串翻译；</li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/timers.html"><strong>Timer</strong></a>：复杂的时间间隔驱动定时器，使得事件驱动的图形界面能够优雅的集成更多任务；</li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/objecttrees.html"><strong>Object
Trees</strong></a>：以自然的方式组织对象所有权，且可查询并具有层次结构的对象树；</li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qpointer.html"><strong>QPointer</strong></a>：保护指针（），其引用的对象被销毁时会自动设置为<code>0</code>，而标准
C++ 指针对象销毁时会变为悬空的指针；</li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/metaobjects.html#qobjectcast"><strong>Dynamic
Cast</strong></a>：能够跨库边界的动态转换；</li>
<li><a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/custom-types.html"><strong>Custom
Type</strong></a>：支持自定义的类型创建；</li>
</ul>
<p>上述 Qt 对象模型特性都是基于标准 C++
规范实现的，使用这些特性必须继承<code>QObject</code>类。其中，<strong>对象通信机制</strong>和<strong>动态属性系统</strong>还需要获取<strong>元对象系统</strong>的支持。元对象系统（<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/metaobjects.html">Meta-Object
System</a>）由 Qt 自己的元对象编译器（<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/moc.html">Meta-Object
Compiler</a>）提供，用于使 C++ 语言更加适用于图形界面编程。</p>
<h3 id="信号与槽">信号与槽</h3>
<p>信号与槽机制是 Qt 的核心特征，主要用于对象之间的通信，是 Qt
不同于其它开发框架的显著特征。之前小节所使用的信号与槽都是 1 个信号对应
1 个槽，事实上 1
个信号可以关联至多个槽，多个信号也可以关联到同一个槽，甚至 1
个信号还可以关联至另 1 个信号上。</p>
<p><img src="/C&C++/Qt-Widgets/Object/1.png"></p>
<blockquote>
<p><strong>注意</strong>：如果存在多个槽与某个信号相关联，那么该信号被发射时，这些槽将会逐个进行执行，其执行顺序与关联的顺序保持一致。</p>
</blockquote>
<h4 id="示例手动关联信号与槽">示例：手动关联信号与槽</h4>
<p>本小节示例将会在主界面创建一个对话框，在该对话框中输入数值，鼠标单击【确定】按钮后关闭对话框并且将输入的数值通过信号发射出去，最后在主界面中接收该信号并且显示出来。新建
Qt Widgets
工程<code>mysignalslot</code>，基类选择<code>QWidget</code>，类名保持<code>Widget</code>不变。然后向工程中添加【Qt
设计师界面类】，界面模板选择【Dialog without
Buttons】类名设置为【MyDialog】。</p>
<p><img src="/C&C++/Qt-Widgets/Object/2.png"></p>
<p><img src="/C&C++/Qt-Widgets/Object/3.png"></p>
<p>信号函数与槽函数的使用总结起来有如下 4 个注意事项：</p>
<ol type="1">
<li>继承自<code>QObject</code>或者子类；</li>
<li>类声明开始处添加<code>Q_OBJECT</code>宏；</li>
<li>槽函数的参数类型需要与信号参数的类型对应，不能多于信号函数的参数；</li>
<li>信号只需要声明不需要实现，且返回值为<code>void</code>类型；</li>
</ol>
<p><img src="/C&C++/Qt-Widgets/Object/4.gif"></p>
<h5 id="mysignalslot.pro">mysignalslot.pro</h5>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mysignalslot</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp \</span><br><span class="line">        widget.cpp \</span><br><span class="line">        mydialog.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h \</span><br><span class="line">        mydialog.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui \</span><br><span class="line">        mydialog.ui</span><br></pre></td></tr></table></figure>
<h5 id="main.cpp-15">main.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="mydialog.h">mydialog.h</h5>
<p>使用<code>signals</code>关键字声明一个信号，但是前面不能使用<code>public</code>、<code>private</code>、<code>rotected</code>等限定符。由于信号默认为<code>public</code>的函数，可以从任意位置发射，但是仅建议在定义该信号的类或子类中进行发射。信号只需要声明即可，不能也不需要对其进行实现。信号函数无返回值，所以只能使用<code>void</code>类型。</p>
<p>由于只有<code>QObject</code>类及其子类才能使用信号槽机制，示例中的<code>MyDialog</code>类继承自<code>QDialog</code>类，<code>QDialog</code>又是<code>QWidget</code>的子类，最后<code>QWidget</code>继承了<code>QObject</code>类，所以能够正常使用信号槽机制，但是必须在类声明的开始位置添加<code>Q_OBJECT</code>宏。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYDIALOG_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYDIALOG_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDialog&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MyDialog</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyDialog</span> : <span class="keyword">public</span> QDialog &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyDialog</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyDialog</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MyDialog *ui;</span><br><span class="line">    signals:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">dlgReturn</span><span class="params">(<span class="type">int</span>)</span></span>;            <span class="comment">// 自定义信号函数</span></span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_clicked</span><span class="params">()</span></span>;   <span class="comment">// 自定义槽函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYDIALOG_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="mydialog.cpp">mydialog.cpp</h5>
<p>双击下面的<code>mydialog.ui</code>文件进入 Qt Creator
设计模式，向界面添加 1 个【Spin Box】部件和 1 个【Push
Button】部件，然后转到<code>pushButton</code>的<code>clicked()</code>单击信号对应的槽。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mydialog.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mydialog.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyDialog::<span class="built_in">MyDialog</span>(QWidget *parent) : <span class="built_in">QDialog</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MyDialog) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyDialog::~<span class="built_in">MyDialog</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Push Button 的 clicked() 信号对应的槽函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MyDialog::on_pushButton_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> value = ui-&gt;spinBox-&gt;<span class="built_in">value</span>();    <span class="comment">// 获取 spinBox 小部件的输入值</span></span><br><span class="line">    <span class="function">emit <span class="title">dlgReturn</span><span class="params">(value)</span></span>;               <span class="comment">// 使用 emit 关键字发射信号，以该输入值作为参数</span></span><br><span class="line">    <span class="built_in">close</span>();                             <span class="comment">// 关闭对话框</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="mydialog.ui">mydialog.ui</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MyDialog<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QDialog&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MyDialog&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Dialog<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSpinBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;spinBox&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>80<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>40<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>91<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>190<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>40<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>确  定<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="widget.h-8">widget.h</h5>
<p>槽只是一个普通的 C++
函数，声明时需要使用<code>slots</code>关键字，可以是<code>private</code>、<code>public</code>、<code>protected</code>类型，其最大特点是可以与信号关联。打开<code>widget.ui</code>并拖入
1 个【Label】部件。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">showValue</span><span class="params">(<span class="type">int</span> value)</span></span>;   <span class="comment">// 自定义槽函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="widget.cpp-8">widget.cpp</h5>
<p>信号与槽的关联使用的是<code>QObject</code>类当中的<code>connect()</code>静态成员函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(<span class="type">const</span> QObject *sender,</span><br><span class="line">        <span class="type">const</span> QMetaMethod &amp;signal,</span><br><span class="line">        <span class="type">const</span> QObject *receiver,</span><br><span class="line">        <span class="type">const</span> QMetaMethod &amp;method,</span><br><span class="line">        Qt::ConnectionType type = Qt::AutoConnection)</span><br></pre></td></tr></table></figure>
<p>第 1
个参数<code>*sender</code>为发射信号的对象，本示例中为<code>dlg</code>；第
2 个参数是待发射的信号，本示例中是<code>dlgReturn(value)</code>；第 3
个参数是接收信号的对象，这里用<code>this</code>表示<code>Widget</code>部件本身（由于<code>connect()</code>函数拥有省略该参数的重载形式，因此该参数可以省略），第
4
个参数是信号对应的槽函数<code>showValue(int value)</code>（该参数也可以指定为
1 个信号，从而实现信号与信号的关联）。第 5
个参数参数<code>type</code>用于描述信号与槽的关联方式，由<code>Qt::ConnectionType</code>枚举类型指定，日常开发通常使用其默认值<code>Qt:AutoConnection</code>，其它枚举值以及用途如下表所示：</p>
<table>
<colgroup>
<col style="width: 14%">
<col style="width: 2%">
<col style="width: 82%">
</colgroup>
<thead>
<tr class="header">
<th>枚举常量</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Qt::AutoConnection</code></td>
<td><code>0</code></td>
<td><strong>自动关联</strong>（默认），在信号被发射时决定使用哪种关联类型，如果<code>receiver</code>存在于发射信号的线程，则使用
Qt::DirectConnection，否则使用<code>Qt::QueuedConnection</code>；</td>
</tr>
<tr class="even">
<td><code>Qt::DirectConnection</code></td>
<td><code>1</code></td>
<td><strong>直接关联</strong>，信号发射后立即调用槽函数，仅当槽函数执行完成返回以后，发射信号后面的代码才会继续执行；</td>
</tr>
<tr class="odd">
<td><code>Qt::QueuedConnection</code></td>
<td><code>2</code></td>
<td><strong>队列关联</strong>，当流程返回<code>receiver</code>所在线程的事件循环之后，再执行槽函数，而且无论槽函数是否执行，发射信号后续的代码都将立刻执行；</td>
</tr>
<tr class="even">
<td><code>Qt::BlockingQueuedConnection</code></td>
<td><code>3</code></td>
<td><strong>阻塞队列关联</strong>，作用类似于<code>Qt::QueuedConnection</code>，但是信号线程会一直阻塞，直至槽函数返回。如果<code>receiver</code>位于发出信号的线程中，则不能使用该连接方式，否则会造成应用程序死锁；</td>
</tr>
<tr class="odd">
<td><code>Qt::UniqueConnection</code></td>
<td><code>0x80</code></td>
<td><strong>唯一关联</strong>标志，可以结合其它几种连接类型，使用按位或操作；此时，两个对象之间的相同信号与槽只能拥有唯一的关联，使用该标志主要是为了防止出现重复关联；</td>
</tr>
</tbody>
</table>
<p>例如：本小节中的<code>MyDialog</code>类使用<code>emit</code>关键字发射信号之后，就会立刻执行槽函数，只有等待该槽函数执行完成以后，才会继续执行<code>emit</code>语句后面的代码。此时，如果将参数修改为<code>Qt::QueuedConnection</code>，那么在执行完成<code>emit</code>语句之后，无论槽函数是否已经被执行，都会立刻执行后续的代码。</p>
<blockquote>
<p><strong>注意</strong>：对于信号与槽函数的参数，基本原则是信号函数的参数类型要与槽函数的参数类型对应，但是信号函数中的参数可以多于槽函数的参数，这些多余的参数将会被忽略。</p>
</blockquote>
<p>本小节示例中的<code>connect()</code>函数使用的是下面的重载形式，信号与槽参数可以使用<code>SIGNAI()</code>和<code>SLOT()</code>宏将其转换为<code>const char</code>类型：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(dlg, <span class="built_in">SIGNAL</span>(<span class="built_in">dlgReturn</span>(<span class="type">int</span>)), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">showValue</span>(<span class="type">int</span>)));</span><br><span class="line"></span><br><span class="line"><span class="built_in">connect</span>(<span class="type">const</span> QObject *sender,</span><br><span class="line">        <span class="type">const</span> <span class="type">char</span> *signal,</span><br><span class="line">        <span class="type">const</span> QObject *receiver,</span><br><span class="line">        <span class="type">const</span> <span class="type">char</span> *method,</span><br><span class="line">        Qt::ConnectionType type = Qt::AutoConnection)</span><br></pre></td></tr></table></figure>
<p>Qt5
加入了另一种基于函数指针的<code>connect()</code>重载形式，与之前介绍的重载形式最大不同在于，槽函数不再是必须使用<code>slots</code>关键字声明的函数，而是任意能与信号相关联的成员函数；要使成员函数与信号相关联，那么该成员函数的参数个数不能超过信号函数的参数个数，但是并不会要求参数类型上的完全一致，只需能够进行隐式转换即可：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(dlg, &amp;MyDialog::dlgReturn, <span class="keyword">this</span>, &amp;Widget::showValue);</span><br><span class="line"></span><br><span class="line"><span class="built_in">connect</span>(<span class="type">const</span> QObject *sender,</span><br><span class="line">        PointerToMemberFunction signal,</span><br><span class="line">        <span class="type">const</span> QObject *receiver,</span><br><span class="line">        PointerToMemberFunction method,</span><br><span class="line">        Qt::ConnectionType type = Qt::AutoConnection)</span><br></pre></td></tr></table></figure>
<p>上面这种方式的另一个好处在于可以在编译时进行检查，<code>信号与槽的拼写错误</code>、<code>槽函数参数数量多于信号函数的参数个数</code>等错误都能够在编译时被发现，因此推荐在
Qt5 当中使用这种关联形式。除此之外，这种形式还支持 C++11 里的
<strong>Lambda</strong>
表达式，可以在信号与槽进行关联的时候，直接编写信号发射后将要执行的槽函数代码，例如：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">connect</span>(dlg, &amp;MyDialog::dlgReturn, [=](<span class="type">int</span> value)&#123;</span><br><span class="line">    ui-&gt;label-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;获取的值是：%1&quot;</span>).<span class="built_in">arg</span>(value));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>最后，<code>connect()</code>函数的<strong>返回值</strong>为<code>QMetaObject:Connection</code>类型，该返回值可用于断开信号槽关联的<code>QObject:disconnect(const Q MetaObject:Connection connection)</code>函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mydialog.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    MyDialog *dlg = <span class="keyword">new</span> <span class="built_in">MyDialog</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 关联 mydialog 对话框中的自定义信号与主界面 widget 里的自定义槽 */</span></span><br><span class="line">    <span class="built_in">connect</span>(dlg, <span class="built_in">SIGNAL</span>(<span class="built_in">dlgReturn</span>(<span class="type">int</span>)), <span class="keyword">this</span>, <span class="built_in">SLOT</span>(<span class="built_in">showValue</span>(<span class="type">int</span>)));</span><br><span class="line"></span><br><span class="line">    dlg-&gt;<span class="built_in">show</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 自定义槽函数的实现 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::showValue</span><span class="params">(<span class="type">int</span> value)</span> </span>&#123;</span><br><span class="line">    ui-&gt;label-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;获取的值是：%1&quot;</span>).<span class="built_in">arg</span>(value));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.ui-5">widget.ui</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;ui version=<span class="string">&quot;4.0&quot;</span>&gt;</span><br><span class="line"> &lt;<span class="keyword">class</span>&gt;Widget&lt;/<span class="keyword">class</span>&gt;</span><br><span class="line"> &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QWidget&quot;</span> name=<span class="string">&quot;Widget&quot;</span>&gt;</span><br><span class="line">  &lt;property name=<span class="string">&quot;geometry&quot;</span>&gt;</span><br><span class="line">   &lt;rect&gt;</span><br><span class="line">    &lt;x&gt;<span class="number">0</span>&lt;/x&gt;</span><br><span class="line">    &lt;y&gt;<span class="number">0</span>&lt;/y&gt;</span><br><span class="line">    &lt;width&gt;<span class="number">400</span>&lt;/width&gt;</span><br><span class="line">    &lt;height&gt;<span class="number">300</span>&lt;/height&gt;</span><br><span class="line">   &lt;/rect&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;property name=<span class="string">&quot;windowTitle&quot;</span>&gt;</span><br><span class="line">   &lt;string&gt;Widget&lt;/string&gt;</span><br><span class="line">  &lt;/property&gt;</span><br><span class="line">  &lt;widget <span class="keyword">class</span>=<span class="string">&quot;QLabel&quot;</span> name=<span class="string">&quot;label&quot;</span>&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;geometry&quot;</span>&gt;</span><br><span class="line">    &lt;rect&gt;</span><br><span class="line">     &lt;x&gt;<span class="number">90</span>&lt;/x&gt;</span><br><span class="line">     &lt;y&gt;<span class="number">30</span>&lt;/y&gt;</span><br><span class="line">     &lt;width&gt;<span class="number">111</span>&lt;/width&gt;</span><br><span class="line">     &lt;height&gt;<span class="number">16</span>&lt;/height&gt;</span><br><span class="line">    &lt;/rect&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">   &lt;property name=<span class="string">&quot;text&quot;</span>&gt;</span><br><span class="line">    &lt;string&gt;获取的值是：&lt;/string&gt;</span><br><span class="line">   &lt;/property&gt;</span><br><span class="line">  &lt;/widget&gt;</span><br><span class="line"> &lt;/widget&gt;</span><br><span class="line"> &lt;layoutdefault spacing=<span class="string">&quot;6&quot;</span> margin=<span class="string">&quot;11&quot;</span>/&gt;</span><br><span class="line"> &lt;resources/&gt;</span><br><span class="line"> &lt;connections/&gt;</span><br><span class="line">&lt;/ui&gt;</span><br></pre></td></tr></table></figure>
<h4 id="示例自动关联信号与槽">示例：自动关联信号与槽</h4>
<p>前一小节的示例代码，Qt Creator
在设计模式下自动生成【确定】按钮单击信号的槽函数<code>on_pushButto_clicked()</code>，就是采用了信号与槽的自动关联方式，即<code>on_ + 小部件objectName + _信号名称</code>这种命名格式的槽可以直接与<code>信号名称</code>对应的信号自动完成关联，无需再手动调用<code>connect()</code>函数。这种方式之所以能够直接使用，是因为
Qt Creator
在由<code>xxx.ui</code>生成<code>ui_xxx.h</code>的过程中，自动加入了<code>QMetaObject::connectSlotsByName(objectName)</code>来完成信号与槽的关联。</p>
<p><img src="/C&C++/Qt-Widgets/Object/5.gif"></p>
<p>本小节再来完成一个信号与槽自动关联的示例，重新建立一个 Qt Widgets
工程，项目名称依然为<code>mysignalslot</code>，基类选择<code>QWidget</code>，类名保持默认的<code>Widget</code>不变。</p>
<h5 id="mysignalslot.pro-1">mysignalslot.pro</h5>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mysignalslot</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp \</span><br><span class="line">           widget.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui</span><br></pre></td></tr></table></figure>
<h5 id="main.cpp-16">main.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.h-9">widget.h</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_myButton_clicked</span><span class="params">()</span></span>;   <span class="comment">// 自定义槽</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h5 id="widget.cpp-9">widget.cpp</h5>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    QPushButton *button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(<span class="keyword">this</span>);   <span class="comment">// 创建 Push Button 按钮</span></span><br><span class="line">    button-&gt;<span class="built_in">setObjectName</span>(<span class="string">&quot;myButton&quot;</span>);             <span class="comment">// 必须指定关联小部件的 objectName</span></span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);                             <span class="comment">// 因为隐式调用了 connectSlotsByName(objectName) ，所以自动关联的小部件必须定义在该语句之前</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用自动关联 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::on_myButton_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">close</span>();   <span class="comment">// 关闭 Widget 小部件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="widget.ui-6">widget.ui</h5>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="disconnect-静态函数">disconnect() 静态函数</h4>
<p>通过<code>QObject</code>上提供的静态函数<code>disconnect()</code>，可以断开信号与槽的关联，其函数原型如下：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">QObject::disconnect</span><span class="params">(<span class="type">const</span> QObject *sender,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="type">const</span> <span class="type">char</span> *signal,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="type">const</span> QObject *receiver,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="type">const</span> <span class="type">char</span> *method)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">QObject::disconnect</span><span class="params">(<span class="type">const</span> QObject *sender,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="type">const</span> QMetaMethod &amp;signal,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="type">const</span> QObject *receiver,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="type">const</span> QMetaMethod &amp;method)</span></span></span><br></pre></td></tr></table></figure>
<p>一般情况下，该函数拥有如下使用方法：</p>
<ol type="1">
<li>断开与一个对象所有信号的全部关联： <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">disconnect</span>(myObject, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">/* 等价于 */</span></span><br><span class="line">myObject-&gt;<span class="built_in">disconnect</span>();</span><br></pre></td></tr></table></figure></li>
<li>断开与一个指定信号的全部关联： <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">disconnect</span>(myObject, <span class="built_in">SIGNAL</span>(<span class="built_in">mySignal</span>()), <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">/* 等价于 */</span></span><br><span class="line">myObject-&gt;<span class="built_in">disconnect</span>(<span class="built_in">SIGNAL</span>(<span class="built_in">mySignal</span>()));</span><br></pre></td></tr></table></figure></li>
<li>断开一个指定信号与槽的关联： <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">disconnect</span>(myObject, <span class="number">0</span>, myReceiver, <span class="number">0</span>);</span><br><span class="line"><span class="comment">/* 等价于 */</span></span><br><span class="line">myObject-&gt;<span class="built_in">disconnect</span>(myReceiver);</span><br></pre></td></tr></table></figure></li>
<li>断开一个指定信号和槽的关联： <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">disconnect</span>(myObject, <span class="built_in">SIGNAL</span>(<span class="built_in">mySignal</span>()), myReceiver, <span class="built_in">SLOT</span>(<span class="built_in">mySlot</span>()));</span><br><span class="line"><span class="comment">/* 等价于 */</span></span><br><span class="line">myObject-&gt;<span class="built_in">disconnect</span>(myObject, <span class="built_in">SIGNAL</span>(<span class="built_in">mySignal</span>()), myReceiver, <span class="built_in">SLOT</span>(<span class="built_in">mySlot</span>()));</span><br><span class="line"><span class="comment">/* 等价于 */</span></span><br><span class="line">myObject-&gt;<span class="built_in">disconnect</span>(myConnection);   <span class="comment">// myConnection 是信号槽关联时 connect() 的返回值</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>与<code>disconnect()</code>类似，<code>disconnect()</code>也提供了基于函数指针的重载形式：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">QObject::disconnect</span><span class="params">(<span class="type">const</span> QObject *sender,</span></span></span><br><span class="line"><span class="params"><span class="function">                         PointerToMemberFunction signal,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="type">const</span> QObject *receiver,</span></span></span><br><span class="line"><span class="params"><span class="function">                         PointerToMemberFunction method)</span></span></span><br></pre></td></tr></table></figure>
<p>该函数并不能断开信号与普通函数或者 Lambda
表达式之间的关联，遇到此类情况通常需要借助于<code>connect()</code>函数的返回值来执行断开操作。</p>
<h4 id="qsignalmapper-类">QSignalMapper 类</h4>
<p>如果需要获取信号发送者的信息，Qt
提供了<code>QObject::sender()</code>函数返回发送该信号对象的指针，如果多个信号关联到了同一个槽，而该槽需要对每个信号进行不同的处理，使用这种方式就会较为麻烦。应对这种情况，推荐使用<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qsignalmapper.html#details"><code>QSignalMapper</code><strong>信号映射器类</strong></a>，从而对多个相同小部件的相同信号进行映射，为其添加字符串或者数值参数，然后再将其发射出去。</p>
<p>该类通过调用<code>setMapping()</code>将指定的<strong>字符串或整数</strong>与特定对象进行映射，然后再将对象的信号连接至<code>map()</code>插槽，该插槽将会使用与原始信号对象关联的<strong>字符串或整数</strong>发出被映射的信号，该映射可以在稍后使用<code>removeMappings()</code>删除。</p>
<p>例如：创建包含一组按钮的自定义小部件（工具面板），传统方式是将每个按钮的<code>clicked()</code>信号连接至单独的自定义槽；如果希望将所有按钮的信号都连接至同一个槽，然后对当前单击的按钮在槽中进行参数化判断，可以阅读接下来的代码。这里先定义
1
个<code>ButtonWidget</code>小部件，该小部件拥有一个单独的<code>clicked()</code>信号，它将伴随与所单击按钮的文本一同被发射：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ButtonWidget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">ButtonWidget</span>(<span class="type">const</span> QStringList &amp;texts, QWidget *parent = <span class="number">0</span>);</span><br><span class="line">    signals:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">clicked</span><span class="params">(<span class="type">const</span> QString &amp;text)</span></span>;   <span class="comment">// 声明 clicked() 信号</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        QSignalMapper *signalMapper;         <span class="comment">// 声明 QSignalMapper 信号映射器类</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>接下来，唯一需要在源文件中实现的函数是<code>ButtonWidget</code>类的构造函数：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ButtonWidget::<span class="built_in">ButtonWidget</span>(<span class="type">const</span> QStringList &amp;texts, QWidget *parent) : <span class="built_in">QWidget</span>(parent) &#123;</span><br><span class="line">    signalMapper = <span class="keyword">new</span> <span class="built_in">QSignalMapper</span>(<span class="keyword">this</span>);   <span class="comment">// 实例化 QSignalMapper 信号映射器类</span></span><br><span class="line">    QGridLayout *gridLayout = <span class="keyword">new</span> QGridLayout;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; texts.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">        QPushButton *button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(texts[i]);</span><br><span class="line">        <span class="built_in">connect</span>(button, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>()), signalMapper, <span class="built_in">SLOT</span>(<span class="built_in">map</span>()));</span><br><span class="line">        signalMapper-&gt;<span class="built_in">setMapping</span>(button, texts[i]);</span><br><span class="line">        gridLayout-&gt;<span class="built_in">addWidget</span>(button, i / <span class="number">3</span>, i % <span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">connect</span>(signalMapper, <span class="built_in">SIGNAL</span>(<span class="built_in">mapped</span>(QString)), <span class="keyword">this</span>, <span class="built_in">SIGNAL</span>(<span class="built_in">clicked</span>(QString)));</span><br><span class="line">    <span class="built_in">setLayout</span>(gridLayout);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1
个文本列表参数<code>texts</code>将会传递给<code>ButtonWidget</code>类的构造函数，构造
1 个信号映射器，并为列表中的每个文本创建 1
个<code>QPushButton</code>。然后，将每个按钮的<code>clicked()</code>信号连接到信号映射器的<code>map()</code>槽，并在信号映射器中创建从每个按钮到按钮文本的映射。最后，将信号映射器的<code>mapped()</code>信号连接至<code>ButtonWidget</code>小部件的<code>clicked()</code>信号。这样当用户单击按钮时，自定义小部件就会发出单个的<code>clicked()</code>信号，该信号的参数是用户单击按钮的文本。</p>
<p>在 <strong>Lambda</strong>
表达式可用于编写槽函数之前，<code>QSignalMapper</code>是非常有用的一个类，但是现在还可以通过一个
<strong>Lambda</strong> 表达式来简化上面的示例：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ButtonWidget::<span class="built_in">ButtonWidget</span>(<span class="type">const</span> QStringList &amp;texts, QWidget *parent) : <span class="built_in">QWidget</span>(parent) &#123;</span><br><span class="line">      QGridLayout *gridLayout = <span class="keyword">new</span> QGridLayout;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; texts.<span class="built_in">size</span>(); ++i) &#123;</span><br><span class="line">          QString text = texts[i];</span><br><span class="line">          QPushButton *button = <span class="keyword">new</span> <span class="built_in">QPushButton</span>(text);</span><br><span class="line">          <span class="built_in">connect</span>(button, &amp;QPushButton::clicked, [=] &#123; <span class="built_in">clicked</span>(text); &#125;);</span><br><span class="line">          gridLayout-&gt;<span class="built_in">addWidget</span>(button, i / <span class="number">3</span>, i % <span class="number">3</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">setLayout</span>(gridLayout);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="属性系统">属性系统</h3>
<p>Qt 提供了一个复杂的<strong>属性系统</strong>（<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/properties.html">Property
System</a>），类似于某些编译器供应商提供的属性系统。但作为一个独立于编译器与操作系统的
C++ 库，Qt 并不依赖于非标准的编译器特性，而是可以在每个 Qt
支持的平台上与任意标准 C++ 编译器一同工作。Qt
提供的这套属性系统基于<strong>元对象系统</strong>（<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/metaobjects.html">Meta-Object
System</a>）实现，并且通过信号与槽完成对象之间的通信。如果要声明属性，需要继承<code>QObject</code>类的同时在声明前使用<code>Q_PROPERTY()</code>宏。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Q_PROPERTY</span>(type <span class="built_in">name</span></span><br><span class="line">           (READ getFunction [WRITE setFunction] |</span><br><span class="line">            MEMBER memberName [(READ getFunction | WRITE setFunction)])</span><br><span class="line">           [RESET resetFunction]</span><br><span class="line">           [NOTIFY notifySignal]</span><br><span class="line">           [REVISION <span class="type">int</span>]</span><br><span class="line">           [DESIGNABLE <span class="type">bool</span>]</span><br><span class="line">           [SCRIPTABLE <span class="type">bool</span>]</span><br><span class="line">           [STORED <span class="type">bool</span>]</span><br><span class="line">           [USER <span class="type">bool</span>]</span><br><span class="line">           [CONSTANT]</span><br><span class="line">           [FINAL])</span><br></pre></td></tr></table></figure>
<p><code>type</code>属性可以是<code>QVariant</code>支持的任何类型，也可以是用户的自定义类型。下面是一些出自<code>QWidget</code>类的典型属性声明示例：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Q_PROPERTY</span>(<span class="type">bool</span> focus READ hasFocus)</span><br><span class="line"><span class="built_in">Q_PROPERTY</span>(<span class="type">bool</span> enabled READ isEnabled WRITE setEnabled)</span><br><span class="line"><span class="built_in">Q_PROPERTY</span>(QCursor cursor READ cursor WRITE setCursor RESET unsetCursor)</span><br></pre></td></tr></table></figure>
<p>下面的示例演示了如何使用<code>member</code>关键字将成员变量导出为 Qt
属性，代码中必须指定<code>NOTIFY</code>信号来允许 QML 属性绑定。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="built_in">Q_PROPERTY</span>(QColor color MEMBER m_color NOTIFY colorChanged)</span><br><span class="line">    <span class="built_in">Q_PROPERTY</span>(qreal spacing MEMBER m_spacing NOTIFY spacingChanged)</span><br><span class="line">    <span class="built_in">Q_PROPERTY</span>(QString text MEMBER m_text NOTIFY textChanged)</span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">colorChanged</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">spacingChanged</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">textChanged</span><span class="params">(<span class="type">const</span> QString &amp;newText)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QColor  m_color;</span><br><span class="line">    qreal   m_spacing;</span><br><span class="line">    QString m_text;</span><br></pre></td></tr></table></figure>
<p>虽然<strong>属性</strong>的行为类似于类数据成员，但是除此之外，它还会拥有一些可以通过元对象系统访问的附加特性。</p>
<ol type="1">
<li><code>READ</code>操作函数：用于读取属性值，该函数一般声明为<code>const</code>类型，其返回值类型必须与该属性的类型一致，或者是该属性类型的指针或者引用。如果未指定<code>MEMBER</code>变量，那么该函数必须存在。</li>
<li><code>WRITE</code>操作函数：（可选）用于设置属性值。该函数只能拥有 1
个参数，且其返回值必须为空<code>void</code>。</li>
<li><code>MEMBER</code>变量：如果未指定<code>READ</code>操作函数，那么必须指定一个<code>MEMBER</code>变量关联，这样会让指定的成员变量变为可读可写，而不需要创建<code>READ</code>和<code>WRITE</code>操作函数；</li>
<li><code>RESET</code>函数：（可选）用于将属性恢复到默认值。该函数不能拥有参数，且返回值必须为空<code>void</code>；</li>
<li><code>NOTIFY</code>信号：（可选）使用该选项，必须指定类当中 1
个已经存在的信号，每当该属性的值改变时都会发射该信号；如果使用<code>MEMBER</code>变量时指定了<code>NOTIFY</code>信号，则该信号最多只能拥有
1 个参数，并且参数类型必须与属性类型相同。</li>
<li><code>REVISION</code>版本号：（可选）可用于指定属性以及<code>NOTIFY</code>信号仅用于指定版本的
API，默认为<code>0</code>；</li>
<li><code>DESIGNABLE</code>标注：（可选）标注该属性在 Qt Designer
的属性编辑器中是否可见。大多数属性会设置为<code>true</code>，即可见；</li>
<li><code>SCRIPTABLE</code>标注：（可选）标注该属性是否可以被脚本引擎访问，其默认值为<code>true</code>。</li>
<li><code>STORED</code>标注：（可选）标注是否在对象状态被存储时，也必须存储该属性的值，大部分属性会设置为<code>true</code>；</li>
<li><code>USER</code>：（可选）标注该属性是否被指定为面向用户的属性，或者该类的用户可编辑属性，每个类通常只拥有
1 个<code>USER</code>属性，其默认值为<code>false</code>；</li>
<li><code>CONSTANT</code>：（可选）表明该属性的值为常量，对于一个给定的对象实例，每次使用常量属性的<code>READ</code>方法都必须返回相同的值，但对于类的不同的实例，该常量可以不同。常量属性不能拥有<code>WRITE</code>方法和<code>NOTIFY</code>信号；</li>
<li><code>FINAL</code>：（可选）用于表示该属性不能被派生类进行重写；</li>
</ol>
<p>其中，<code>READ</code>、<code>WRITE</code>、<code>RESET</code>函数可以被继承，也可以作为虚拟的；进行多继承时，它们必须继承自第
1
个父类。接下来看一个具体的示例：新建一个名称为<code>myproperty</code>的工程，基类选择<code>QWidget</code>，类名保持<code>Widget</code>不变。接着向工程添加名为<code>MyClass</code>的
C++ 类文件，并且选择其基类为<code>QObject</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Object/6.png"></p>
<h4 id="myproperty.pro">myproperty.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = myproperty</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp \</span><br><span class="line">           widget.cpp \</span><br><span class="line">    myclass.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h \</span><br><span class="line">    myclass.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-17">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="myclass.h">myclass.h</h4>
<p>这里使用<code>Q_PROPERTY</code>宏向元对象系统注册了一个<code>userName</code>属性，然后声明了几个相应的操作函数。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYCLASS_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYCLASS_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QObject&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> : <span class="keyword">public</span> QObject &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 注册 userName 属性 */</span></span><br><span class="line">    <span class="built_in">Q_PROPERTY</span>(QString userName</span><br><span class="line">               READ getUserName</span><br><span class="line">               WRITE setUserName</span><br><span class="line">               NOTIFY userNameChanged)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyClass</span><span class="params">(QObject *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 实现 READ 读操作函数，const 关键字修饰的是函数返回值，表示返回指针指向的值是 1 个常量 */</span></span><br><span class="line">        <span class="function">QString <span class="title">getUserName</span><span class="params">()</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> m_userName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* 实现 WRITE 写操作函数 */</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">setUserName</span><span class="params">(QString userName)</span> </span>&#123;</span><br><span class="line">            m_userName = userName;</span><br><span class="line">            <span class="function">emit <span class="title">userNameChanged</span><span class="params">(userName)</span></span>;   <span class="comment">// 当 userName 属性变化时发射 userNameChanged() 信号</span></span><br><span class="line">        &#125;</span><br><span class="line">    signals:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">userNameChanged</span><span class="params">(QString)</span></span>;       <span class="comment">// 声明 NOTIFY 通知消息</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        QString m_userName;                  <span class="comment">// 存放 userName 属性值的私有变量</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYCLASS_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="myclass.cpp">myclass.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myclass.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">MyClass::<span class="built_in">MyClass</span>(QObject *parent) : <span class="built_in">QObject</span>(parent) &#123;</span><br><span class="line">    <span class="comment">// 构造函数暂时不添加任何内容</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="widget.h-10">widget.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">userChanged</span><span class="params">(QString)</span></span>;   <span class="comment">// 私有槽声明</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="widget.cpp-10">widget.cpp</h4>
<p>这里创建了 1
个<code>MyClass</code>类实例，然后进行<code>userName</code>属性的读写操作，这里有两种方法：一种是直接调用该属性的相关函数；另一种是使用<code>QObject</code>类的<code>setProperty()</code>和<code>property()</code>函数，使用这
2 个函数需要指定属性名。<code>Property()</code>函数的返回值类型为
<code>QVariant</code>，可以使用该类的<code>toString()</code>函数转换为<code>QString</code>类型数据。</p>
<p>除此之外，通过<code>QObject</code>类的<code>setProperty()</code>函数还可以设置<strong>动态属性</strong>（仅对于当前类的实例有效），此时只需将<code>属性名称</code>设置为
1 个类中没有的属性即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;myclass.h&quot;</span>   <span class="comment">// 导入 myclass.h</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    MyClass *my = <span class="keyword">new</span> <span class="built_in">MyClass</span>(<span class="keyword">this</span>);   <span class="comment">// 创建 MyClass 类实例</span></span><br><span class="line">    <span class="built_in">connect</span>(my, &amp;MyClass::userNameChanged, <span class="keyword">this</span>, &amp;Widget::userChanged);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 第 1 种方法，直接调用 userName 属性的相关操作函数 */</span></span><br><span class="line">    my-&gt;<span class="built_in">setUserName</span>(<span class="string">&quot;Hank&quot;</span>);</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;userName1:&quot;</span> &lt;&lt; my-&gt;<span class="built_in">getUserName</span>();   <span class="comment">// 打印 userName 属性值</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 第 2 种方法，使用 QObject 类的 setProperty() 函数 */</span></span><br><span class="line">    my-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;userName&quot;</span>, <span class="string">&quot;Uinika&quot;</span>);</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;userName2:&quot;</span> &lt;&lt; my-&gt;<span class="built_in">property</span>(<span class="string">&quot;userName&quot;</span>).<span class="built_in">toString</span>();   <span class="comment">// 打印 userName 属性值，这里使用了 QObject 类的 property() 函数，其返回值类型为 QVariant</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 设置动态属性 myValue，仅对该实例 my 有效 */</span></span><br><span class="line">    my-&gt;<span class="built_in">setProperty</span>(<span class="string">&quot;myValue&quot;</span>, <span class="number">2020</span>);</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;myValue:&quot;</span> &lt;&lt; my-&gt;<span class="built_in">property</span>(<span class="string">&quot;myValue&quot;</span>).<span class="built_in">toInt</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 定义处理 userName 属性值变化的槽函数 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Widget::userChanged</span><span class="params">(QString userName)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;user changed:&quot;</span> &lt;&lt; userName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="widget.ui-7">widget.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="对象树与所有权">对象树与所有权</h3>
<p>Qt 使用<strong>对象树</strong>（(Object
Tree)[https://doc.qt.io/qt-5/objecttrees.html]）来组织管理所有<code>QObject</code>及其子类对象，当创建
1
个<code>QObject</code>时，如果使用其它对象作为其<strong>父对象</strong>，那么该<code>QObject</code>就会被添加至这个父对象的<code>children()</code>列表；销毁父对象时，<code>QObject</code>也会自动销毁，这样的机制非常适合于管理
GUI
对象。例如：<code>QShortcut</code>键盘快捷键对象是某个窗口的子对象，当用户关闭该窗口时，快捷键对象也会被销毁。</p>
<p><code>QWidget</code>作为 <strong>Qt Widgets</strong>
模块的基础类，扩展了对象之间的继承关系。由于该子对象需要显示在父部件的坐标系统当中，所以一个子对象同时也是一个子部件。例如：当一个消息对话框关闭后需要进行销毁时，其中的按钮与标签也会被一同销毁。这也正是开发人员所希望的，因为按钮和标签是消息对话框的子部件。当然，也可以手动销毁一个子对象，此时会将该子对象从对应的父对象当中被移除。</p>
<p><img src="/C&C++/Qt-Widgets/Object/7.png"></p>
<p>新建名称为<code>myownership</code>的 Qt Widgets
工程，基类选择<code>QWidget</code>，类名保持<code>Widget</code>不变；然后向工程添加
C++
类文件<code>MyButton</code>，其基类指定为<code>QPushButton</code>。</p>
<h4 id="myownership.pro">myownership.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = myownership</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp \</span><br><span class="line">           widget.cpp \</span><br><span class="line">           mybutton.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += widget.h \</span><br><span class="line">            mybutton.h</span><br><span class="line"></span><br><span class="line">FORMS    += widget.ui</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-18">main.cpp</h4>
<p>规范的 Qt
程序，需要在<code>main()</code>函数中将<strong>主窗口部件</strong>创建在栈上（例如下面代码里的<code>Widget w;</code>），而非创建在堆上（使用<code>new</code>操作符）。而其它窗口小部件则可以通过<code>new</code>操作符创建在堆上，不过一定要指定其<strong>父部件</strong>，这样就无需再使用<code>delete</code>操作符手动销毁该对象。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    Widget w;   <span class="comment">// 由于没有使用 new 操作符，所以 Widget 建立在栈上，所以变量 w 会在关闭程序时自动销毁</span></span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mybutton.h">mybutton.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MYBUTTON_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MYBUTTON_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPushButton&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyButton</span> : <span class="keyword">public</span> QPushButton &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MyButton</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MyButton</span>();   <span class="comment">// 声明 MyButton 类的析构函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MYBUTTON_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mybutton.cpp">mybutton.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mybutton.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line">MyButton::<span class="built_in">MyButton</span>(QWidget *parent) : <span class="built_in">QPushButton</span>(parent) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 析构函数实现 */</span></span><br><span class="line">MyButton::~<span class="built_in">MyButton</span>() &#123;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;delete button&quot;</span>;   <span class="comment">// MyButton 对象被销毁时打印信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="widget.h-11">widget.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> WIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Widget</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Widget</span> : <span class="keyword">public</span> QWidget &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">Widget</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">Widget</span>();   <span class="comment">// 声明 Widget 类的析构函数</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::Widget *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// WIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="widget.cpp-11">widget.cpp</h4>
<p>除此之外，还存在一种重定义父部件的情况，例如将包含有其它小部件的布局管理器添加至一个窗口部件上，那么该布局管理器和其中所有小部件都会自动将它们的父部件切换为该窗口部件。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mybutton.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QHBoxLayout&gt;</span></span></span><br><span class="line"></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    MyButton *button = <span class="keyword">new</span> <span class="built_in">MyButton</span>(<span class="keyword">this</span>);    <span class="comment">// 使用 new 操作符创建按钮部件，并指定 Widget 类为其父部件</span></span><br><span class="line">    button-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;button&quot;</span>));</span><br><span class="line"></span><br><span class="line">    MyButton *button2 = <span class="keyword">new</span> MyButton;</span><br><span class="line">    MyButton *button3 = <span class="keyword">new</span> MyButton;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 将 MyButton 实例加入到 QHBoxLayout 水平盒子布局，从而将父部件重定义为 Widget */</span></span><br><span class="line">    QHBoxLayout *layout = <span class="keyword">new</span> QHBoxLayout;</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button2);</span><br><span class="line">    layout-&gt;<span class="built_in">addWidget</span>(button3);</span><br><span class="line">    <span class="built_in">setLayout</span>(layout);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="built_in">children</span>();   <span class="comment">// 调用 Widget 类的 children() 函数打印所有子部件的列表</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 定义 Widget 类的析构函数 */</span></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">    <span class="built_in">qDebug</span>() &lt;&lt; <span class="string">&quot;delete widget&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="widget.ui-8">widget.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;Widget&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Widget<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="元对象系统">元对象系统</h3>
<p>Qt 的元对象系统（<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/metaobjects.html">Meta-Object
System</a>）为对象间通信、运行时类型信息、动态属性系统提供了信号与槽机制，元对象系统的运行需要基于下面
3 个条件:</p>
<ol type="1">
<li>该类必须继承自<code>QObject</code>类；</li>
<li>类声明的私有部分中的<code>Q_OBJECT</code>宏用于启用元对象特性，例如：动态属性、信号与槽；</li>
<li>元对象编译器（MOC，Meta-Object
Compiler）为每个<code>QObject</code>子类实现元对象特性提供必需的代码；</li>
</ol>
<p>其中，元对象编译器读取一个 C++
源文件，如果发现类声明中包含<code>Q_OBJECT</code>宏，则会另外再创建一个
C++ 源文件（即工程里【debug】目录下以<code>moc_xxx.cpp</code>格式命名的
C++
源文件，其中包含了为每个类自动插入的元对象代码。元对象系统主要是为了实现信号与槽机制而引入。除此之外，元对象系统还提供了一些其它的特性：</p>
<ul>
<li><code>QObject::metaObject()</code>：返回类的关联元对象；</li>
<li><code>QMetaObject::className()</code>：运行时将类名以字符串格式返回，而无需通过
C++ 编译器获取<strong>原生运行时类型信息</strong>（RTTI）的支持；</li>
<li><code>QObject::inherits()</code>：判断并返回某个对象是否为<code>QObject</code>继承树上
1 个的类实例；</li>
<li><code>QObject::tr()</code>和<code>QObject::trUtf8()</code>：为国际化翻译字符串；</li>
<li><code>QObject::setProperty()</code>和<code>QObject::property()</code>：根据名称动态设置和获取属性；</li>
<li><code>QMetaObject::newInstance()</code>：构造一个类的新实例；</li>
</ul>
<p>除此之外，还可以使用<code>qobject_cast()</code>对<code>QObject</code>类上进行强制动态类型转换，<code>qobject_cast()</code>函数的行为类似于标准
C++ 当中的<code>dynamic_cast()</code>方法，但是并不需要 RTTI
支持，该函数尝试将参数转换为在尖括号中指定类型的指针，如果对象的类型正确，则返回一个非零指针；如果对象的类型不兼容，则返回<code>nullptr</code>。</p>
<p>例如，假设<code>MyWidget</code>继承了<code>QWidget</code>，并且使用了<code>Q_OBJECT</code>宏声明：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QObject *obj = <span class="keyword">new</span> MyWidget;</span><br></pre></td></tr></table></figure>
<p>类型为<code>QObject *</code>的<code>obj</code>变量实质引用了一个<code>MyWidget</code>对象，因而可以对其进行适当转换：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QWidget *widget = <span class="built_in">qobject_cast</span>&lt;QWidget *&gt;(obj);</span><br></pre></td></tr></table></figure>
<p>由于<code>MyWidget</code>本质上是<code>QWidget</code>的子类，所以<code>QObject</code>可以成功将其强制类型转换为<code>QWidget</code>；同理，由于<code>obj</code>是<code>MyWidget</code>类型的实例，所以还能将其转换为<code>MyWidget *</code>：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyWidget *myWidget = <span class="built_in">qobject_cast</span>&lt;MyWidget *&gt;(obj);</span><br></pre></td></tr></table></figure>
<p>因为<code>qobject_cast()</code>并不区分内置 Qt
类型与自定义类型，所以这样的转换操作也是成功的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QLabel *label = <span class="built_in">qobject_cast</span>&lt;QLabel *&gt;(obj);   <span class="comment">// label is 0</span></span><br></pre></td></tr></table></figure>
<p>不过，上面代码对<code>QLabel</code>的强制类型转换失败了，所以这里将<code>label</code>指针设置为<code>0</code>，这使得在运行时根据不同类型处理相应的对象成为可能，正如下面代码所展示的这样：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (QLabel *label = <span class="built_in">qobject_cast</span>&lt;QLabel *&gt;(obj)) &#123;</span><br><span class="line">    label-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;Ping&quot;</span>));</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (QPushButton *button = <span class="built_in">qobject_cast</span>&lt;QPushButton *&gt;(obj)) &#123;</span><br><span class="line">    button-&gt;<span class="built_in">setText</span>(<span class="built_in">tr</span>(<span class="string">&quot;Pong!&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然可以在不使用<code>Q_OBJECT</code>宏和<strong>元对象代码</strong>的情况下使用<code>QObject</code>作为基类，但是这样会导致信号与槽以及本小节描述的其它特性不可使用。从元对象系统的角度来看，没有插入<strong>元代码</strong>（Meta
Code）的<code>QObject</code>子类相当于其最近的祖先拥有元对象代码。这意味着诸如<code>QMetaObject::className()</code>这样的方法，并不会返回类的实际名称，而是返回其祖先类的名称。</p>
<h2 id="界面风格">界面风格</h2>
<p>Qt
中的各种风格都继承自一个封装有图形界面外观的抽象基类<code>QStyle</code>，Qt
的内建小部件通过其完成了几乎所有的绘制工作，以确保在各个操作系统上运行效果与原生部件一致。例如，下图展示了<code>QComboBox</code>小部件的
9 种不同风格：</p>
<p><img src="/C&C++/Qt-Widgets/Style/1.png"></p>
<p><code>QStyleFactory</code>类可以创建一个<code>QStyle</code>对象，通过该类提供的<code>keys()</code>函数获取当前可用的风格，然后再调用<code>create()</code>函数创建<code>QStyle</code>对象。通常<code>windows</code>和<code>fusion</code>风格默认可用，其它风格则只在特定操作系统中才会有效，例如<code>windowsvista</code>和<code>macintosh</code>。</p>
<p><img src="/C&C++/Qt-Widgets/Style/2.png"></p>
<p>Qt Creator
设计模式里可以预览当前<code>.ui</code>文件对应的界面风格，这里通过具体的示例来进行说明。新建一个名为<code>mystyle</code>的
Qt Widgets
工程，类名为<code>MainWindow</code>，基类<code>QMainWindow</code>仍然保持不变。单击<code>mainwindow.ui</code>文件进入设计模式，分别向工作区拖入【Push
Button】、【Check Box】、【Spin Box】、【Horizontal Scroll Bar】、【LCD
Number】、【Progress Bar】。然后，鼠标依次选择 Qt Creator
工具栏上的【工具 → Form Editor → Preview in → Fusion
风格】菜单项即可进行相应风格的预览。</p>
<p><img src="/C&C++/Qt-Widgets/Style/3.png"></p>
<h3 id="mystyle.pro">mystyle.pro</h3>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mystyle</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp \</span><br><span class="line">           mainwindow.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mainwindow.h</span><br><span class="line"></span><br><span class="line">FORMS    += mainwindow.ui</span><br></pre></td></tr></table></figure>
<h3 id="main.cpp-19">main.cpp</h3>
<p>下面代码显式指定使用 Fusion
风格，当然也可以选择命令行运行程序时通过<code>-style fusion</code>参数进行指定。如果不希望整个应用都使用相同风格，则可以调用小部件的<code>setStyle()</code>函数来指定风格。</p>
<p>除了 Qt
提供的这些风格，还可以使用通过继承<code>QCommonStyle</code>类实现的自定义风格。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QStyleFactory&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    a.<span class="built_in">setStyle</span>(QStyleFactory::<span class="built_in">create</span>(<span class="string">&quot;fusion&quot;</span>));   <span class="comment">// 使用 Fusion 风格</span></span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mainwindow.h-3">mainwindow.h</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MainWindow</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MainWindow</span>();</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MainWindow *ui;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>
<h3 id="mainwindow.cpp-3">mainwindow.cpp</h3>
<p><code>QPalette</code>调色板类包含了小部件各种状态下的颜色组，该类通常包含<strong>激活</strong>（Active）、<strong>失效</strong>（Disabled）、<strong>非激活</strong>（Inactive）三种颜色组。所有
Qt 小部件都拥有 1
个调色板来绘制自身，每个调色板包含的颜色组如下所示：</p>
<p>创建一个新的小部件时，我们强烈建议您使用调色板中的颜色，而不是硬编码特定的颜色</p>
<ol type="1">
<li><code>QPalette::Active</code>：激活颜色组，用于获得键盘焦点的窗口；</li>
<li><code>QPalette::Inactive</code>：非激活颜色组，用于其它未获得键盘焦点的窗口；</li>
<li><code>QPalette::Disabled</code>：失效颜色组，用于因某些原因禁用的小部件（非窗口）；</li>
</ol>
<p>要改变一个应用程序的调色板，可以先使用<code>QApplication:palette()</code>函数来获取调色板，完成修改后再调用<code>QApplication:setPalette()</code>函数使用该调色板。更改应用程序调色板会影响到该程序的所有小部件，如果仅需改变某个小部件的调色板，则可以调用其<code>palette()</code>以及<code>setPalette()</code>函数，这样仅会影响该小部件本身及其子部件。</p>
<p>设置调色板颜色可以使用<code>QPalette::setColor(QPalette::ColorRole role, const QColor &amp;color)</code>函数，该函数的<code>ColorRole</code>参数表示颜色角色，例如背景颜色、文本颜色等，主要的颜色角色如下表所示：</p>
<table>
<colgroup>
<col style="width: 25%">
<col style="width: 11%">
<col style="width: 63%">
</colgroup>
<thead>
<tr class="header">
<th>常量</th>
<th>值</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>QPalette::Window</code></td>
<td><code>10</code></td>
<td>通用的背景颜色；</td>
</tr>
<tr class="even">
<td><code>QPalette::Background</code></td>
<td><code>Window</code></td>
<td>（已废弃）使用<code>QPalette::Window</code>代替；</td>
</tr>
<tr class="odd">
<td><code>QPalette::WindowText</code></td>
<td><code>0</code></td>
<td>通用的前景颜色；</td>
</tr>
<tr class="even">
<td><code>QPalette::Foreground</code></td>
<td><code>WindowText</code></td>
<td>（已废弃）使用<code>WindowText</code>代替；</td>
</tr>
<tr class="odd">
<td><code>QPalette::Base</code></td>
<td><code>9</code></td>
<td>主要作为文本输入部件的背景颜色，也可以用于；</td>
</tr>
<tr class="even">
<td><code>QPalette::AlternateBase</code></td>
<td><code>16</code></td>
<td>在交替行颜色的视图里面，作为交替的背景颜色；</td>
</tr>
<tr class="odd">
<td><code>QPalette::ToolTipBase</code></td>
<td><code>18</code></td>
<td>作为<code>QToolTip</code>和<code>QWhatsThis</code>的背景色；</td>
</tr>
<tr class="even">
<td><code>QPalette::ToolTipText</code></td>
<td><code>19</code></td>
<td>作为<code>QToolTip</code>和<code>QWhatsThis</code>的前景色；</td>
</tr>
<tr class="odd">
<td><code>QPalette::PlaceholderText</code></td>
<td><code>20</code></td>
<td>用作各种文本输入小部件的占位符颜色；</td>
</tr>
<tr class="even">
<td><code>QPalette::Text</code></td>
<td><code>6</code></td>
<td>与<code>QPalette::Base</code>一起使用时作为前景色；</td>
</tr>
<tr class="odd">
<td><code>QPalette::Button</code></td>
<td><code>1</code></td>
<td>按钮小部件的背景色；</td>
</tr>
<tr class="even">
<td><code>QPalette::ButtonText</code></td>
<td><code>8</code></td>
<td>按钮小部件的前景色；</td>
</tr>
<tr class="odd">
<td><code>QPalette::BrightText</code></td>
<td><code>7</code></td>
<td>高亮文本，用于与深色形成良好的对比度；通常用于需要提高对比度的位置；</td>
</tr>
</tbody>
</table>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QStyleFactory&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QPalette&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) : <span class="built_in">QMainWindow</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    ui-&gt;progressBar-&gt;<span class="built_in">setStyle</span>(QStyleFactory::<span class="built_in">create</span>(<span class="string">&quot;windows&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 更新 pushButton 小部件调色板 */</span></span><br><span class="line">    QPalette palette1 = ui-&gt;pushButton-&gt;<span class="built_in">palette</span>();                   <span class="comment">// 通过 pushButton 的 palette() 获取调色板</span></span><br><span class="line">    palette<span class="number">1.</span><span class="built_in">setColor</span>(QPalette::ButtonText, Qt::red);                <span class="comment">// 设置按钮文本为【红色】</span></span><br><span class="line">    palette<span class="number">1.</span><span class="built_in">setColor</span>(QPalette::Button, Qt::green);                  <span class="comment">// 设置按钮背景为【绿色】</span></span><br><span class="line">    ui-&gt;pushButton-&gt;<span class="built_in">setPalette</span>(palette1);                            <span class="comment">// 设置 pushButton 修改后的调色板</span></span><br><span class="line">    ui-&gt;spinBox-&gt;<span class="built_in">setDisabled</span>(<span class="literal">true</span>);                                  <span class="comment">// 设置 spinBox 为不可用状态</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 更新 spinBox 小部件调色板 */</span></span><br><span class="line">    QPalette palette2 = ui-&gt;spinBox-&gt;<span class="built_in">palette</span>();                      <span class="comment">// 通过 spinBox 的 palette() 获取调色板</span></span><br><span class="line">    palette<span class="number">2.</span><span class="built_in">setColor</span>(QPalette::Disabled,QPalette::Base,Qt::blue);   <span class="comment">// 设置 spinBox 处于不可用状态时的背景为蓝色</span></span><br><span class="line">    ui-&gt;spinBox-&gt;<span class="built_in">setPalette</span>(palette2);                               <span class="comment">// 设置 spinBox 修改后的调色板</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mainwindow.ui-3">mainwindow.ui</h3>
<p>Qt Creator
设计模式中添加到界面上的小部件，可以通过修改属性编辑器中的<code>palette</code>属性来设置其调色板，这样还可以方便的预览修改以后的效果。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMainWindow&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MainWindow&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;centralWidget&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>75<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>PushButton<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QCheckBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;checkBox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>180<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>50<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>71<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>CheckBox<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSpinBox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;spinBox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>130<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>42<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QScrollBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;horizontalScrollBar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>140<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>130<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>160<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>16<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Horizontal<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QLCDNumber&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lcdNumber&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>190<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>64<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QProgressBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;progressBar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>180<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>190<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>118<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>23<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;value&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">number</span>&gt;</span>24<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMenuBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;menuBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QToolBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mainToolBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;toolBarArea&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>TopToolBarArea<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;toolBarBreak&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QStatusBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;statusBar&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="样式表">样式表</h2>
<p>Qt
样式表可以用于自定义小部件的外观，除了可以通过继承<code>QStyle</code>进行修改的外观特性，其它都可以通过
Qt 样式表进行美化。Qt
样式表即可以通过调用<code>QApplication:setStyleSheet()</code>函数将其设置到整个应用程序，也可以使用<code>QWidget::setStyleSheet()</code>函数将其设置到一个具体的小部件或者其子部件，如果在不同的继承级别都设置有样式表，则
Qt 会层叠使用全部的有效样式。</p>
<p>新建 Qt Widgets
工程<code>mystylesheets</code>，类名为<code>MainWindow</code>，基类为<code>QMainWindow</code>。</p>
<h3 id="代码添加样式">代码添加样式</h3>
<p>进入 Qt Creator 设计模式，向工作区拖入【Push Button】和【Horizontal
Slider】，然后向<code>mainwindow.cpp</code>的构造函数添加如下代码：</p>
<p><img src="/C&C++/Qt-Widgets/Style/4.gif"></p>
<h4 id="mainwindow.cpp-4">mainwindow.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 向 MainWindow 构造函数添加如下代码： */</span></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) : <span class="built_in">QMainWindow</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 分别将 pushButton 和 horizontalSlider 小部件的背景设置为黄色与蓝色 */</span></span><br><span class="line">    ui-&gt;pushButton-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;background:yellow&quot;</span>);</span><br><span class="line">    ui-&gt;horizontalSlider-&gt;<span class="built_in">setStyleSheet</span>(<span class="string">&quot;background:blue&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 通过选择器设置 pushButton 和 horizontalSlider 小部件的背景色 */</span></span><br><span class="line">    <span class="comment">// setStyleSheet(&quot;QPushButton&#123;background:yellow&#125;QSlider&#123;background:blue&#125;&quot;);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.ui-4">mainwindow.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMainWindow&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MainWindow&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;styleSheet&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span> <span class="attr">notr</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;centralWidget&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>110<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>70<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>120<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>40<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSlider&quot;</span> <span class="attr">name</span>=<span class="string">&quot;horizontalSlider&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>160<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>280<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>6<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Horizontal<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMenuBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;menuBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QToolBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mainToolBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;toolBarArea&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>TopToolBarArea<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;toolBarBreak&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QStatusBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;statusBar&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="设计模式添加样式">设计模式添加样式</h3>
<p>释掉上面添加的代码，进入 Qt Creator
设计模式，点击工作区右键弹出菜单中的【改变样式表】选项：</p>
<p><img src="/C&C++/Qt-Widgets/Style/5.png"></p>
<p>此时将会弹出【编辑样式表】对话框，然后向其中输入如下代码，就可以得到与上面通过代码添加样式相同的效果：</p>
<p><img src="/C&C++/Qt-Widgets/Style/6.png"></p>
<p>样式表功能比调色板更为强大，并且能够不受操作平台和主题引擎的影响。</p>
<h3 id="qt-样式表语法">Qt 样式表语法</h3>
<p>Qt 样式表（Qt Style
Sheet）包含了一系列样式规则，每个样式规则由选择器（selector）和声明（declaration）两部分组成。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QPushButton &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面样式定义当中，<code>QPushButton</code>是选择器，<code>&#123;color:red&#125;</code>是声明。该样式规则指定<code>QPushButton</code>及其子类使用红色作为前景色。Qt
样式表<strong>声明部分不用区分大小写</strong>，所以<code>color</code>、<code>Color</code>、<code>COLOR</code>、<code>COloR</code>都表示相同属性。而<strong>选择器部分则需要区分大小写</strong>。可以对多个选择器指定相同声明，每个选择器都采用逗号<code>,</code>进行分隔。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">QPushButton,</span><br><span class="line">QLineEdit,</span><br><span class="line">QComboBox &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>样式的声明部分是由一系列键值对组成的列表，每个键值对之间通过分号<code>;</code>进行分隔。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QPushButton &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">  <span class="attribute">background-color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="选择器类型">选择器类型</h4>
<p>Qt 样式表支持 <strong>CSS2</strong>
里定义的所有选择器，下面的表格列出了较为常用的选择器类型：</p>
<table style="width:100%;">
<colgroup>
<col style="width: 13%">
<col style="width: 25%">
<col style="width: 61%">
</colgroup>
<thead>
<tr class="header">
<th>选择器</th>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>通用选择器</strong></td>
<td><code>*</code></td>
<td>匹配所有小部件；</td>
</tr>
<tr class="even">
<td><strong>类型选择器</strong></td>
<td><code>QPushButton</code></td>
<td>匹配所有<code>QPushButton</code>及其所有子类的实例；</td>
</tr>
<tr class="odd">
<td><strong>属性选择器</strong></td>
<td><code>QPushButton[flat="false"]</code></td>
<td>匹配<code>QPushButton</code>的属性<code>flat</code>为<code>false</code>的实例；</td>
</tr>
<tr class="even">
<td><strong>类选择器</strong></td>
<td><code>.QPushButton</code></td>
<td>匹配所有<code>QPushButton</code>实例，其作用等效于<code>*[class~="QPushButton"]</code>；</td>
</tr>
<tr class="odd">
<td><strong>ID 选择器</strong></td>
<td><code>QPushButton#okButton</code></td>
<td>匹配所有<code>QPushButton</code>当中以<code>okButton</code>作为对象名称的实例；</td>
</tr>
<tr class="even">
<td><strong>后代选择器</strong></td>
<td><code>QDialog QPushButton</code></td>
<td>匹配所有作为<code>Dialog</code>后代小部件的<code>QPushButton</code>实例；</td>
</tr>
<tr class="odd">
<td><strong>子选择器</strong></td>
<td><code>QDialog &gt; QPushButton</code></td>
<td>匹配所有作为<code>Dialog</code>直接子部件的<code>QPushButton</code>实例；</td>
</tr>
</tbody>
</table>
<h4 id="子控件选择器">子控件选择器</h4>
<p>当需要实现较为复杂的小部件样式时，可能需要访问其子部件，例如：<code>QComboBox</code>的下拉按钮或者<code>QSpinBox</code>的向上向下箭头等。选择器可以包含子控件来对部件的待定子控件应用规则，例如：
特定的小部件子控件</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QComboBox::drop-down &#123;</span><br><span class="line">  <span class="selector-tag">image</span>: <span class="built_in">url</span>(<span class="string">dropdown.png</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述的样式规则会改变所有<code>QComboBox</code>小部件的下拉按钮样式，虽然双冒号<code>::</code>语法与
CSS3 伪类选择器相似，但是显然 Qt
的子控件选择器拥有着不同的级联语义。</p>
<p><strong>子控件</strong>总是相对于<strong>引用元素</strong>来进行定位，例如：<code>QComboBox</code>小部件的<code>::drop-down</code>默认放置在<code>QComboBox</code>填充矩形的右上角，而<code>::drop-down</code>默认放置在子控件内容矩形的中心。</p>
<p>可以使用<code>subcontrol-origin</code>属性更改当前需要使用的原点矩形。例如：如果想在<code>QComboBox</code>的空白矩形中放置下拉菜单，而非默认的填充矩形，则可以编写如下代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QComboBox &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line">QComboBox::drop-down &#123;</span><br><span class="line">  subcontrol-origin: margin; // 修改边框内下拉列表的对齐方式。</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此外，还可以通过<code>width</code>和<code>height</code>来控制子控件的尺寸，注意使用<code>image</code>属性会隐式设置子控件尺寸。</p>
<p>相对定位方案（<code>position: relative</code>）允许子控件位置从其<strong>初始位置</strong>偏移，例如：<code>QComboBox</code>下拉按钮被按下时，如果希望里面的箭头发生偏移从而展示按下效果:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QComboBox::down-arrow &#123;</span><br><span class="line">    image: <span class="built_in">url</span>(down_arrow.png);</span><br><span class="line">&#125;</span><br><span class="line">QComboBox::down-arrow:pressed &#123;</span><br><span class="line">    position: relative;   <span class="comment">// 相对定位</span></span><br><span class="line">    top: <span class="number">1</span>px; left: <span class="number">1</span>px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>绝对定位方案（<code>position: absolute</code>）则允许子控件的位置和尺寸相对于<strong>引用元素</strong>进行偏移。一旦完成定位，子控件即被视为小部件，从而可以使用<strong>盒子模型</strong>进一步样式化。</p>
<h4 id="伪状态选择器">伪状态选择器</h4>
<p>伪状态选择器用于设置小部件在各种状态下的样式，其中<strong>伪状态</strong>出现在选择器末尾，中间通过冒号<code>:</code>进行分隔。例如：当鼠标悬停在<code>QPushButton</code>上时，应用如下规则:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QPushButton<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>感叹号<code>!</code>运算符用于否定伪状态，例如：当希望鼠标不悬停在<code>QRadioButton</code>上时，可以应用如下样式规则：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qradiobutton: !hover &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>伪状态可以链接调用，作用类似于隐式的逻辑与，例如：当鼠标悬停在选中的<code>QCheckBox</code>上时，可以应用如下规则:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox<span class="selector-pseudo">:hover</span><span class="selector-pseudo">:checked</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>否定的伪状态也可以出现在伪状态的链式调用当中。例如，当鼠标悬停但是并未按下<code>QPushButton</code>时，可以采用以下规则:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QPushButton<span class="selector-pseudo">:hover</span>:!pressed &#123;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>逗号运算符<code>,</code>能够让选择器起到逻辑<strong>或</strong>的作用：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">QCheckBox<span class="selector-pseudo">:hover</span>,</span><br><span class="line">QCheckBox<span class="selector-pseudo">:checked</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>伪状态</strong>可以与<strong>子控件</strong>组合起来使用：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">QComboBox::drop-down:hover &#123;</span><br><span class="line">  <span class="selector-tag">image</span>: <span class="built_in">url</span>(<span class="string">dropdown_bright.png</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="样式冲突">样式冲突</h4>
<p>当具有不同值的多条样式规则指定到相同的属性时，就会发生样式冲突，例如下面的代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QPushButton<span class="selector-id">#okButton</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: gray;</span><br><span class="line">&#125;</span><br><span class="line">QPushButton &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述 2 个规则都匹配 1
个名称为<code>okButton</code>的<code>QPushButton</code>实例，并且颜色属性存在冲突。解决冲突必须考虑到选择器的特殊性，上面例子中，<code>QPushButton#okButton</code>的描述比<code>QPushButton</code>更为具体。</p>
<p>类似地，拥有伪状态的选择器比没有伪状态的选择器更加具体。因此，下面样式表指定当鼠标悬停在<code>QPushButton</code>上时，会出现白色文本，否则就显示红色文本：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QPushButton<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line">QPushButton &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来的代码相对更为棘手，这里 2
个选择器特殊性相同。这种情况下，会认为最后出现的选择器优先级更高：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QPushButton<span class="selector-pseudo">:enabled</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">QPushButton<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果需要让第 1 条规则获得更高的优先级，那么可以让第 1
条选择器的描述变得更加具体：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QPushButton<span class="selector-pseudo">:hover</span><span class="selector-pseudo">:enabled</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">&#125;</span><br><span class="line">QPushButton<span class="selector-pseudo">:enabled</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用类型选择器的时候，也会出现类似的问题。考虑下面的例子:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QPushButton &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">QAbstractButton &#123;</span><br><span class="line">  <span class="attribute">color</span>: gray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面代码中，由于<code>QPushButton</code>继承了<code>QAbstractButton</code>，因此这
2
条样式规则都会作用于<code>QPushButton</code>实例，此时颜色属性会存在冲突。由于<code>QPushButton</code>继承自<code>QAbstractButton</code>，所以很容易知道<code>QPushButton</code>要比<code>QAbstractButton</code>更为具体。但是，对于样式表优先级的计算而言，<strong>如果所有选择器都具有相同的特殊性，那么最后出现的规则优先</strong>。换而言之，上面代码中包括<code>qpushbutton</code>在内的所有<code>QAbstractButtons</code>小部件颜色都会被设置为灰色。</p>
<p>Qt 当中样式规则的特异性同样遵循 <strong>CSS2</strong> 规范：</p>
<ul>
<li>计算选择器中 ID 属性的数量（=a）；</li>
<li>计算选择器中其他属性和伪类的数量（=b）；</li>
<li>计算选择器中有名称的元素数量（=c）；</li>
<li>被忽略的伪元素，例如<code>subcontrols</code>；</li>
</ul>
<p>将上面列表中的<code>a</code>、<code>b</code>、<code>c</code>三个数字连接起来就可以计算出选择器的优先级特性，参考如下示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*             &#123;&#125;  /* a=0 b=0 c=0 ➞ 特异性 =   0 */</span><br><span class="line">LI            &#123;&#125;  /* a=0 b=0 c=1 ➞ 特异性 =   1 */</span><br><span class="line">UL LI         &#123;&#125;  /* a=0 b=0 c=2 ➞ 特异性 =   2 */</span><br><span class="line">UL OL+LI      &#123;&#125;  /* a=0 b=0 c=3 ➞ 特异性 =   3 */</span><br><span class="line">H1 + *[REL=up]&#123;&#125;  /* a=0 b=1 c=1 ➞ 特异性 =  11 */</span><br><span class="line">UL OL LI.red  &#123;&#125;  /* a=0 b=1 c=3 ➞ 特异性 =  13 */</span><br><span class="line">LI.red.level  &#123;&#125;  /* a=0 b=2 c=1 ➞ 特异性 =  21 */</span><br><span class="line">#x34y         &#123;&#125;  /* a=1 b=0 c=0 ➞ 特异性 = 100 */</span><br></pre></td></tr></table></figure>
<h4 id="级联">级联</h4>
<p><code>QApplication</code>和其它父子小部件上都可以设置样式表，但是如果发生冲突时，<strong>小部件自身的样式表总是优先于任何继承的样式表</strong>，而不用考虑冲突规则的特殊性。考虑下面的例子，首先在<code>QApplication</code>上设置一个样式表：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qApp-&gt;setStyleSheet(&quot;QPushButton &#123; <span class="attribute">color</span>: white &#125;&quot;);</span><br></pre></td></tr></table></figure>
<p>然后，在<code>QPushButton</code>对象上设置样式表：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myPushButton-&gt;setStyleSheet(&quot;* &#123; <span class="attribute">color</span>: blue &#125;&quot;);</span><br></pre></td></tr></table></figure>
<p>上面代码中，尽管应用程序范围的样式表提供了更为具体的选择器规则，但是<code>QPushButton</code>最终仍然会展示蓝色的文本。</p>
<blockquote>
<p><strong>注意</strong>：样式表的级联是一个较为复杂的话题，更多详细信息可以参考<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/stylesheet-syntax.html">CSS2
官方规范</a>，注意 Qt 目前还没有实现<code>!important</code>；</p>
</blockquote>
<h4 id="继承">继承</h4>
<p>经典 CSS
当中，如果元素没有显式设置字体与颜色，则该元素会自动从父级继承这些样式，但是
Qt
中的小部件并不会自动从其父部件继承字体与颜色样式。例如，一个<code>QGroupBox</code>当中的<code>QPushButton</code>：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qApp-&gt;setStyleSheet(&quot;QGroupBox &#123; <span class="attribute">color</span>: red; &#125; &quot;);</span><br></pre></td></tr></table></figure>
<p>由于<code>QPushButton</code>没有显式的指定颜色，因此会保持系统颜色不变，并不会继承<code>QGroupBox</code>的颜色设置。如果需要设置<code>QGroupBox</code>及其子元素的颜色，则可以这样编写代码：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qApp-&gt;setStyleSheet(&quot;QGroupBox, QGroupBox * &#123; <span class="attribute">color</span>: red; &#125;&quot;);</span><br></pre></td></tr></table></figure>
<p>但是，如果使用<code>QWidget::setFont()</code>和<code>QWidget::setPalette()</code>设置字体到调色板，则效果将会传播至子窗口小部件。如果需要将字体和调色板像这样传播至子部件，则可以设置<code>Qt::AA_UseStyleSheetPropagationInWidgetStyles</code>标志：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QCoreApplication::<span class="built_in">setAttribute</span>(Qt::AA_UseStyleSheetPropagationInWidgetStyles, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>
<p>开启 Qt 小部件字体、调色板样式传播以后，通过 Qt
样式表修改字体与调色板，将会与手动调用<code>QWidget::setPalette()</code>和<code>QWidget::setFont()</code>效果一致，都将会导致
Qt 样式表传播到子部件。</p>
<h4 id="c-命名空间中的小部件">C++ 命名空间中的小部件</h4>
<p>类型选择器可以用于指定特定类型的小部件样式，例如：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class MyPushButton : public QPushButton &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ...</span><br><span class="line">qApp-&gt;setStyleSheet(&quot;MyPushButton &#123; <span class="attribute">background</span>: yellow; &#125;&quot;);</span><br></pre></td></tr></table></figure>
<p>Qt
样式表通过小部件的<code>QObject::className()</code>来决定何时使用类型选择器，当自定义小部件位于命名空间当中时，<code>QObject::className()</code>将会返回<code>&lt;namespace&gt;::&lt;className&gt;</code>，这样就会与子控件语法发生冲突，因此在命名空间内使用小部件类型选择器时，必须将<code>::</code>替换为<code>--</code>，正如下面这样：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">namespace ns &#123;</span><br><span class="line">    class MyPushButton : public QPushButton &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ...</span><br><span class="line">qApp-&gt;setStyleSheet(&quot;ns<span class="attr">--MyPushButton</span> &#123; <span class="attribute">background</span>: yellow; &#125;&quot;);</span><br></pre></td></tr></table></figure>
<h4 id="设置-qobject-属性">设置 QObject 属性</h4>
<p>任何可设计的<code>Q_PROPERTY</code>，都可以使用<code>qproperty-&lt;property name&gt;</code>语法来设置样式表。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MyLabel &#123;</span><br><span class="line">  qproperty-pixmap: <span class="built_in">url</span>(<span class="string">pixmap.png</span>);</span><br><span class="line">&#125;</span><br><span class="line">MyGroupBox &#123;</span><br><span class="line">  qproperty-titlecolor: <span class="built_in">rgb</span>(<span class="number">100</span>, <span class="number">200</span>, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line">QPushButton &#123;</span><br><span class="line">  qproperty-iconsize: <span class="number">20px</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：<code>qproperty</code>语法只会被计算一次，因此在<code>QPushButton:hover</code>等伪状态下无法使用<code>qproperty</code>。</p>
<h3 id="盒子模型">盒子模型</h3>
<p>Qt
样式表将每个小部件视为一个包含<code>margin</code>、<code>border</code>、<code>padding</code>、<code>content</code>四个同心矩形的<strong>框</strong>。</p>
<p><img src="/C&C++/Qt-Widgets/Style/7.png"></p>
<p><code>margin</code>、<code>border-width</code>、<code>padding</code>属性都默认为<code>0</code>，这种情况下，所有四个同心矩形完全重合在一起。</p>
<p><code>background-image</code>属性用于为小部件设置一张背景图片，默认情况下，<code>background-image</code>仅绘制<code>border</code>以内的区域，当然此特性也可以通过<code>backgroundclip</code>属性进行调整。此外，还可以通过<code>background-repeat</code>和<code>background-origin</code>属性来控制背景图片的重复方式以及原点位置。</p>
<p>背景图片默认不会跟随小部件尺寸进行伸缩，但是使用<code>border-image</code>则可以实现这一点，一旦使用该属性设置了背景图片，则可以无需再行使用<code>background-image</code>。如果<code>border-image</code>和<code>background-image</code>属性同时出现，则<code>border-image</code>将会覆盖<code>background-image</code>。</p>
<p>除此之外，<code>image</code>属性可以用来在<code>border-image</code>上面绘制图片，如果使用<code>image</code>指定的图片大小与部件的大小不匹配，那么它将不会平铺或者拉伸。图片的对齐方式可以使用<code>image-position</code>属性来设置，渲染一条样式规则的步骤如下列表所示：</p>
<ol type="1">
<li>为整个渲染操作设置剪裁（<code>border-radius</code>）；</li>
<li>绘制背景（<code>background-image</code>）；</li>
<li>绘制边框（<code>border-image</code>、<code>border</code>）；</li>
<li>绘制叠加图像（<code>image</code>）；</li>
</ol>
<h3 id="子控件">子控件</h3>
<p>小部件被认为是一个由子控件组成的层次结构，例如：<code>QComboBox</code>绘制【下拉】子控件，然后是【向下箭头】子控件，因此最终的呈现效果如下所示：</p>
<ul>
<li>渲染<code>QComboBox&#123;&#125;</code>规则；</li>
<li>渲染<code>QComboBox::drop-down&#123;&#125;</code>规则；</li>
<li>渲染<code>QComboBox::down-arrow&#123;&#125;</code>规则；</li>
</ul>
<p>子控件会共享父子关系，在<code>QComboBox</code>当中，向下箭头的父元素是【下拉】，而【下拉】父元素是小部件自身。子控件通过<code>subcontrol-position</code>和<code>subcontrol-origin</code>属性定位其在父控件中的位置。一旦完成定位，子控件就可以使用盒子模型进行样式化表达。</p>
<blockquote>
<p><strong>注意</strong>：对于<code>QComboBox</code>和<code>QScrollBar</code>之类的复杂小部件，如果一个属性或子控件是自定义的，那么其它所有的属性或者子控件也必须是自定义的。</p>
</blockquote>
<h3 id="示例动态更换-.qss-样式">示例：动态更换 .qss 样式</h3>
<p>继续沿用上一步建立的 Qt Widgets
工程<code>mystylesheets</code>，首先向工程目录添加 4 张图片，然后再添加
1 个名为<code>myresource</code>的 Qt
资源文件，完成以后再添加<code>/image</code>前缀，并将工程目录下的<code>slider.png</code>、<code>sliderHandle.png</code>、<code>image1.jpg</code>、<code>image2.jpg</code>四张图片加载进来。</p>
<p><img src="/C&C++/Qt-Widgets/Style/8.png"></p>
<p>Qt
样式表可以存放在<code>.qss</code>文件当中，通过在程序中调用不同的<code>.qss</code>文件从而实现动态换肤功能。鼠标右键选择【Add
New...】向工程添加文件，然后选择【General】分类当中的【Empty
File】，分别建立<code>style1.qss</code>和<code>style2.qss</code>两个文件用于放置不同的样式规则。</p>
<p><img src="/C&C++/Qt-Widgets/Style/9.png"></p>
<p>鼠标右键选择<code>myresource.qrc</code>文件，选择弹出菜单中的【Open
With -&gt;
资源编辑器】，打开资源文件添加一个<code>/qss</code>前缀，再选择工作区中的【Add
Files】将刚才建立的<code>style1.qss</code>和<code>style2.qss</code>文件分别添加到
Qt 工程当中。完成之后，程序运行的效果如下图所示：</p>
<p><img src="/C&C++/Qt-Widgets/Style/10.gif"></p>
<h4 id="mystylesheets.pro">mystylesheets.pro</h4>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui</span><br><span class="line"></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets</span><br><span class="line"></span><br><span class="line">TARGET = mystylesheets</span><br><span class="line">TEMPLATE = app</span><br><span class="line"></span><br><span class="line">SOURCES += main.cpp\</span><br><span class="line">        mainwindow.cpp</span><br><span class="line"></span><br><span class="line">HEADERS  += mainwindow.h</span><br><span class="line"></span><br><span class="line">FORMS    += mainwindow.ui</span><br><span class="line"></span><br><span class="line">RESOURCES += \</span><br><span class="line">          myresource.qrc</span><br><span class="line"></span><br><span class="line">DISTFILES += \</span><br><span class="line">          style1.qss \</span><br><span class="line">          style2.qss</span><br></pre></td></tr></table></figure>
<h4 id="main.cpp-20">main.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    MainWindow w;</span><br><span class="line">    w.<span class="built_in">show</span>();</span><br><span class="line">    <span class="keyword">return</span> a.<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.h-4">mainwindow.h</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> MAINWINDOW_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAINWINDOW_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QMainWindow&gt;</span></span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">QFile</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">MainWindow</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MainWindow</span> : <span class="keyword">public</span> QMainWindow &#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">explicit</span> <span class="title">MainWindow</span><span class="params">(QWidget *parent = <span class="number">0</span>)</span></span>;</span><br><span class="line">        ~<span class="built_in">MainWindow</span>();</span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">on_pushButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        Ui::MainWindow *ui;</span><br><span class="line">        QFile *qssFile;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// MAINWINDOW_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.cpp-5">mainwindow.cpp</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_mainwindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;QFile&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWindow::<span class="built_in">MainWindow</span>(QWidget *parent) : <span class="built_in">QMainWindow</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::MainWindow) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line">    qssFile = <span class="keyword">new</span> <span class="built_in">QFile</span>(<span class="string">&quot;:/qss/style1.qss&quot;</span>, <span class="keyword">this</span>);</span><br><span class="line">    qssFile-&gt;<span class="built_in">open</span>(QFile::ReadOnly);                     <span class="comment">// 以只读方式打开 qss 样式文件</span></span><br><span class="line">    QString styleSheet = <span class="built_in">QString</span>(qssFile-&gt;<span class="built_in">readAll</span>());   <span class="comment">// 读取 qss 样式文件中的所有内容</span></span><br><span class="line">    qApp-&gt;<span class="built_in">setStyleSheet</span>(styleSheet);                    <span class="comment">// 将 qss 定义的样式设置到 QApplication 样式表</span></span><br><span class="line">    qssFile-&gt;<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MainWindow::~<span class="built_in">MainWindow</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* pushButton 换肤按钮对应的信号槽 */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">MainWindow::on_pushButton_clicked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(qssFile-&gt;<span class="built_in">fileName</span>() == <span class="string">&quot;:/qss/style1.qss&quot;</span>) &#123;</span><br><span class="line">        qssFile-&gt;<span class="built_in">setFileName</span>(<span class="string">&quot;:/qss/style2.qss&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        qssFile-&gt;<span class="built_in">setFileName</span>(<span class="string">&quot;:/qss/style1.qss&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    qssFile-&gt;<span class="built_in">open</span>(QFile::ReadOnly);</span><br><span class="line">    QString styleSheet = <span class="built_in">QString</span>(qssFile-&gt;<span class="built_in">readAll</span>());</span><br><span class="line">    qApp-&gt;<span class="built_in">setStyleSheet</span>(styleSheet);</span><br><span class="line">    qssFile-&gt;<span class="built_in">close</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="mainwindow.ui-5">mainwindow.ui</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ui</span> <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">class</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMainWindow&quot;</span> <span class="attr">name</span>=<span class="string">&quot;MainWindow&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">height</span>&gt;</span>300<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;windowTitle&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>MainWindow<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;styleSheet&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">string</span> <span class="attr">notr</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QWidget&quot;</span> <span class="attr">name</span>=<span class="string">&quot;centralWidget&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QPushButton&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pushButton&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>140<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>80<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>120<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>40<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">string</span>&gt;</span>切换qss文件<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QSlider&quot;</span> <span class="attr">name</span>=<span class="string">&quot;horizontalSlider&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">x</span>&gt;</span>60<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">y</span>&gt;</span>160<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">width</span>&gt;</span>280<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">height</span>&gt;</span>6<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;orientation&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">enum</span>&gt;</span>Qt::Horizontal<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QMenuBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;menuBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;geometry&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">x</span>&gt;</span>0<span class="tag">&lt;/<span class="name">x</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">y</span>&gt;</span>0<span class="tag">&lt;/<span class="name">y</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">width</span>&gt;</span>400<span class="tag">&lt;/<span class="name">width</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">height</span>&gt;</span>22<span class="tag">&lt;/<span class="name">height</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QToolBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mainToolBar&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;toolBarArea&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">enum</span>&gt;</span>TopToolBarArea<span class="tag">&lt;/<span class="name">enum</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">attribute</span> <span class="attr">name</span>=<span class="string">&quot;toolBarBreak&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bool</span>&gt;</span>false<span class="tag">&lt;/<span class="name">bool</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">attribute</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">widget</span> <span class="attr">class</span>=<span class="string">&quot;QStatusBar&quot;</span> <span class="attr">name</span>=<span class="string">&quot;statusBar&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">layoutdefault</span> <span class="attr">spacing</span>=<span class="string">&quot;6&quot;</span> <span class="attr">margin</span>=<span class="string">&quot;11&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">resources</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">connections</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ui</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="style1.qss">style1.qss</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== 主界面背景 =====*/</span></span><br><span class="line">QMainWindow&#123;</span><br><span class="line">    <span class="comment">/*背景图片*/</span></span><br><span class="line">    background-image: <span class="built_in">url</span>(:/image/image<span class="number">1.</span>jpg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== 按钮部件 =====*/</span></span><br><span class="line">QPushButton&#123;</span><br><span class="line">    <span class="comment">/* 背景色 */</span></span><br><span class="line">    background-color: <span class="built_in">rgba</span>(<span class="number">100</span>, <span class="number">225</span>, <span class="number">100</span>, <span class="number">30</span>);</span><br><span class="line">    <span class="comment">/* 边框样式 */</span></span><br><span class="line">    border-style: outset;</span><br><span class="line">    <span class="comment">/* 边框宽度 */</span></span><br><span class="line">    border-width: <span class="number">4</span>px;</span><br><span class="line">    <span class="comment">/* 边框圆角半径 */</span></span><br><span class="line">    border-radius: <span class="number">10</span>px;</span><br><span class="line">    <span class="comment">/* 边框颜色 */</span></span><br><span class="line">    border-color: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">225</span>, <span class="number">255</span>, <span class="number">30</span>);</span><br><span class="line">    <span class="comment">/* 字体 */</span></span><br><span class="line">    font: bold <span class="number">14</span>px;</span><br><span class="line">    <span class="comment">/* 字体颜色 */</span></span><br><span class="line">    color:<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">    <span class="comment">/* 内边距 */</span></span><br><span class="line">    padding: <span class="number">6</span>px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 鼠标悬停在按钮上 */</span></span><br><span class="line">QPushButton:hover&#123;</span><br><span class="line">    background-color:<span class="built_in">rgba</span>(<span class="number">100</span>,<span class="number">255</span>,<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    border-color: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">225</span>, <span class="number">255</span>, <span class="number">200</span>);</span><br><span class="line">    color:<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 按钮被鼠标按下 */</span></span><br><span class="line">QPushButton:pressed &#123;</span><br><span class="line">    background-color:<span class="built_in">rgba</span>(<span class="number">100</span>,<span class="number">255</span>,<span class="number">100</span>, <span class="number">200</span>);</span><br><span class="line">    border-color: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">225</span>, <span class="number">255</span>, <span class="number">30</span>);</span><br><span class="line">    border-style: inset;</span><br><span class="line">    color:<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== 滑块部件 =====*/</span></span><br><span class="line"><span class="comment">/* 水平滑块手柄 */</span></span><br><span class="line">QSlider::handle:horizontal &#123;</span><br><span class="line">    image: <span class="built_in">url</span>(:/image/sliderHandle.png);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 水平滑块手柄前面部分 */</span></span><br><span class="line">QSlider::sub-page:horizontal &#123;</span><br><span class="line">    <span class="comment">/* 边框图片 */</span></span><br><span class="line">    border-image: <span class="built_in">url</span>(:/image/slider.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="style2.qss">style2.qss</h4>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== 主界面背景 =====*/</span></span><br><span class="line">QMainWindow&#123;</span><br><span class="line">    <span class="comment">/* 背景图片 */</span></span><br><span class="line">    background-image: <span class="built_in">url</span>(:/image/image<span class="number">2.</span>jpg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== 按钮部件 =====*/</span></span><br><span class="line">QPushButton&#123;</span><br><span class="line">    <span class="comment">/* 背景色 */</span></span><br><span class="line">    background-color: <span class="built_in">rgba</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">30</span>);</span><br><span class="line">    <span class="comment">/* 边框样式 */</span></span><br><span class="line">    border-style: outset;</span><br><span class="line">    <span class="comment">/* 边框宽度 */</span></span><br><span class="line">    border-width: <span class="number">4</span>px;</span><br><span class="line">    <span class="comment">/* 边框圆角半径 */</span></span><br><span class="line">    border-radius: <span class="number">10</span>px;</span><br><span class="line">    <span class="comment">/* 边框颜色 */</span></span><br><span class="line">    border-color: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">120</span>, <span class="number">120</span>, <span class="number">30</span>);</span><br><span class="line">    <span class="comment">/* 字体 */</span></span><br><span class="line">    font: bold <span class="number">14</span>px;</span><br><span class="line">    <span class="comment">/* 字体颜色 */</span></span><br><span class="line">    color:<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">    <span class="comment">/* 内边距 */</span></span><br><span class="line">    padding: <span class="number">6</span>px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 鼠标悬停在按钮上 */</span></span><br><span class="line">QPushButton:hover&#123;</span><br><span class="line">    background-color:<span class="built_in">rgba</span>(<span class="number">200</span>,<span class="number">255</span>,<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line">    border-color: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">225</span>, <span class="number">255</span>, <span class="number">200</span>);</span><br><span class="line">    color:<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">200</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 按钮被鼠标按下 */</span></span><br><span class="line">QPushButton:pressed &#123;</span><br><span class="line">    background-color:<span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>, <span class="number">200</span>);</span><br><span class="line">    border-color: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">225</span>, <span class="number">255</span>, <span class="number">30</span>);</span><br><span class="line">    border-style: inset;</span><br><span class="line">    color:<span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== 滑块部件 =====*/</span></span><br><span class="line"><span class="comment">/* 水平滑块手柄 */</span></span><br><span class="line">QSlider::handle:horizontal &#123;</span><br><span class="line">    image: <span class="built_in">url</span>(:/image/sliderHandle.png);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 水平滑块手柄前面部分 */</span></span><br><span class="line">QSlider::sub-page:horizontal &#123;</span><br><span class="line">    <span class="comment">/*边框图片*/</span></span><br><span class="line">    border-image: <span class="built_in">url</span>(:/image/slider.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<style>
a > code {
    border-bottom: 1px solid #939393;
    border-radius: 3px 3px 0 0;
}
</style>
<h2 id="调用-python3">调用 Python3</h2>
<p>如果当前使用的是 Windows
，需要向<code>.pro</code>添加如下<code>INCLUDEPATH</code>和<code>LIBS</code>配置：</p>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INCLUDEPATH += <span class="attribute">C</span>:\Software\Tech\Python\include</span><br><span class="line">LIBS += <span class="attribute">C</span>:\Software\Tech\Python\libs\python37.lib</span><br></pre></td></tr></table></figure>
<p>如果当前使用的是 Linux
，则需要向<code>.pro</code>添加如下<code>INCLUDEPATH</code>和<code>LIBS</code>配置：</p>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#INCLUDEPATH += <span class="regexp">/usr/i</span>nclude/python3<span class="number">.7</span></span><br><span class="line">#LIBS += <span class="regexp">/usr/</span>lib/python3<span class="number">.7</span>/config<span class="number">-3.7</span>m-arm-linux-gnueabihf/libpython3<span class="number">.7</span>.so</span><br></pre></td></tr></table></figure>
<p>为了避免运行时由于命名冲突出现如下错误：</p>
<figure class="highlight qt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/include/python3<span class="number">.7</span>/<span class="attribute">object.h</span>:<span class="number">448</span>: <span class="attribute">error</span>: expected unqualified-id before ‘;’ token</span><br><span class="line">     PyType_Slot *slots; <span class="comment">/* terminated by slot==0. */</span></span><br><span class="line">                       ^</span><br></pre></td></tr></table></figure>
<p>需要按照下面方式，修改 Python
安装目录下的<code>sudo vim /usr/include/python3.7/object.h</code>头文件：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">undef</span> slots            <span class="comment">// 取消 slots 定义</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span>* name;</span><br><span class="line">    <span class="type">int</span> basicsize;</span><br><span class="line">    <span class="type">int</span> itemsize;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> flags; <span class="comment">/* terminated by slot==0. */</span></span><br><span class="line">    PyType_Slot *slots;</span><br><span class="line">&#125; PyType_Spec;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> slots Q_SLOTS   <span class="comment">// 恢复 slots 宏定义与 Qt QObjectDefs.h 保持一致</span></span></span><br></pre></td></tr></table></figure>
<h3 id="初始化-python-解释器">初始化 Python 解释器</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ui_widget.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Python.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 构造函数 */</span></span><br><span class="line">Widget::<span class="built_in">Widget</span>(QWidget *parent) : <span class="built_in">QWidget</span>(parent), <span class="built_in">ui</span>(<span class="keyword">new</span> Ui::Widget) &#123;</span><br><span class="line">    ui-&gt;<span class="built_in">setupUi</span>(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 初始化 Python 解释器 */</span></span><br><span class="line">    <span class="built_in">Py_Initialize</span>();</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">Py_IsInitialized</span>())&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Python 初始化失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">PyRun_SimpleString</span>(<span class="string">&quot;import sys&quot;</span>);</span><br><span class="line">    <span class="built_in">PyRun_SimpleString</span>(<span class="string">&quot;sys.path.append(&#x27;./&#x27;)&quot;</span>);</span><br><span class="line"></span><br><span class="line">    pModule = <span class="built_in">PyImport_ImportModule</span>(<span class="string">&quot;handler&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(!pModule) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Python 文件打开失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 虚构函数 */</span></span><br><span class="line">Widget::~<span class="built_in">Widget</span>() &#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">    <span class="built_in">Py_Finalize</span>();  <span class="comment">// 撤销所有由 Py_Initialize() 所做的初始化以及随后使用的 Python/C API 函数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：目前<code>Py_Finalize()</code>的功能已经被更新版本的<code>int Py_FinalizeEx()</code>函数所代替。</p>
</blockquote>
<h3 id="调用带返回值的-python-函数">调用带返回值的 Python 函数</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* C++ */</span></span><br><span class="line">PyObject* pEncode = <span class="built_in">PyObject_GetAttrString</span>(pModule, <span class="string">&quot;compare&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(!pEncode) &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Python 函数获取失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PyObject* result = <span class="built_in">PyObject_CallFunction</span>(pEncode, <span class="literal">NULL</span>);</span><br><span class="line">string code = <span class="built_in">PyUnicode_AsUTF8</span>(result); <span class="comment">// 将 Python 函数返回值转换为 C++ 的 string 字符串类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(code == <span class="string">&quot;True&quot;</span>)&#123;</span><br><span class="line">    <span class="built_in">sendStatusBarMsg</span>(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(code == <span class="string">&quot;False&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">sendStatusBarMsg</span>(<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">compare</span>():</span><br><span class="line">    <span class="comment"># Python code</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;True&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="调用带有参数的-python-函数">调用带有参数的 Python 函数</h3>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PyObject* pCompareByString = PyObject_GetAttrString(pModule, <span class="string">&quot;compareByString&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!pCompareByString) &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Python 函数获取失败&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 生成 Python 参数对象 */</span><br><span class="line">PyObject* args = Py_BuildValue(<span class="string">&quot;ss&quot;</span>, <span class="string">&quot;serverCode&quot;</span>.toUtf8().data(), <span class="string">&quot;clientCode&quot;</span>.toUtf8().data());</span><br><span class="line"></span><br><span class="line">PyObject* compareResult = PyObject_CallObject(pCompareByString, args);</span><br><span class="line">string code = PyUnicode_AsUTF8(compareResult);</span><br></pre></td></tr></table></figure>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">compareByString</span>(<span class="params">serverCode, clientCode</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;serverCode-----&gt;&quot;</span> + serverCode)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;clientCode-----&gt;&quot;</span> + clientCode)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;False&quot;</span></span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>Qt 5 桌面应用程序开发指南 - QtWidgets 篇</p><p><a href="http://www.uinio.com/C&amp;C++/Qt-Widgets/">http://www.uinio.com/C&amp;C++/Qt-Widgets/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Hank</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-08-21</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2020-10-07</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Qt/">Qt</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Math/LaTex/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">通用 LaTeX 数学公式语法手册</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Electronics/Cadence/"><span class="level-item">写给有经验 PCB 工程师的 Cadence Allegro 极速上手指南</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#hello-qt"><span class="level-left"><span class="level-item">1</span><span class="level-item">Hello Qt</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#新建-widgets-工程"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">新建 Widgets 工程</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-版实现"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">main.cpp 版实现</span></span></a></li><li><a class="level is-mobile" href="#hellodialog.ui-版实现"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">hellodialog.ui 版实现</span></span></a></li><li><a class="level is-mobile" href="#hellodialog.cpp-版实现"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">hellodialog.cpp 版实现</span></span></a></li><li><a class="level is-mobile" href="#设计师界面类版实现"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">设计师界面类版实现</span></span></a></li><li><a class="level is-mobile" href="#qt-creator-定位器"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">Qt Creator 定位器</span></span></a></li></ul></li><li><a class="level is-mobile" href="#项目模板"><span class="level-left"><span class="level-item">2</span><span class="level-item">项目模板</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#console-application"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Console Application</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#demo.pro"><span class="level-left"><span class="level-item">2.1.1</span><span class="level-item">Demo.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp"><span class="level-left"><span class="level-item">2.1.2</span><span class="level-item">main.cpp</span></span></a></li></ul></li><li><a class="level is-mobile" href="#widgets-application"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Widgets Application</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#demo.pro-1"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">Demo.pro</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.h"><span class="level-left"><span class="level-item">2.2.2</span><span class="level-item">mainwindow.h</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.cpp"><span class="level-left"><span class="level-item">2.2.3</span><span class="level-item">mainwindow.cpp</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-1"><span class="level-left"><span class="level-item">2.2.4</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.ui"><span class="level-left"><span class="level-item">2.2.5</span><span class="level-item">mainwindow.ui</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#窗口部件"><span class="level-left"><span class="level-item">3</span><span class="level-item">窗口部件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#qwidget-基础窗口部件"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">QWidget 基础窗口部件</span></span></a></li><li><a class="level is-mobile" href="#debug-调试"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">Debug 调试</span></span></a></li><li><a class="level is-mobile" href="#qdialog-对话框"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">QDialog 对话框</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#模态与非模态"><span class="level-left"><span class="level-item">3.3.1</span><span class="level-item">模态与非模态</span></span></a></li><li><a class="level is-mobile" href="#多窗口切换"><span class="level-left"><span class="level-item">3.3.2</span><span class="level-item">多窗口切换</span></span></a></li><li><a class="level is-mobile" href="#标准对话框"><span class="level-left"><span class="level-item">3.3.3</span><span class="level-item">标准对话框</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#demo.pro-2"><span class="level-left"><span class="level-item">3.3.3.1</span><span class="level-item">demo.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-2"><span class="level-left"><span class="level-item">3.3.3.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.h"><span class="level-left"><span class="level-item">3.3.3.3</span><span class="level-item">mywidget.h</span></span></a></li><li><a class="level is-mobile" href="#mywidget.cpp"><span class="level-left"><span class="level-item">3.3.3.4</span><span class="level-item">mywidget.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.ui"><span class="level-left"><span class="level-item">3.3.3.5</span><span class="level-item">mywidget.ui</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#qframe-边框"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">QFrame 边框</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#qlabel"><span class="level-left"><span class="level-item">3.4.1</span><span class="level-item">QLabel</span></span></a></li><li><a class="level is-mobile" href="#qlcdnumber"><span class="level-left"><span class="level-item">3.4.2</span><span class="level-item">QLCDNumber</span></span></a></li><li><a class="level is-mobile" href="#qstackedwidget"><span class="level-left"><span class="level-item">3.4.3</span><span class="level-item">QStackedWidget</span></span></a></li><li><a class="level is-mobile" href="#qtoolbox"><span class="level-left"><span class="level-item">3.4.4</span><span class="level-item">QToolBox</span></span></a></li><li><a class="level is-mobile" href="#本节完整示例"><span class="level-left"><span class="level-item">3.4.5</span><span class="level-item">本节完整示例</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myframe.pro"><span class="level-left"><span class="level-item">3.4.5.1</span><span class="level-item">myframe.pro</span></span></a></li><li><a class="level is-mobile" href="#mywidget.h-1"><span class="level-left"><span class="level-item">3.4.5.2</span><span class="level-item">mywidget.h</span></span></a></li><li><a class="level is-mobile" href="#mywidget.cpp-1"><span class="level-left"><span class="level-item">3.4.5.3</span><span class="level-item">mywidget.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.ui-1"><span class="level-left"><span class="level-item">3.4.5.4</span><span class="level-item">mywidget.ui</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#qabstractbutton-按钮"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">QAbstractButton 按钮</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mybutton.pro"><span class="level-left"><span class="level-item">3.5.1</span><span class="level-item">mybutton.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-3"><span class="level-left"><span class="level-item">3.5.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.h-2"><span class="level-left"><span class="level-item">3.5.3</span><span class="level-item">mywidget.h</span></span></a></li><li><a class="level is-mobile" href="#mywidget.cpp-2"><span class="level-left"><span class="level-item">3.5.4</span><span class="level-item">mywidget.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.ui-2"><span class="level-left"><span class="level-item">3.5.5</span><span class="level-item">mywidget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#qlineedit-行编辑器"><span class="level-left"><span class="level-item">3.6</span><span class="level-item">QLineEdit 行编辑器</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mylineedit.pro"><span class="level-left"><span class="level-item">3.6.1</span><span class="level-item">mylineedit.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-4"><span class="level-left"><span class="level-item">3.6.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.h-3"><span class="level-left"><span class="level-item">3.6.3</span><span class="level-item">mywidget.h</span></span></a></li><li><a class="level is-mobile" href="#mywidget.cpp-3"><span class="level-left"><span class="level-item">3.6.4</span><span class="level-item">mywidget.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.ui-3"><span class="level-left"><span class="level-item">3.6.5</span><span class="level-item">mywidget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#qabstractspinbox-微调框"><span class="level-left"><span class="level-item">3.7</span><span class="level-item">QAbstractSpinBox 微调框</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myspinbox.pro"><span class="level-left"><span class="level-item">3.7.1</span><span class="level-item">myspinbox.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-5"><span class="level-left"><span class="level-item">3.7.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.h-4"><span class="level-left"><span class="level-item">3.7.3</span><span class="level-item">mywidget.h</span></span></a></li><li><a class="level is-mobile" href="#mywidget.cpp-4"><span class="level-left"><span class="level-item">3.7.4</span><span class="level-item">mywidget.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.ui-4"><span class="level-left"><span class="level-item">3.7.5</span><span class="level-item">mywidget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#qabstractslider-滑动块"><span class="level-left"><span class="level-item">3.8</span><span class="level-item">QAbstractSlider 滑动块</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myslider.pro"><span class="level-left"><span class="level-item">3.8.1</span><span class="level-item">myslider.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-6"><span class="level-left"><span class="level-item">3.8.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.h-5"><span class="level-left"><span class="level-item">3.8.3</span><span class="level-item">mywidget.h</span></span></a></li><li><a class="level is-mobile" href="#mywidget.cpp-5"><span class="level-left"><span class="level-item">3.8.4</span><span class="level-item">mywidget.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.ui-5"><span class="level-left"><span class="level-item">3.8.5</span><span class="level-item">mywidget.ui</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#布局管理"><span class="level-left"><span class="level-item">4</span><span class="level-item">布局管理</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#qlayout-布局类"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">QLayout 布局类</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#qboxlayout-盒子布局"><span class="level-left"><span class="level-item">4.1.1</span><span class="level-item">QBoxLayout 盒子布局</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mylayout.pro"><span class="level-left"><span class="level-item">4.1.1.1</span><span class="level-item">mylayout.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-7"><span class="level-left"><span class="level-item">4.1.1.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mywidget.h-6"><span class="level-left"><span class="level-item">4.1.1.3</span><span class="level-item">mywidget.h</span></span></a></li><li><a class="level is-mobile" href="#mywidget.cpp-6"><span class="level-left"><span class="level-item">4.1.1.4</span><span class="level-item">mywidget.cpp</span></span></a></li></ul></li><li><a class="level is-mobile" href="#qgridlayout-栅格布局"><span class="level-left"><span class="level-item">4.1.2</span><span class="level-item">QGridLayout 栅格布局</span></span></a></li><li><a class="level is-mobile" href="#qformlayout-表单布局"><span class="level-left"><span class="level-item">4.1.3</span><span class="level-item">QFormLayout 表单布局</span></span></a></li><li><a class="level is-mobile" href="#布局对小部件的处理流程"><span class="level-left"><span class="level-item">4.1.4</span><span class="level-item">布局对小部件的处理流程</span></span></a></li><li><a class="level is-mobile" href="#伸缩因子"><span class="level-left"><span class="level-item">4.1.5</span><span class="level-item">伸缩因子</span></span></a></li><li><a class="level is-mobile" href="#sizehintminimumsizehintqsizepolicy-属性"><span class="level-left"><span class="level-item">4.1.6</span><span class="level-item">sizeHint/minimumSizeHint/QSizePolicy
属性</span></span></a></li><li><a class="level is-mobile" href="#综合使用布局"><span class="level-left"><span class="level-item">4.1.7</span><span class="level-item">综合使用布局</span></span></a></li></ul></li><li><a class="level is-mobile" href="#qsplitter-分裂器类"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">QSplitter 分裂器类</span></span></a></li><li><a class="level is-mobile" href="#edit-buddies"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">Edit Buddies</span></span></a></li><li><a class="level is-mobile" href="#edit-tab-order"><span class="level-left"><span class="level-item">4.4</span><span class="level-item">Edit Tab Order</span></span></a></li></ul></li><li><a class="level is-mobile" href="#主窗口"><span class="level-left"><span class="level-item">5</span><span class="level-item">主窗口</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#示例多窗口编辑器"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">示例：多窗口编辑器</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myimages.qrc"><span class="level-left"><span class="level-item">5.1.1</span><span class="level-item">myimages.qrc</span></span></a></li><li><a class="level is-mobile" href="#mymainwindow.pro"><span class="level-left"><span class="level-item">5.1.2</span><span class="level-item">mymainwindow.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-8"><span class="level-left"><span class="level-item">5.1.3</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.h-1"><span class="level-left"><span class="level-item">5.1.4</span><span class="level-item">mainwindow.h</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.cpp-1"><span class="level-left"><span class="level-item">5.1.5</span><span class="level-item">mainwindow.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.ui-1"><span class="level-left"><span class="level-item">5.1.6</span><span class="level-item">mainwindow.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#示例自定义菜单"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">示例：自定义菜单</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myaction.pro"><span class="level-left"><span class="level-item">5.2.1</span><span class="level-item">myaction.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-9"><span class="level-left"><span class="level-item">5.2.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#myaction.h"><span class="level-left"><span class="level-item">5.2.3</span><span class="level-item">myaction.h</span></span></a></li><li><a class="level is-mobile" href="#myaction.cpp"><span class="level-left"><span class="level-item">5.2.4</span><span class="level-item">myaction.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.h-2"><span class="level-left"><span class="level-item">5.2.5</span><span class="level-item">mainwindow.h</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.cpp-2"><span class="level-left"><span class="level-item">5.2.6</span><span class="level-item">mainwindow.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.ui-2"><span class="level-left"><span class="level-item">5.2.7</span><span class="level-item">mainwindow.ui</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#事件系统"><span class="level-left"><span class="level-item">6</span><span class="level-item">事件系统</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#事件的传递"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">事件的传递</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#示例嵌套小部件之间的事件传递"><span class="level-left"><span class="level-item">6.1.1</span><span class="level-item">示例：嵌套小部件之间的事件传递</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myevent.pro"><span class="level-left"><span class="level-item">6.1.1.1</span><span class="level-item">myevent.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-10"><span class="level-left"><span class="level-item">6.1.1.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mylineedit.h"><span class="level-left"><span class="level-item">6.1.1.3</span><span class="level-item">mylineedit.h</span></span></a></li><li><a class="level is-mobile" href="#mylineedit.cpp"><span class="level-left"><span class="level-item">6.1.1.4</span><span class="level-item">mylineedit.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h"><span class="level-left"><span class="level-item">6.1.1.5</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp"><span class="level-left"><span class="level-item">6.1.1.6</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui"><span class="level-left"><span class="level-item">6.1.1.7</span><span class="level-item">widget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#示例带有过滤器的嵌套小部件事件传递"><span class="level-left"><span class="level-item">6.1.2</span><span class="level-item">示例：带有过滤器的嵌套小部件事件传递</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mylineedit.h-1"><span class="level-left"><span class="level-item">6.1.2.1</span><span class="level-item">mylineedit.h</span></span></a></li><li><a class="level is-mobile" href="#mylineedit.cpp-1"><span class="level-left"><span class="level-item">6.1.2.2</span><span class="level-item">mylineedit.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h-1"><span class="level-left"><span class="level-item">6.1.2.3</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-1"><span class="level-left"><span class="level-item">6.1.2.4</span><span class="level-item">widget.cpp</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#鼠标与滚轮事件"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">鼠标与滚轮事件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mymouseevent.pro"><span class="level-left"><span class="level-item">6.2.1</span><span class="level-item">mymouseevent.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-11"><span class="level-left"><span class="level-item">6.2.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h-2"><span class="level-left"><span class="level-item">6.2.3</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-2"><span class="level-left"><span class="level-item">6.2.4</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui-1"><span class="level-left"><span class="level-item">6.2.5</span><span class="level-item">widget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#键盘事件"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">键盘事件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#示例ctrlm-窗口最大化"><span class="level-left"><span class="level-item">6.3.1</span><span class="level-item">示例：Ctrl+M 窗口最大化</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mykeyevent.pro"><span class="level-left"><span class="level-item">6.3.1.1</span><span class="level-item">mykeyevent.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-12"><span class="level-left"><span class="level-item">6.3.1.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h-3"><span class="level-left"><span class="level-item">6.3.1.3</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-3"><span class="level-left"><span class="level-item">6.3.1.4</span><span class="level-item">widget.cpp</span></span></a></li></ul></li><li><a class="level is-mobile" href="#示例方向键组合移动按钮"><span class="level-left"><span class="level-item">6.3.2</span><span class="level-item">示例：方向键组合移动按钮</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#widget.h-4"><span class="level-left"><span class="level-item">6.3.2.1</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-4"><span class="level-left"><span class="level-item">6.3.2.2</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui-2"><span class="level-left"><span class="level-item">6.3.2.3</span><span class="level-item">widget.ui</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#定时器事件"><span class="level-left"><span class="level-item">6.4</span><span class="level-item">定时器事件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#示例打印定时器溢出信息"><span class="level-left"><span class="level-item">6.4.1</span><span class="level-item">示例：打印定时器溢出信息</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mytimerevent.pro"><span class="level-left"><span class="level-item">6.4.1.1</span><span class="level-item">mytimerevent.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-13"><span class="level-left"><span class="level-item">6.4.1.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h-5"><span class="level-left"><span class="level-item">6.4.1.3</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-5"><span class="level-left"><span class="level-item">6.4.1.4</span><span class="level-item">widget.cpp</span></span></a></li></ul></li><li><a class="level is-mobile" href="#示例数码管动态时间显示"><span class="level-left"><span class="level-item">6.4.2</span><span class="level-item">示例：数码管动态时间显示</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#widget.h-6"><span class="level-left"><span class="level-item">6.4.2.1</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-6"><span class="level-left"><span class="level-item">6.4.2.2</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui-3"><span class="level-left"><span class="level-item">6.4.2.3</span><span class="level-item">widget.ui</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#事件过滤器"><span class="level-left"><span class="level-item">6.5</span><span class="level-item">事件过滤器</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myeventfilter.pro"><span class="level-left"><span class="level-item">6.5.1</span><span class="level-item">myeventfilter.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-14"><span class="level-left"><span class="level-item">6.5.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h-7"><span class="level-left"><span class="level-item">6.5.3</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-7"><span class="level-left"><span class="level-item">6.5.4</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui-4"><span class="level-left"><span class="level-item">6.5.5</span><span class="level-item">widget.ui</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#对象模型"><span class="level-left"><span class="level-item">7</span><span class="level-item">对象模型</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#信号与槽"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">信号与槽</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#示例手动关联信号与槽"><span class="level-left"><span class="level-item">7.1.1</span><span class="level-item">示例：手动关联信号与槽</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mysignalslot.pro"><span class="level-left"><span class="level-item">7.1.1.1</span><span class="level-item">mysignalslot.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-15"><span class="level-left"><span class="level-item">7.1.1.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mydialog.h"><span class="level-left"><span class="level-item">7.1.1.3</span><span class="level-item">mydialog.h</span></span></a></li><li><a class="level is-mobile" href="#mydialog.cpp"><span class="level-left"><span class="level-item">7.1.1.4</span><span class="level-item">mydialog.cpp</span></span></a></li><li><a class="level is-mobile" href="#mydialog.ui"><span class="level-left"><span class="level-item">7.1.1.5</span><span class="level-item">mydialog.ui</span></span></a></li><li><a class="level is-mobile" href="#widget.h-8"><span class="level-left"><span class="level-item">7.1.1.6</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-8"><span class="level-left"><span class="level-item">7.1.1.7</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui-5"><span class="level-left"><span class="level-item">7.1.1.8</span><span class="level-item">widget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#示例自动关联信号与槽"><span class="level-left"><span class="level-item">7.1.2</span><span class="level-item">示例：自动关联信号与槽</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mysignalslot.pro-1"><span class="level-left"><span class="level-item">7.1.2.1</span><span class="level-item">mysignalslot.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-16"><span class="level-left"><span class="level-item">7.1.2.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h-9"><span class="level-left"><span class="level-item">7.1.2.3</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-9"><span class="level-left"><span class="level-item">7.1.2.4</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui-6"><span class="level-left"><span class="level-item">7.1.2.5</span><span class="level-item">widget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#disconnect-静态函数"><span class="level-left"><span class="level-item">7.1.3</span><span class="level-item">disconnect() 静态函数</span></span></a></li><li><a class="level is-mobile" href="#qsignalmapper-类"><span class="level-left"><span class="level-item">7.1.4</span><span class="level-item">QSignalMapper 类</span></span></a></li></ul></li><li><a class="level is-mobile" href="#属性系统"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">属性系统</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myproperty.pro"><span class="level-left"><span class="level-item">7.2.1</span><span class="level-item">myproperty.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-17"><span class="level-left"><span class="level-item">7.2.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#myclass.h"><span class="level-left"><span class="level-item">7.2.3</span><span class="level-item">myclass.h</span></span></a></li><li><a class="level is-mobile" href="#myclass.cpp"><span class="level-left"><span class="level-item">7.2.4</span><span class="level-item">myclass.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h-10"><span class="level-left"><span class="level-item">7.2.5</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-10"><span class="level-left"><span class="level-item">7.2.6</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui-7"><span class="level-left"><span class="level-item">7.2.7</span><span class="level-item">widget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#对象树与所有权"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">对象树与所有权</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#myownership.pro"><span class="level-left"><span class="level-item">7.3.1</span><span class="level-item">myownership.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-18"><span class="level-left"><span class="level-item">7.3.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mybutton.h"><span class="level-left"><span class="level-item">7.3.3</span><span class="level-item">mybutton.h</span></span></a></li><li><a class="level is-mobile" href="#mybutton.cpp"><span class="level-left"><span class="level-item">7.3.4</span><span class="level-item">mybutton.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.h-11"><span class="level-left"><span class="level-item">7.3.5</span><span class="level-item">widget.h</span></span></a></li><li><a class="level is-mobile" href="#widget.cpp-11"><span class="level-left"><span class="level-item">7.3.6</span><span class="level-item">widget.cpp</span></span></a></li><li><a class="level is-mobile" href="#widget.ui-8"><span class="level-left"><span class="level-item">7.3.7</span><span class="level-item">widget.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#元对象系统"><span class="level-left"><span class="level-item">7.4</span><span class="level-item">元对象系统</span></span></a></li></ul></li><li><a class="level is-mobile" href="#界面风格"><span class="level-left"><span class="level-item">8</span><span class="level-item">界面风格</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mystyle.pro"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">mystyle.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-19"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.h-3"><span class="level-left"><span class="level-item">8.3</span><span class="level-item">mainwindow.h</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.cpp-3"><span class="level-left"><span class="level-item">8.4</span><span class="level-item">mainwindow.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.ui-3"><span class="level-left"><span class="level-item">8.5</span><span class="level-item">mainwindow.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#样式表"><span class="level-left"><span class="level-item">9</span><span class="level-item">样式表</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#代码添加样式"><span class="level-left"><span class="level-item">9.1</span><span class="level-item">代码添加样式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mainwindow.cpp-4"><span class="level-left"><span class="level-item">9.1.1</span><span class="level-item">mainwindow.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.ui-4"><span class="level-left"><span class="level-item">9.1.2</span><span class="level-item">mainwindow.ui</span></span></a></li></ul></li><li><a class="level is-mobile" href="#设计模式添加样式"><span class="level-left"><span class="level-item">9.2</span><span class="level-item">设计模式添加样式</span></span></a></li><li><a class="level is-mobile" href="#qt-样式表语法"><span class="level-left"><span class="level-item">9.3</span><span class="level-item">Qt 样式表语法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#选择器类型"><span class="level-left"><span class="level-item">9.3.1</span><span class="level-item">选择器类型</span></span></a></li><li><a class="level is-mobile" href="#子控件选择器"><span class="level-left"><span class="level-item">9.3.2</span><span class="level-item">子控件选择器</span></span></a></li><li><a class="level is-mobile" href="#伪状态选择器"><span class="level-left"><span class="level-item">9.3.3</span><span class="level-item">伪状态选择器</span></span></a></li><li><a class="level is-mobile" href="#样式冲突"><span class="level-left"><span class="level-item">9.3.4</span><span class="level-item">样式冲突</span></span></a></li><li><a class="level is-mobile" href="#级联"><span class="level-left"><span class="level-item">9.3.5</span><span class="level-item">级联</span></span></a></li><li><a class="level is-mobile" href="#继承"><span class="level-left"><span class="level-item">9.3.6</span><span class="level-item">继承</span></span></a></li><li><a class="level is-mobile" href="#c-命名空间中的小部件"><span class="level-left"><span class="level-item">9.3.7</span><span class="level-item">C++ 命名空间中的小部件</span></span></a></li><li><a class="level is-mobile" href="#设置-qobject-属性"><span class="level-left"><span class="level-item">9.3.8</span><span class="level-item">设置 QObject 属性</span></span></a></li></ul></li><li><a class="level is-mobile" href="#盒子模型"><span class="level-left"><span class="level-item">9.4</span><span class="level-item">盒子模型</span></span></a></li><li><a class="level is-mobile" href="#子控件"><span class="level-left"><span class="level-item">9.5</span><span class="level-item">子控件</span></span></a></li><li><a class="level is-mobile" href="#示例动态更换-.qss-样式"><span class="level-left"><span class="level-item">9.6</span><span class="level-item">示例：动态更换 .qss 样式</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#mystylesheets.pro"><span class="level-left"><span class="level-item">9.6.1</span><span class="level-item">mystylesheets.pro</span></span></a></li><li><a class="level is-mobile" href="#main.cpp-20"><span class="level-left"><span class="level-item">9.6.2</span><span class="level-item">main.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.h-4"><span class="level-left"><span class="level-item">9.6.3</span><span class="level-item">mainwindow.h</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.cpp-5"><span class="level-left"><span class="level-item">9.6.4</span><span class="level-item">mainwindow.cpp</span></span></a></li><li><a class="level is-mobile" href="#mainwindow.ui-5"><span class="level-left"><span class="level-item">9.6.5</span><span class="level-item">mainwindow.ui</span></span></a></li><li><a class="level is-mobile" href="#style1.qss"><span class="level-left"><span class="level-item">9.6.6</span><span class="level-item">style1.qss</span></span></a></li><li><a class="level is-mobile" href="#style2.qss"><span class="level-left"><span class="level-item">9.6.7</span><span class="level-item">style2.qss</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#调用-python3"><span class="level-left"><span class="level-item">10</span><span class="level-item">调用 Python3</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#初始化-python-解释器"><span class="level-left"><span class="level-item">10.1</span><span class="level-item">初始化 Python 解释器</span></span></a></li><li><a class="level is-mobile" href="#调用带返回值的-python-函数"><span class="level-left"><span class="level-item">10.2</span><span class="level-item">调用带返回值的 Python 函数</span></span></a></li><li><a class="level is-mobile" href="#调用带有参数的-python-函数"><span class="level-left"><span class="level-item">10.3</span><span class="level-item">调用带有参数的 Python 函数</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/C-C-%E8%AF%AD%E8%A8%80/"><span class="level-start"><span class="level-item">C/C++ 语言</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="level-start"><span class="level-item">Linux 操作系统</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/Python-%E8%AF%AD%E8%A8%80/"><span class="level-start"><span class="level-item">Python 语言</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/UINIO-%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E8%B5%84%E6%96%99/"><span class="level-start"><span class="level-item">UINIO 开源项目资料</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Web-%E5%BC%80%E5%8F%91/"><span class="level-start"><span class="level-item">Web 开发</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%BA%A7%E4%B8%9A%E7%BB%8F%E6%B5%8E/"><span class="level-start"><span class="level-item">产业经济</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%A4%96%E8%A7%82%E4%B8%8E%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/"><span class="level-start"><span class="level-item">外观与结构设计</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%9B%BA%E4%BB%B6/"><span class="level-start"><span class="level-item">嵌入式固件</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"><span class="level-start"><span class="level-item">开发环境配置</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%95%B0%E5%AD%A6/"><span class="level-start"><span class="level-item">数学</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/"><span class="level-start"><span class="level-item">版本管理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB%E6%97%A5%E5%B8%B8/"><span class="level-start"><span class="level-item">生活日常</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%A1%AC%E4%BB%B6%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">硬件电子技术</span></span><span class="level-end"><span class="level-item tag">24</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%AE%97%E6%B3%95/"><span class="level-start"><span class="level-item">算法</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%8B%B1%E8%AF%AD/"><span class="level-start"><span class="level-item">英语</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"><span class="level-start"><span class="level-item">软件工具</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/Electronics/Motor-PWM/"><img src="/Electronics/Motor-PWM/logo.png" alt="直流无刷电机的 PWM 驱动控制原理简述"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-11-06T16:00:00.000Z">2024-11-07</time></p><p class="title"><a href="/Electronics/Motor-PWM/">直流无刷电机的 PWM 驱动控制原理简述</a></p><p class="categories"><a href="/categories/%E7%A1%AC%E4%BB%B6%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF/">硬件电子技术</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Electronics/E-Series/"><img src="/Electronics/E-Series/logo.png" alt="美国电子工业联盟 E 系列标准参数值速查手册"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-11-05T16:00:00.000Z">2024-11-06</time></p><p class="title"><a href="/Electronics/E-Series/">美国电子工业联盟 E 系列标准参数值速查手册</a></p><p class="categories"><a href="/categories/%E7%A1%AC%E4%BB%B6%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF/">硬件电子技术</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Electronics/TVS/"><img src="/Electronics/TVS/logo.png" alt="瞬态电压抑制二极管 TVS 选型简述"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-09-05T16:00:00.000Z">2024-09-06</time></p><p class="title"><a href="/Electronics/TVS/">瞬态电压抑制二极管 TVS 选型简述</a></p><p class="categories"><a href="/categories/%E7%A1%AC%E4%BB%B6%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF/">硬件电子技术</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Electronics/Battery/"><img src="/Electronics/Battery/logo.png" alt="锂离子电池技术参数简明选型指南"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-08-28T16:00:00.000Z">2024-08-29</time></p><p class="title"><a href="/Electronics/Battery/">锂离子电池技术参数简明选型指南</a></p><p class="categories"><a href="/categories/%E7%A1%AC%E4%BB%B6%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF/">硬件电子技术</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Electronics/LTspice/"><img src="/Electronics/LTspice/logo.png" alt="如何使用新版本的 LTspice 进行模拟电路仿真"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-05-21T16:00:00.000Z">2024-05-22</time></p><p class="title"><a href="/Electronics/LTspice/">如何使用新版本的 LTspice 进行模拟电路仿真</a></p><p class="categories"><a href="/categories/%E7%A1%AC%E4%BB%B6%E7%94%B5%E5%AD%90%E6%8A%80%E6%9C%AF/">硬件电子技术</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Arduino/"><span class="tag">Arduino</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CAD/"><span class="tag">CAD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CSS/"><span class="tag">CSS</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/EDA/"><span class="tag">EDA</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GCC-GDB/"><span class="tag">GCC/GDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LaTeX/"><span class="tag">LaTeX</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MCU/"><span class="tag">MCU</span><span class="tag">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Make/"><span class="tag">Make</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Markdown/"><span class="tag">Markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PCB/"><span class="tag">PCB</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python3/"><span class="tag">Python3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Qt/"><span class="tag">Qt</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Solidity/"><span class="tag">Solidity</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tools/"><span class="tag">Tools</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Windows/"><span class="tag">Windows</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%A3%E6%95%B0/"><span class="tag">代数</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BB%BF%E7%9C%9F/"><span class="tag">仿真</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%85%83%E5%99%A8%E4%BB%B6/"><span class="tag">元器件</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C/"><span class="tag">命令行</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/"><span class="tag">密码学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B0%84%E9%A2%91/"><span class="tag">射频</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F-Linux/"><span class="tag">嵌入式 Linux</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/"><span class="tag">开发规范</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BE%AE%E7%A7%AF%E5%88%86/"><span class="tag">微积分</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%89%8B%E6%9C%BA/"><span class="tag">手机</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E5%AD%A6%E7%BB%93%E6%9E%84/"><span class="tag">数学结构</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%96%B0%E6%A6%82%E5%BF%B5%E8%8B%B1%E8%AF%AD/"><span class="tag">新概念英语</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="tag">服务器</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9D%82%E8%B0%88/"><span class="tag">杂谈</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B1%BD%E8%BD%A6/"><span class="tag">汽车</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E5%AD%90%E4%BB%AA%E5%99%A8/"><span class="tag">电子仪器</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E6%9C%BA/"><span class="tag">电机</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E6%BA%90/"><span class="tag">电源</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E8%B7%AF%E7%90%86%E8%AE%BA/"><span class="tag">电路理论</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/"><span class="tag">网络协议</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="tag">设计模式</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%AD%E6%B3%95/"><span class="tag">语法</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><p class="is-size-7"><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><img src="/images/ICP.png"> 蜀 ICP 备 2021027760 号</a><p class="is-size-7">Copyright © 2024 <span>UinIO.com</span> by Hank</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://unpkg.com/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://unpkg.com/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://unpkg.com/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://unpkg.com/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><script src="/js/math.js"></script><script id="MathJax-script" async src="/js/es5/tex-mml-chtml.js"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>