<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>基于 ES6 的 JavaScript 简明语法书 - UinIO.com 电子技术实验室</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="UinIO.com 电子技术实验室"><meta name="msapplication-TileImage" content="/images/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="UinIO.com 电子技术实验室"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="JavaScript 是一款基于原型的的多范式动态脚本语言，支持命令式、函数式以及面向对象式的编程风格。其标准化工作主要由欧洲计算机制造商协会（ECMA，European Computer Manufacturers Association）负责，其语言标准被称为ECMAScript，其它组织可以遵循该标准开发各自的 JavaScript 实现，例如 Firefox 内置的 SpiderM"><meta property="og:type" content="blog"><meta property="og:title" content="基于 ES6 的 JavaScript 简明语法书"><meta property="og:url" content="http://www.uinio.com/Web/Javascript/"><meta property="og:site_name" content="UinIO.com 电子技术实验室"><meta property="og:description" content="JavaScript 是一款基于原型的的多范式动态脚本语言，支持命令式、函数式以及面向对象式的编程风格。其标准化工作主要由欧洲计算机制造商协会（ECMA，European Computer Manufacturers Association）负责，其语言标准被称为ECMAScript，其它组织可以遵循该标准开发各自的 JavaScript 实现，例如 Firefox 内置的 SpiderM"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://www.uinio.com/images/favicon.png"><meta property="article:published_time" content="2011-04-22T16:00:00.000Z"><meta property="article:modified_time" content="2021-12-23T16:00:00.000Z"><meta property="article:author" content="Hank"><meta property="article:tag" content="JavaScript"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://www.uinio.com/images/favicon.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://www.uinio.com/Web/Javascript/"},"headline":"基于 ES6 的 JavaScript 简明语法书","image":["http://www.uinio.com/Web/Javascript/logo.png"],"datePublished":"2011-04-22T16:00:00.000Z","dateModified":"2021-12-23T16:00:00.000Z","author":{"@type":"Person","name":"Hank"},"publisher":{"@type":"Organization","name":"UinIO.com 电子技术实验室","logo":{"@type":"ImageObject","url":{"text":"UinIO.com"}}},"description":"JavaScript\r 是一款基于原型的的多范式动态脚本语言，支持命令式、函数式以及面向对象式的编程风格。其标准化工作主要由欧洲计算机制造商协会（ECMA，European\r Computer Manufacturers\r Association）负责，其语言标准被称为ECMAScript，其它组织可以遵循该标准开发各自的\r JavaScript 实现，例如 Firefox 内置的 SpiderM"}</script><link rel="canonical" href="http://www.uinio.com/Web/Javascript/"><link rel="alternate" href="/atom.xml" title="UinIO.com 电子技术实验室" type="application/atom+xml"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://unpkg.com/highlight.js@11.7.0/styles/monokai.css"><link rel="stylesheet" href="https://fonts.font.im/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://unpkg.com/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://unpkg.com/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://unpkg.com/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">UinIO.com</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" target="_blank" rel="noopener" href="https://space.bilibili.com/1514341594">Bilibili</a><a class="navbar-item" target="_blank" rel="noopener" href="https://www.zhihu.com/people/uinika">知乎</a><a class="navbar-item" target="_blank" rel="noopener" href="https://github.com/uinika">Github</a><a class="navbar-item" target="_blank" rel="noopener" href="https://gitee.com/uinika">Gitee</a><a class="navbar-item" href="/works/index.html">开源硬件</a><a class="navbar-item" href="/my/about.html">关于我</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2011-04-22T16:00:00.000Z" title="2011/4/23 00:00:00">2011-04-23</time>发表</span><span class="level-item"><time dateTime="2021-12-23T16:00:00.000Z" title="2021/12/24 00:00:00">2021-12-24</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Web/">Web</a></span><span class="level-item">3 小时读完 (大约24799个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">基于 ES6 的 JavaScript 简明语法书</h1><div class="content"><p><strong>JavaScript</strong>
是一款基于原型的的多范式动态脚本语言，支持命令式、函数式以及面向对象式的编程风格。其标准化工作主要由<strong>欧洲计算机制造商协会</strong>（<strong>ECMA</strong>，European
Computer Manufacturers
Association）负责，其语言标准被称为<strong>ECMAScript</strong>，其它组织可以遵循该标准开发各自的
JavaScript 实现，例如 Firefox 内置的 <a target="_blank" rel="noopener" href="https://spidermonkey.dev/"><strong>SpiderMonkey</strong></a> 以及
Chrome 内置的 <a target="_blank" rel="noopener" href="https://v8.dev/"><strong>V8</strong></a>
解析引擎（ECMAScript 规范文档主要针对解析引擎的开发人员，而非 JavaScript
脚本的编写人员）。</p>
<p><img src="/Web/Javascript/logo.png"></p>
<p>2012 年之后推出的 Web 浏览器都完整实现了 <strong>ECMAScript
5.1</strong> 标准，而 2015 年发布的 <strong>ECMAScript 6</strong>
标准（官方称为 <strong>ECMAScript 2015</strong>，俗称为
<strong>ES6</strong>），目前已经被 <a target="_blank" rel="noopener" href="https://www.mozilla.org/">Firefox</a> 和 <a target="_blank" rel="noopener" href="https://www.chromium.org/">Chromium</a> 以及 <a target="_blank" rel="noopener" href="https://nodejs.org/">NodeJS</a>
进行了较为完整的实现，所以本文将会基于此介绍 JavaScript
的重点语法特性，以及一些较为用常用的核心工具函数，本文在写作过程当中参考了
Mozilla 开发者社区的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide"><strong>《JavaScript
Guide》</strong></a> 和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference"><strong>《JavaScript
Reference》</strong></a> 两篇官方文档。</p>
<span id="more"></span>
<h2 id="基础语法">基础语法</h2>
<h3 id="语句">语句</h3>
<p>JavaScript 使用 <strong>Unicode</strong>
字符集，并且对于大小写敏感。源文件当中的每一条 JavaScript
语句都要使用分号 <code>;</code>
进行分隔，虽然这并非必需，但是可以大大降低代码发生错误的可能。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;www.uinio.com&quot;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：Javascript
源代码会被解析引擎从左至右进行扫描执行。</p>
</blockquote>
<h3 id="注释">注释</h3>
<p>JavaScript 的注释与许多 C/C++
类语言相似，同样可以划分为<strong>单行</strong>与<strong>多行</strong>两种类型：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  多行注释</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="变量">变量</h3>
<p>变量的名称叫做<strong>标识符</strong>，虽然可以使用大部分的
<strong>ISO 8859-1</strong> 或者 <strong>Unicode</strong>
编码字符作为标识符，其必须以字母、下划线 <code>_</code>、美元符号
<code>$</code> 作为前缀，后续可以是数字 <code>0 ~ 9</code> 或者大写字母
<code>A ~ Z</code> 以及小写字母 <code>a ~ z</code>，例如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Hank</span>  _uinika  $Chengdu  from2021  to_2022</span><br></pre></td></tr></table></figure>
<h4 id="声明">声明</h4>
<p>ECMAScript 6 当中一共拥有
<code>var</code>、<code>let</code>、<code>const</code>
三种变量声明关键字：</p>
<ul>
<li><code>var</code>：声明一个<strong>变量</strong>；</li>
<li><code>let</code>：声明具有块作用域的<strong>局部变量</strong>；</li>
<li><code>const</code>：声明具有块作用域的<strong>只读常量</strong>；</li>
</ul>
<p>JavaScript 源代码当中可以采用如下三种方式来声明一个变量：</p>
<ul>
<li>采用 <code>var</code>
关键字：用于声明<strong>局部变量</strong>和<strong>全局变量</strong>，例如
<code>var x = 2022</code>；</li>
<li>采用 <code>let</code>
关键字：用于声明具有<strong>块作用域</strong>的局部变量，例如
<code>let y = 13</code>；</li>
<li>直接赋值：函数外使用会产生一个全局变量，严格模式下这种方式会发生错误，所以应该避免使用，例如
<code>x = 2021</code>；</li>
</ul>
<h4 id="求值">求值</h4>
<p>采用关键字 <code>var</code> 或者 <code>let</code>
声明的变量，如果没有赋予初始值，则其值将会默认为
<code>undefined</code>。而访问未经过声明的变量，将会导致解析引擎抛出一个
<code>ReferenceError</code> 引用错误异常：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;变量 a 的值为 &quot;</span> + a); <span class="comment">// 变量 a 的值为 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;变量 b 的值为 &quot;</span> + b); <span class="comment">// 变量 b 的值为 undefined</span></span><br><span class="line"><span class="keyword">var</span> b;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;变量 c 的值为 &quot;</span> + c); <span class="comment">// Uncaught ReferenceError: c is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;变量 x 的值为 &quot;</span> + x); <span class="comment">// 变量 x 的值为 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;变量 y 的值为 &quot;</span> + y); <span class="comment">// Uncaught ReferenceError: y is not defined</span></span><br><span class="line"><span class="keyword">let</span> y;</span><br></pre></td></tr></table></figure>
<p>因此，可以使用 <code>undefined</code>
来判断一个变量是否已经赋值，下面代码当中，由于变量 <code>input</code>
未被赋值，所以 <code>if</code> 语句的求值结果为 <code>true</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> input;</span><br><span class="line"><span class="keyword">if</span> (input === <span class="literal">undefined</span>) &#123;</span><br><span class="line">  <span class="title function_">doThis</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="title function_">doThat</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类似的，由于下面代码当中数组 <code>myArray</code>
里的元素未被赋值，所以 <code>myFunction()</code> 函数将会得到执行：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myArray = [];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!myArray[<span class="number">0</span>]) <span class="title function_">myFunction</span>();</span><br></pre></td></tr></table></figure>
<p>在数值类型的计算当中，<code>undefined</code>
值会被自动转换为<strong>非数值</strong> <code>NaN</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> number;</span><br><span class="line"></span><br><span class="line">number + <span class="number">2</span>; <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>
<p>同样在数值计算当中，当对一个空值变量 <code>null</code>
进行求值时，其值会被自动转换为
<code>0</code>；而如果是在布尔类型运算当中，<code>null</code>
值则会被作为 <code>false</code> 进行处理：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test * <span class="number">32</span>); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
<h4 id="作用域">作用域</h4>
<p><strong>全局变量</strong>是在函数之外声明的变量，可以在源文件当中的其它位置进行访问；而<strong>局部变量</strong>是在函数内部声明的变量，其只能在当前函数的内部进行访问。</p>
<p>ECMAScript 6 之前的 JavaScript
不存在<code>语句块</code>作用域的概念，语句块当中声明的变量将会成为语句块所在函数或者全局作用域的局部变量，例如下面代码会在控制台输出
<code>2022</code>，因为变量 <code>code</code>
的作用域处于全局范围，而并非仅限于 <code>if</code> 语句块。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> code = <span class="number">610000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(code); <span class="comment">// 610000</span></span><br></pre></td></tr></table></figure>
<p>如果使用 ECMAScript 6 当中的 <code>let</code>
关键字进行声明，则上述行为将会发生变化：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> code = <span class="number">610000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(code); <span class="comment">// Uncaught ReferenceError: code is not defined</span></span><br></pre></td></tr></table></figure>
<h4 id="变量提升">变量提升</h4>
<p>JavaScript
变量支持<strong>先使用再声明</strong>，而且不会引发任何异常，称为<strong>变量提升</strong>。但是提升之后的变量，如果没有及时的进行初始化，则依然会返回
<code>undefined</code> 值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 示例 1 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(num === <span class="literal">undefined</span>); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">2022</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 示例 2 */</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name); <span class="comment">// undefined</span></span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">&quot;uinika&quot;</span>;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：由于 JavaScript 变量提升特性的存在，所有
<code>var</code>
变量的声明语句应当尽量放置该函数顶部，从而极大的提升代码清晰度。</p>
</blockquote>
<p>ECMAScript 6 提供的 <code>let</code> 和 <code>const</code>
关键字声明的变量，同样会存在变量提升的情况，但是并不会被赋予任何初始值，如果在变量声明之前引用（此时该变量处于<strong>暂时性死区</strong>，该状态会持续到该变量被声明为止），则会抛出
<code>ReferenceError</code> 引用错误异常。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(week); <span class="comment">// Uncaught ReferenceError: week is not defined</span></span><br><span class="line"><span class="keyword">let</span> week = <span class="number">7</span>;</span><br></pre></td></tr></table></figure>
<h4 id="函数提升">函数提升</h4>
<p>JavaScript
当中的函数，只有<strong>函数声明</strong>会被提升至源文件顶部，而<strong>函数表达式</strong>并不会被提升。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 函数声明 */</span></span><br><span class="line"><span class="title function_">test1</span>(); <span class="comment">// test1</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 函数表达式 */</span></span><br><span class="line"><span class="title function_">test2</span>(); <span class="comment">// Uncaught TypeError: test2 is not a function</span></span><br><span class="line"><span class="keyword">var</span> test2 = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;test2&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="全局变量">全局变量</h4>
<p><strong>全局变量</strong>本质上是<strong>全局对象</strong>的属性，<strong>Web
浏览器</strong>当中的全局对象是 <code>window</code>，可以通过
<code>window.variable</code> 设置和访问全局变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="variable constant_">URL</span> = <span class="string">&quot;www.uinio.com&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">URL</span>); <span class="comment">// www.uinio.com</span></span><br></pre></td></tr></table></figure>
<p>而 <strong>NodeJS</strong> 当中的全局对象是
<code>global</code>，则需要使用 <code>global.variable</code>
来设置和访问全局变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">URL</span> = <span class="string">&quot;www.uinika.com&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">global</span>.<span class="property">URL</span>); <span class="comment">// www.uinika.com</span></span><br></pre></td></tr></table></figure>
<h4 id="常量">常量</h4>
<p>使用关键字 <code>const</code>
可以创建一个只读的<strong>常量</strong>，其命名规则与变量相同，必须以字母、下划线
<code>_</code>、美元符号 <code>$</code>
开头，并且可以包含有字母、数字、下划线。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">PI</span> = <span class="number">3.141592654</span>;</span><br></pre></td></tr></table></figure>
<p><strong>常量</strong>即不可以重新赋值，也不可以在代码运行时重新声明，所以声明常量的时候，必须显式的将其初始化为某个具体值。<strong>常量</strong>的作用域规则与
<code>let</code>
块级作用域变量相同，在同一个作用域当中，不能使用与<strong>变量名</strong>或者<strong>函数名</strong>相同的名字来命名常量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">WEEK</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">WEEK</span> = <span class="number">7</span>; <span class="comment">// Uncaught SyntaxError: Identifier &#x27;WEEK&#x27; has already been declared</span></span><br></pre></td></tr></table></figure>
<p>然而，对于<strong>常量对象</strong>的<strong>属性</strong>进行赋值并不会受到保护，所以下面语句在执行时不会产生错误：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">TEST</span> = &#123; <span class="attr">key</span>: <span class="string">&quot;value1&quot;</span> &#125;;</span><br><span class="line"><span class="variable constant_">TEST</span>.<span class="property">key</span> = <span class="string">&quot;value2&quot;</span>; <span class="comment">// &#x27;value2&#x27;</span></span><br></pre></td></tr></table></figure>
<p>同样的，对于<strong>常量数组</strong>的<strong>元素</strong>进行赋值也不会受到保护，所以下面语句在执行时同样不会产生错误：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">WEB</span> = [<span class="string">&quot;HTML&quot;</span>, <span class="string">&quot;CSS&quot;</span>];</span><br><span class="line"><span class="variable constant_">WEB</span>.<span class="title function_">push</span>(<span class="string">&quot;JAVASCRIPT&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">WEB</span>); <span class="comment">// [&#x27;HTML&#x27;, &#x27;CSS&#x27;, &#x27;JAVASCRIPT&#x27;]</span></span><br></pre></td></tr></table></figure>
<h2 id="数据类型">数据类型</h2>
<p>最新的 ECMAScript 标准当中一共定义了 8 种数据类型，其中 7
种基本数据类型，以及 1 种对象数据类型：</p>
<table>
<colgroup>
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 74%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">数据类型</th>
<th style="text-align: center;">名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>Boolean</code></td>
<td style="text-align: center;"><strong>布尔值</strong></td>
<td>拥有 <code>true</code> 和 <code>false</code> 两个值；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>null</code></td>
<td style="text-align: center;"><strong>空值</strong></td>
<td>表示空值，由于 JavaScript 大小写敏感，所以
<code>null</code>、<code>Null</code>、<code>NULL</code>
三者完全不同。</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>undefined</code></td>
<td style="text-align: center;"><strong>未定义</strong></td>
<td>表示变量未赋值时的属性；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Number</code></td>
<td style="text-align: center;"><strong>数值</strong></td>
<td>用于存放整数或者浮点数；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>BigInt</code></td>
<td style="text-align: center;"><strong>大整数</strong></td>
<td>用于安全的存储和操作大整数；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>String</code></td>
<td style="text-align: center;"><strong>字符串</strong></td>
<td>表示一串文本值的字符序列;</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>Symbol</code></td>
<td style="text-align: center;"><strong>独一无二的值</strong></td>
<td>ECMAScript 6
新增加的数据类型，是一种实例唯一并且不可改变的数据类型；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>Object</code></td>
<td style="text-align: center;"><strong>对象</strong></td>
<td>用于充当各种数据类型的命名容器；</td>
</tr>
</tbody>
</table>
<h3 id="数据类型转换">数据类型转换</h3>
<p>JavaScript
是一种<strong>动态类型语言</strong>，这意味着在声明变量时无需指定数据类型，变量的数据类型会在代码执行期间，根据需要自动进行转换：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> temporary = <span class="number">2022</span>;</span><br><span class="line">temporary = <span class="string">&quot;wwww.uinio.com&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>如果表达式当中同时包含<strong>数字</strong>和<strong>字符串</strong>，通过加法运算符
<code>+</code> 可以将数值转换成字符串：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="string">&quot;The Number is &quot;</span> + <span class="number">2021</span>; <span class="comment">// &#x27;The Number is 2021&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2022</span> + <span class="string">&quot; is the Number&quot;</span>; <span class="comment">// &#x27;2022 is the Number&#x27;</span></span><br></pre></td></tr></table></figure>
<p>但是 JavaScript 当中并不能使用减法运算符 <code>-</code>
完成相同的任务：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;36&quot;</span> - <span class="number">16</span>; <span class="comment">// 20</span></span><br><span class="line"><span class="string">&quot;19&quot;</span> + <span class="number">85</span>; <span class="comment">// &#x27;1985&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串转换为数值">字符串转换为数值</h3>
<p>通过 <code>parseInt(string, radix)</code>
函数可以将字符串转换为<strong>整数</strong>（会丢弃小数部分），其中第 2
个参数 <code>radix</code>
表示<strong>进制</strong>或者<strong>基数</strong>，其取值范围介于
<code>2 ~ 36</code> 之间：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;32&quot;</span>, <span class="number">16</span>); <span class="comment">// 50</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">&quot;0x32&quot;</span>); <span class="comment">// 50</span></span><br></pre></td></tr></table></figure>
<p>而通过 <code>parseFloat(string)</code>
函数则可以将字符串转换为<strong>浮点数</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">parseFloat</span>(<span class="number">3.141592654</span>); <span class="comment">// 3.141592654</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：如果第 1 个参数 <code>string</code>
并非表达一个有效数值，那么上述函数就会返回一个非数 <code>NaN</code>
。</p>
</blockquote>
<p>将字符串转换为数字的另外一种方法，就是采用简单粗暴的加法运算符
<code>+</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;1.1&quot;</span> + <span class="string">&quot;5.5&quot;</span> = <span class="string">&quot;1.15.5&quot;</span></span><br><span class="line"></span><br><span class="line">(+<span class="string">&quot;1.1&quot;</span>) + (+<span class="string">&quot;5.5&quot;</span>) = <span class="number">6.6</span></span><br></pre></td></tr></table></figure>
<h3 id="各种字面量">各种字面量</h3>
<p><strong>字面量</strong>（Literals）是由特定语法表达式所定义的一组常量。</p>
<h4 id="数组">数组</h4>
<p>数组是一个在<strong>方括号</strong> <code>[]</code>
当中包含有零个或者多个表达式的列表，其中每个表达式代表数组的一个<strong>元素</strong>，元素的个数就是该数组的长度。下面示例声明并且初始化了一个拥有
3 个元素的数组 <code>motors</code>，同时采用 <code>length</code>
关键字获取数组长度，并通过索引 <code>Array[index]</code>
访问数组里的元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> motors = [<span class="string">&quot;Geely&quot;</span>, <span class="string">&quot;Haval&quot;</span>, <span class="string">&quot;Chery&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(motors.<span class="property">length</span>); <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(motors[<span class="number">0</span>]); <span class="comment">// Geely</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：数组字面量同时也是一个 <code>Array</code>
对象。</p>
</blockquote>
<p>初始化数组时如果连续输入两个逗号
<code>,</code>，则数组当中就会产生一个初始值为 <code>undefined</code>
的元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> animal = [<span class="string">&quot;Lion&quot;</span>, , <span class="string">&quot;dog&quot;</span>, <span class="string">&quot;cat&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animal.<span class="property">length</span>); <span class="comment">// 4</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animal[<span class="number">1</span>]); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>如果在元素列表的尾部添加了一个逗号，则这个都好将会被忽略，数组依然保持原有的长度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> animal = [<span class="string">&quot;Hank&quot;</span>, <span class="string">&quot;uinika&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animal.<span class="property">length</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(animal[<span class="number">2</span>]); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：尾部逗号在早期的 Web
浏览器当中会产生错误，所以最佳实践是移除它们。而在必要的时候，可以显式的将元素声明为
<code>undefined</code>。</p>
</blockquote>
<h4 id="布尔值">布尔值</h4>
<p>布尔类型只有 <code>true</code> 和 <code>false</code>
两种字面量，下面示例通过 <code>typeof</code>
运算符获取变量的数据类型：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> yes = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> no = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> yes); <span class="comment">// boolean</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> no); <span class="comment">// boolean</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：<code>Boolean</code>
只是布尔类型的包装对象，两者不能混淆使用；</p>
</blockquote>
<h4 id="整数">整数</h4>
<p>整数可以采用<strong>十进制</strong>（基数为
<code>10</code>）、<strong>十六进制</strong>（基数为
<code>16</code>）、<strong>八进制</strong>（基数为
<code>8</code>）、<strong>二进制</strong>（基数为
<code>2</code>）进行表示：</p>
<ul>
<li><strong>十进制整数</strong>：由一串数值序列组成，并且没有前缀
<code>0</code>，例如 <code>0</code>、117<code>、</code>-345`；</li>
<li><strong>八进制的整数</strong>：前缀为
<code>0</code>、<code>0O</code>、<code>0o</code>（严格模式下，必须以
<code>0o</code> 或 <code>0O</code> 开头），只能包含数字
<code>0 ~ 7</code>，例如
<code>015</code>、<code>0001</code>、<code>-0o77</code>；</li>
<li><strong>十六进制整数</strong>：以 <code>0x</code>、<code>0X</code>
开头，可以包含数字 <code>0 ~ 9</code> 和字母 <code>a ~ f</code> 或者
<code>A ~ F</code>，例如
<code>0x1123</code>、<code>0x00111</code>、<code>0xF1A7</code>；</li>
<li><strong>二进制整数</strong>：以 <code>0b</code>、<code>0B</code>
开头，只能包含数字 <code>0</code> 和 <code>1</code>，例如
<code>0b11</code>、<code>0b0011</code>、<code>-0b11</code>；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>, <span class="number">117</span>  -<span class="number">345</span>  十进制, 基数为<span class="number">10</span>)</span><br><span class="line"><span class="number">015</span>, <span class="number">0001</span> and -<span class="number">0o77</span> (八进制, 基数为<span class="number">8</span>)</span><br><span class="line"><span class="number">0x1123</span>, <span class="number">0x00111</span> and -<span class="number">0xF1A7</span> (十六进制, 基数为<span class="number">16</span>或<span class="string">&quot;hex&quot;</span>)</span><br><span class="line"><span class="number">0b11</span>, <span class="number">0b0011</span> and -<span class="number">0b11</span> (二进制, 基数为<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h4 id="浮点数">浮点数</h4>
<p>浮点数的字面量可以由带正负号 <code>+/-</code>
前缀<strong>的十进制整数部分</strong>、<strong>小数点</strong>
<code>.</code>、<strong>十进制小数部分</strong>、<strong>指数部分</strong>组成。其中指数部分以
<code>e</code> 或者 <code>E</code> 作为前缀，后面紧接着一个带有正负号
<code>+/-</code> 的整数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="number">0.12345789</span>; <span class="comment">// -0.12345789</span></span><br><span class="line"><span class="number">3.14e10</span>; <span class="comment">// 31400000000</span></span><br><span class="line"><span class="number">0.1e-20</span>; <span class="comment">// 1e-21</span></span><br></pre></td></tr></table></figure>
<h4 id="对象">对象</h4>
<p>对象是一种封闭在花括号 <code>&#123;&#125;</code>
当中，具有多个键值对元素的列表。下面示例创建了一个 <code>auto</code>
对象，将第 1 个元素 <code>motor1</code> 定义为变量 <code>motor1</code>
的值；第二个元素，属性 getCar，引用了一个函数（即
CarTypes("Honda")）；第三个元素，属性 special，使用了一个已有的变量（即
Sales）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> motor1 = <span class="string">&quot;BYD&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">drive</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> name === <span class="string">&quot;BYD&quot;</span> ? <span class="string">&quot;对不起，&quot;</span> + name + <span class="string">&quot; 的 EV 受限!&quot;</span> : <span class="string">&quot;把 &quot;</span> + name + <span class="string">&quot; 开回家!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> auto = &#123;</span><br><span class="line">  <span class="attr">motor1</span>: motor1,</span><br><span class="line">  <span class="attr">motor2</span>: <span class="string">&quot;AION&quot;</span>,</span><br><span class="line">  <span class="attr">getMotor</span>: drive,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(auto.<span class="property">motor1</span>); <span class="comment">// BYD</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(auto.<span class="property">motor2</span>); <span class="comment">// AION</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(auto.<span class="title function_">getMotor</span>(<span class="string">&quot;BYD&quot;</span>)); <span class="comment">// 对不起，BYD 的 EV 受限!</span></span><br></pre></td></tr></table></figure>
<p>可以采用<strong>数值</strong>作为对象的属性名称，引用该属性的时候，则需要采用类似于数组索引
<code>object.[property]</code> 的访问方式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> motor = &#123; <span class="attr">favorites</span>: &#123; <span class="number">1</span>: <span class="string">&quot;BYD&quot;</span>, <span class="number">2</span>: <span class="string">&quot;AION&quot;</span> &#125;, <span class="number">3</span>: <span class="string">&quot;Tesla&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(motor.<span class="property">favorites</span>[<span class="number">1</span>]); <span class="comment">// BYD</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(motor[<span class="number">3</span>]); <span class="comment">// Tesla</span></span><br></pre></td></tr></table></figure>
<p>同理，如果需要采用其它不合法的属性名称，则同样可以通过数组索引的方式进行访问：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> motor = &#123;</span><br><span class="line">  埃安: <span class="string">&quot;AION&quot;</span>,</span><br><span class="line">  特斯拉: <span class="string">&quot;Tesla&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(motor[<span class="string">&quot;埃安&quot;</span>]); <span class="comment">// AION</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(motor[<span class="string">&quot;特斯拉&quot;</span>]); <span class="comment">// Tesla</span></span><br></pre></td></tr></table></figure>
<p>ECMAScript 6 支持创建对象时通过 <code>__proto__</code> 设置原型、简化
<code>key: value</code>
属性赋值、直接在对象中定义函数、支持调用父对象方法、动态计算表达式属性名称。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> property = <span class="string">&quot;this is a property&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Test</span> = &#123;</span><br><span class="line">  <span class="comment">/* 对象创建时设置原型 */</span></span><br><span class="line">  <span class="attr">__proto__</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  property, <span class="comment">// 缩写 property: property</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 直接定义函数 */</span></span><br><span class="line">  <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">super</span>.<span class="title function_">toString</span>(); <span class="comment">// 调用父对象上的函数</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  [<span class="string">&quot;property_&quot;</span> + (<span class="function">() =&gt;</span> <span class="number">1985</span>)()]: <span class="number">2022</span>, <span class="comment">// 动态计算属性名称</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="title class_">Test</span>);</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">property: &quot;this is a property&quot;</span></span><br><span class="line"><span class="comment">property_1985: 2022</span></span><br><span class="line"><span class="comment">toString: ƒ toString()</span></span><br><span class="line"><span class="comment">[[Prototype]]: Object</span></span><br><span class="line"><span class="comment">  name: &quot;Hank&quot;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="regexp">RegExp</h4>
<p><strong>正则表达式</strong>字面量是一个被两条<strong>正斜线</strong>
<code>/ ... /</code> 包围起来的表达式。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> RegExp = /ab+c/;</span><br></pre></td></tr></table></figure>
<h4 id="字符串">字符串</h4>
<p>字符串是由<strong>双引号</strong> <code>"</code>
或者<strong>单引号</strong> <code>'</code>
括起来的零个或者多个字符：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;2022&quot;</span>;</span><br><span class="line"><span class="string">&quot;uinika&quot;</span>;</span><br><span class="line"><span class="string">&quot;Hank&#x27;s \n motor&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>JavaScript 会自动将字符串字面量转换为一个 <code>String</code>
对象进行处理，所以可以直接调用 <code>String.length</code> 属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hank&#x27;s motor&quot;</span>.<span class="property">length</span>); <span class="comment">// 12</span></span><br></pre></td></tr></table></figure>
<p>ECMAScript 6 提供一种<strong>模板字面量</strong>（Template
Literals）功能，用于通过一些<strong>语法糖</strong>来构造字符串：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">URL</span> = <span class="string">&quot;www.uinio.com&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> greet = <span class="string">`hello</span></span><br><span class="line"><span class="string">world`</span>; <span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;name&#125;</span>&#x27;s blog is <span class="subst">$&#123;URL&#125;</span>`</span>); <span class="comment">// Hank&#x27;s blog is www.uinio.com</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(greet);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">hello</span></span><br><span class="line"><span class="comment">world</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="转义字符">转义字符</h4>
<p>下面的表格列举了可以在 JavaScript
<strong>字符串</strong>当中使用的特殊<strong>转义字符</strong>。</p>
<table>
<colgroup>
<col style="width: 9%">
<col style="width: 90%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">特殊字符</th>
<th style="text-align: left;">功能解释</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>\0</code></td>
<td style="text-align: left;">Null 字节；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>\b</code></td>
<td style="text-align: left;">退格符；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>\f</code></td>
<td style="text-align: left;">换页符；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>\n</code></td>
<td style="text-align: left;">换行符；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>\r</code></td>
<td style="text-align: left;">回车符；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>\t</code></td>
<td style="text-align: left;">Tab 制表符；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>\v</code></td>
<td style="text-align: left;">垂直制表符；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>\'</code></td>
<td style="text-align: left;">单引号；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>\"</code></td>
<td style="text-align: left;">双引号；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>\\</code></td>
<td style="text-align: left;">反斜杠字符；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>\XXX</code></td>
<td style="text-align: left;">由从 <code>0 ~ 377</code> 三位八进制数
<code>XXX</code> 表示的 <strong>Latin-1</strong>
字符，例如：<code>\251</code> 是版权符号 © 的八进制表达；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>\xXX</code></td>
<td style="text-align: left;">由从 00 和 FF 的两位十六进制数字 XX 表示的
<strong>Latin-1</strong> 字符，例如：<code>\xA9</code> 是版权符号 ©
的十六进制表达；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>\uXXXX</code></td>
<td style="text-align: left;">由 4 位十六进制数字 <code>XXXX</code>
表示的 <strong>Unicode</strong> 字符，例如：<code>\u00A9</code>
是版权符号 © 的 Unicode 表达;</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>\u&#123;XXXXX&#125;</code></td>
<td style="text-align: left;">Unicode 代码点（Code
Point）转义字符，例如：<code>\u&#123;2F804&#125;</code> 相当于 Unicode 转义字符
<code>\uD87E\uDC04</code> 的简写形式；</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意</strong>：严格模式下，不能使用八进制转义字符。</p>
</blockquote>
<p>通过转义字符，可以在字符串当中方便的插入<strong>引号</strong>与<strong>反斜线</strong>，甚至于进行<strong>字符串换行</strong>处理：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Hank&#x27;s blog is &#x27;www.uinio.com&#x27;&quot;</span>; <span class="comment">// &quot;Hank&#x27;s blog is &#x27;www.uinio.com&#x27;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;C:\\Workspace\\blog&quot;</span>; <span class="comment">// &#x27;C:\\Workspace\\blog&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;Hank&#x27;s Github is \</span></span><br><span class="line"><span class="string">https://github.com/uinika&quot;</span>; <span class="comment">// &quot;Hank&#x27;s Github is https://github.com/uinika&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="运算符">运算符</h2>
<p>JavaScript
根据<strong>操作数</strong>的不同，可以划分为<code>一元</code>、<code>二元</code>、<code>三元</code>总共
3 类运算符。</p>
<h3 id="赋值运算符">赋值运算符</h3>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">赋值运算符</th>
<th style="text-align: center;"> </th>
<th style="text-align: left;">示例</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>赋值</strong></td>
<td style="text-align: center;"><code>=</code></td>
<td style="text-align: left;"><code>x = y</code></td>
<td style="text-align: left;"><code>x = y</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>加法赋值</strong></td>
<td style="text-align: center;"><code>+=</code></td>
<td style="text-align: left;"><code>x += y</code></td>
<td style="text-align: left;"><code>x = x + y</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>减法赋值</strong></td>
<td style="text-align: center;"><code>-=</code></td>
<td style="text-align: left;"><code>x -= y</code></td>
<td style="text-align: left;"><code>x = x - y</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>乘法赋值</strong></td>
<td style="text-align: center;"><code>*=</code></td>
<td style="text-align: left;"><code>x *= y</code></td>
<td style="text-align: left;"><code>x = x * y</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>除法赋值</strong></td>
<td style="text-align: center;"><code>/=</code></td>
<td style="text-align: left;"><code>x /= y</code></td>
<td style="text-align: left;"><code>x = x / y</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>求余赋值</strong></td>
<td style="text-align: center;"><code>%=</code></td>
<td style="text-align: left;"><code>x %= y</code></td>
<td style="text-align: left;"><code>x = x % y</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>求幂赋值</strong></td>
<td style="text-align: center;"><code>**=</code></td>
<td style="text-align: left;"><code>x **= y</code></td>
<td style="text-align: left;"><code>x = x ** y</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>左移位赋值</strong></td>
<td style="text-align: center;"><code>&lt;&lt;=</code></td>
<td style="text-align: left;"><code>x &lt;&lt;= y</code></td>
<td style="text-align: left;"><code>x = x &lt;&lt; y</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>右移位赋值</strong></td>
<td style="text-align: center;"><code>&gt;&gt;=</code></td>
<td style="text-align: left;"><code>x &gt;&gt;= y</code></td>
<td style="text-align: left;"><code>x = x &gt;&gt; y</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>无符号右移位赋值</strong></td>
<td style="text-align: center;"><code>&gt;&gt;&gt;=</code></td>
<td style="text-align: left;"><code>x &gt;&gt;&gt;= y</code></td>
<td style="text-align: left;"><code>x = x &gt;&gt;&gt; y</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>按位与赋值</strong></td>
<td style="text-align: center;"><code>&amp;=</code></td>
<td style="text-align: left;"><code>x &amp;= y</code></td>
<td style="text-align: left;"><code>x = x &amp; y</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>按位异或赋值</strong></td>
<td style="text-align: center;"><code>^=</code></td>
<td style="text-align: left;"><code>x ^= y</code></td>
<td style="text-align: left;"><code>x = x ^ y</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>按位或赋值</strong></td>
<td style="text-align: center;"><code>│=</code></td>
<td style="text-align: left;"><code>x │= y</code></td>
<td style="text-align: left;"><code>x = x │ y</code></td>
</tr>
</tbody>
</table>
<h3 id="比较运算符">比较运算符</h3>
<table>
<colgroup>
<col style="width: 10%">
<col style="width: 4%">
<col style="width: 45%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">比较运算符</th>
<th style="text-align: center;"> </th>
<th style="text-align: left;">示例</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>等于</strong></td>
<td style="text-align: center;"><code>==</code></td>
<td style="text-align: left;"><code>2006 == 2006</code> 或者
<code>2006 == "2006"</code>，返回 <code>true</code>；</td>
<td style="text-align: left;">左右两侧操作数相等时返回
<code>true</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>不等于</strong></td>
<td style="text-align: center;"><code>!=</code></td>
<td style="text-align: left;"><code>2006 != 2019</code> 或者
<code>2006 != "2019"</code>，返回 <code>true</code>；</td>
<td style="text-align: left;">左右两侧操作数不相等时返回
<code>true</code>；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>严格等于</strong></td>
<td style="text-align: center;"><code>===</code></td>
<td style="text-align: left;"><code>2022 === 2022</code> 返回
<code>true</code>；<code>2022 === "2022"</code> 返回
<code>false</code>；</td>
<td style="text-align: left;">左右两侧操作数相等并且数据类型相同时返回
<code>true</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>不严格等于</strong></td>
<td style="text-align: center;"><code>!==</code></td>
<td style="text-align: left;"><code>2022 !== 2022</code> 返回
<code>false</code>；<code>2022 !== "2022"</code> 返回
<code>true</code>；</td>
<td style="text-align: left;">左右两侧操作数不相等并且数据类型不相同时返回
<code>true</code>；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>大于</strong></td>
<td style="text-align: center;"><code>&gt;</code></td>
<td style="text-align: left;"><code>2021 &gt; 2022</code> 或者
<code>2021 &gt; "2022"</code>，返回 <code>false</code>；</td>
<td style="text-align: left;">左侧操作数大于右侧时返回
<code>true</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>大于等于</strong></td>
<td style="text-align: center;"><code>&gt;=</code></td>
<td style="text-align: left;"><code>2021 &gt;= 2021</code> 或者
<code>2021 &gt;= "2021"</code>，返回 <code>true</code>；</td>
<td style="text-align: left;">左侧操作数大于或者等于右侧时返回
<code>true</code>；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>小于</strong></td>
<td style="text-align: center;"><code>&lt;</code></td>
<td style="text-align: left;"><code>2019 &lt; 2022</code> 或者
<code>2019 &lt; "2022"</code>，返回 <code>true</code>；</td>
<td style="text-align: left;">左侧操作数小于右侧时返回
<code>true</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>小于等于</strong></td>
<td style="text-align: center;"><code>&lt;=</code></td>
<td style="text-align: left;"><code>2019 &lt;= 2019</code> 或者
<code>2019 &lt;= "2019"</code>，返回 <code>true</code>；</td>
<td style="text-align: left;">左侧操作数小于或者等于右侧时返回
<code>true</code>；</td>
</tr>
</tbody>
</table>
<h3 id="算数运算符">算数运算符</h3>
<table>
<colgroup>
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 39%">
<col style="width: 51%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">算数运算符</th>
<th style="text-align: center;"> </th>
<th style="text-align: left;">示例</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>求余</strong></td>
<td style="text-align: center;"><code>%</code></td>
<td style="text-align: left;"><code>15 % 6</code>，返回
<code>3</code>；</td>
<td style="text-align: left;">返回左右两侧操作数相除之后的<strong>余数</strong>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>自增</strong></td>
<td style="text-align: center;"><code>++</code></td>
<td style="text-align: left;">当 <code>let index = 0</code> 时，首先执行
<code>++index</code> 返回 <code>1</code>，然后再执行
<code>index++</code> 依然返回 <code>1</code>；</td>
<td style="text-align: left;">如果放置在操作数<strong>前面</strong>，则返回<strong>加上</strong>
<code>1</code>
之后的值；如果放置在操作数<strong>后面</strong>，则返回操作数之后再<strong>加上</strong>
<code>1</code>；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>自减</strong></td>
<td style="text-align: center;"><code>--</code></td>
<td style="text-align: left;">当 <code>let index = 6</code> 时，首先执行
<code>--index</code> 返回 <code>5</code>，然后再执行
<code>index--</code> 依然返回 <code>5</code>；</td>
<td style="text-align: left;">如果放置在操作数<strong>前面</strong>，则返回<strong>减去</strong>
<code>1</code>
之后的值；如果放置在操作数<strong>后面</strong>，则返回操作数之后再<strong>减去</strong>
<code>1</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>负值</strong></td>
<td style="text-align: center;"><code>-</code></td>
<td style="text-align: left;"><code>console.log(-5)</code>，返回
<code>-5</code>；</td>
<td style="text-align: left;">返回操作数的负值；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>正值</strong></td>
<td style="text-align: center;"><code>+</code></td>
<td style="text-align: left;"><code>console.log( +"5" )</code>，返回
<code>5</code>；</td>
<td style="text-align: left;">返回操作数的正值，同时将操作数转换为数值类型；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>指数运算</strong></td>
<td style="text-align: center;"><code>**</code></td>
<td style="text-align: left;"><code>2 ** 3</code>，返回
<code>8</code>；</td>
<td style="text-align: left;">返回指数运算之后的结果，左侧为<strong>底数</strong>部分，右侧为<strong>指数</strong>部分；</td>
</tr>
</tbody>
</table>
<h3 id="位运算符">位运算符</h3>
<table>
<colgroup>
<col style="width: 10%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 79%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">位运算符</th>
<th style="text-align: center;"> </th>
<th style="text-align: left;">示例</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>按位与</strong></td>
<td style="text-align: center;"><code>&amp;</code></td>
<td style="text-align: left;"><code>a &amp; b</code></td>
<td style="text-align: left;">左右两侧操作数每一个位都为 <code>1</code>
时返回 <code>1</code>，否则返回 <code>0</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>按位或</strong></td>
<td style="text-align: center;"><code>│</code></td>
<td style="text-align: left;"><code>a │ b</code></td>
<td style="text-align: left;">左右两侧操作数每一个位只要其中一个为
<code>1</code> 则返回 <code>1</code>，否则返回 <code>0</code>；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>按位异或</strong></td>
<td style="text-align: center;"><code>^</code></td>
<td style="text-align: left;"><code>a ^ b</code></td>
<td style="text-align: left;">左右两侧操作数的每一个对应的位不相同就返回
<code>1</code>，否则返回 <code>0</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>按位非</strong></td>
<td style="text-align: center;"><code>~</code></td>
<td style="text-align: left;"><code>~ a</code></td>
<td style="text-align: left;">对右侧操作数的二进制形式按位取反；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>左移</strong></td>
<td style="text-align: center;"><code>&lt;&lt;</code></td>
<td style="text-align: left;"><code>a &lt;&lt; b</code></td>
<td style="text-align: left;">将左侧操作数的二进制形式<strong>向左移动</strong>右侧操作数个位，并在<strong>右侧</strong>填充
<code>0</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>右移</strong></td>
<td style="text-align: center;"><code>&gt;&gt;</code></td>
<td style="text-align: left;"><code>a &gt;&gt; b</code></td>
<td style="text-align: left;">将左侧操作数的二进制形式<strong>向右移动</strong>右侧操作数个位，左侧<strong>填充位</strong>由左侧操作数的最高位是
<code>0</code> 还是 <code>1</code> 来决定；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>无符号右移</strong></td>
<td style="text-align: center;"><code>&gt;&gt;&gt;</code></td>
<td style="text-align: left;"><code>a &gt;&gt;&gt; b</code></td>
<td style="text-align: left;">将左侧操作数的二进制形式<strong>向右移动</strong>右侧操作数个位，并将<strong>左侧</strong>全部填充为
<code>0</code>；</td>
</tr>
</tbody>
</table>
<h3 id="逻辑运算符">逻辑运算符</h3>
<table>
<colgroup>
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 48%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">逻辑运算符</th>
<th style="text-align: center;"> </th>
<th style="text-align: left;">示例</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><strong>逻辑与</strong></td>
<td style="text-align: center;"><code>&amp;&amp;</code></td>
<td style="text-align: left;"><code>true &amp;&amp; true</code> 返回
<code>true</code>，<code>false &amp;&amp; false</code> 返回
<code>false</code>，<code>true &amp;&amp; false</code> 返回
<code>false</code>;</td>
<td style="text-align: left;">当操作数都为 <code>true</code> 时返回
<code>true</code>，否则返回 <code>false</code>；</td>
</tr>
<tr class="even">
<td style="text-align: center;"><strong>逻辑或</strong></td>
<td style="text-align: center;"><code>││</code></td>
<td style="text-align: left;"><code>true ││ true</code> 返回
<code>true</code>，<code>false ││ false</code> 返回
<code>false</code>，<code>true ││ false</code> 返回
<code>true</code>;</td>
<td style="text-align: left;">任意一个操作数为 <code>true</code> 时返回
<code>true</code>，如果操作数都为 <code>false</code> 则返回
<code>false</code>；</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><strong>逻辑非</strong></td>
<td style="text-align: center;"><code>!</code></td>
<td style="text-align: left;"><code>!true</code> 返回 <code>false</code>
，<code>!false</code> 返回 <code>true</code>；</td>
<td style="text-align: left;">如果操作数为 <code>true</code> 时返回
<code>false</code>，反之则会返回 <code>true</code>；</td>
</tr>
</tbody>
</table>
<h3 id="条件运算符">条件运算符</h3>
<p>条件运算符是 JavaScript 当中唯一的<strong>三目运算符</strong>（需要 3
个操作数），其返回结果是根据指定条件在两个值当中选取一个。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">condition ? value1 : value2;</span><br></pre></td></tr></table></figure>
<p>如果条件 <code>condition</code> 的判断结果为
<code>true</code>，则返回 <code>value1</code>，否则返回
<code>value2</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getStage</span> = (<span class="params">age</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> age &gt;= <span class="number">18</span> ? <span class="string">&quot;成年人&quot;</span> : <span class="string">&quot;小孩&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getStage</span>(<span class="number">36</span>)); <span class="comment">// 成年人</span></span><br></pre></td></tr></table></figure>
<h3 id="分组操作符">分组操作符</h3>
<p>分组操作符 <code>()</code> 可以用于控制了表达式当中计算的优先级。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">let</span> z = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x + y * z); <span class="comment">// 7</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>((x + y) * z); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>
<h3 id="typeof-操作符">typeof 操作符</h3>
<p><code>typeof</code>
操作符用于返回当前<strong>操作数</strong>的数据类型，可以通过如下方式进行调用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> operand;</span><br></pre></td></tr></table></figure>
<p>上面的 <code>typeof</code> 操作符将会返回一个表示操作数
<code>operand</code> 数据类型的字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> year = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;2022 - 2010&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">36</span>;</span><br><span class="line"><span class="keyword">var</span> today = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 判断已定义变量的数据类型 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> year); <span class="comment">// function</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> name); <span class="comment">// string</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> age); <span class="comment">// number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> today); <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 判断未定义变量的数据类型 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> nothing); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* JavaScript 预定义关键字的数据类型 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">true</span>); <span class="comment">// boolean</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="title class_">NaN</span>); <span class="comment">// number</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="literal">null</span>); <span class="comment">// object</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> <span class="title class_">Infinity</span>); <span class="comment">// number</span></span><br></pre></td></tr></table></figure>
<h3 id="void-操作符">void 操作符</h3>
<p><code>void</code>
操作符用于表示右侧表达式<strong>没有返回值</strong>，通常用于标识 HTML
页面当中不需要操作返回值的 JavaScript 表达式。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> expression;</span><br></pre></td></tr></table></figure>
<p>下面的代码创建了一个超文本链接，当用户使用鼠标点击之后，不会产生任何效果。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span>&gt;</span>无效果点击<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>下面的超文本链接会在用户鼠标点击之后，提交一个 HTML 表单。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(document.form.submit())&quot;</span>&gt;</span>点击提交<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串连接">字符串连接</h3>
<p><strong>字符串连接符</strong> <code>+</code>
用于连接两个字符串，也允许通过 <code>+=</code> 完成字符串拼接。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 使用 + 拼接字符串 */</span></span><br><span class="line"><span class="keyword">let</span> string1 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> string2 = <span class="string">&quot; Hank&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(string1 + string2); <span class="comment">// Hello Hank</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用 += 拼接字符串 */</span></span><br><span class="line"><span class="keyword">let</span> string3 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">string3 += <span class="string">&quot; PCB&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(string3); <span class="comment">// Hello PCB</span></span><br></pre></td></tr></table></figure>
<h3 id="剩余参数">剩余参数</h3>
<p>ES6 提供的<strong>剩余参数</strong>运算符 <code>...</code>
可以用于快速原地展开一个<strong>数组</strong>或者一组<strong>函数参数</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 展开函数参数 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">total</span>(<span class="params">x, y, z</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="variable language_">arguments</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="title function_">total</span>(...<span class="variable language_">arguments</span>); <span class="comment">// 6</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 展开数组 */</span></span><br><span class="line"><span class="keyword">const</span> color = [<span class="string">&quot;B&quot;</span>, <span class="string">&quot;l&quot;</span>, <span class="string">&quot;u&quot;</span>, <span class="string">&quot;e&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> pcb = [...color, <span class="string">&quot;P&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;B&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pcb); <span class="comment">// [&#x27;B&#x27;, &#x27;l&#x27;, &#x27;u&#x27;, &#x27;e&#x27;, &#x27;P&#x27;, &#x27;C&#x27;, &#x27;B&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="解构赋值">解构赋值</h3>
<p>ES6
提供的<strong>解构赋值语法</strong>可以用于从<strong>数组</strong>当中提取元素，或者从<strong>对象</strong>当中提取属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 提取数组当中的元素 */</span></span><br><span class="line"><span class="keyword">const</span> militaryArray = [<span class="string">&quot;陆军&quot;</span>, <span class="string">&quot;海军&quot;</span>, <span class="string">&quot;空军&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> [army, navy, airForce] = militaryArray;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(army + <span class="string">&quot;➙&quot;</span> + navy + <span class="string">&quot;➙&quot;</span> + airForce); <span class="comment">// 陆军➙海军➙空军</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 提取对象上的属性 */</span></span><br><span class="line"><span class="keyword">const</span> up = &#123;</span><br><span class="line">  <span class="attr">army</span>: <span class="string">&quot;陆军&quot;</span>,</span><br><span class="line">  <span class="attr">navy</span>: <span class="string">&quot;海军&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> down = &#123;</span><br><span class="line">  <span class="attr">airForce</span>: <span class="string">&quot;空军&quot;</span>,</span><br><span class="line">  <span class="attr">missileForce</span>: <span class="string">&quot;火箭军&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> militaryObject = &#123; ...up, ...down &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(militaryObject); <span class="comment">// &#123;army: &#x27;陆军&#x27;, navy: &#x27;海军&#x27;, airForce: &#x27;空军&#x27;, missileForce: &#x27;火箭军&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="流程控制">流程控制</h2>
<p>JavaScript
提供了一套灵活的流程控制语句，可以在应用程序当中实现大量的交互性功能。</p>
<h3 id="语句块">语句块</h3>
<p><strong>语句块</strong>用于组合多条 JavaScript 语句，由一对大括号
<code>&#123;&#125;</code> 进行界定：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  statement_1;</span><br><span class="line">  statement_2;</span><br><span class="line">  statement_3;</span><br><span class="line">  .</span><br><span class="line">  .</span><br><span class="line">  .</span><br><span class="line">  statement_n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>语句块通常与 <code>if</code>、<code>for</code>、<code>while</code>
等流程控制语句结合起来使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> week = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (week &lt;= <span class="number">7</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(week++); <span class="comment">// 1 2 3 4 5 6 7</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ECMAScript 6 标准之前，Javascript
并不存在<strong>块作用域</strong>的概念，变量的作用域从声明位置开始，一直会覆盖到源文件的末尾：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> day = <span class="number">27</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 块作用域 */</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> day = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(day); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>而使用 ECMAScript 6 的 <code>let</code> 和 <code>const</code>
关键字声明的变量，其作用域仅限于该声明所在的<strong>语句块</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> year = <span class="number">2022</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 块作用域 */</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> year = <span class="number">2016</span>;</span><br><span class="line">  <span class="keyword">const</span> month = <span class="number">12</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(year); <span class="comment">// 2022</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(month); <span class="comment">// Uncaught ReferenceError: month is not defined</span></span><br></pre></td></tr></table></figure>
<h3 id="条件判断">条件判断</h3>
<p>JavaScript 支持 <code>if...else</code> 和 <code>switch</code>
两种条件判断语句。</p>
<h4 id="if...else-语句">if...else 语句</h4>
<p>条件表达式 <code>condition</code> 返回 <code>true</code> 或者
<code>false</code>，如果返回的是 <code>true</code>，就会执行
<code>statement_1</code> 语句；如果返回的是 <code>false</code>，则会执行
<code>statement_2</code> 语句：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">  statement_1;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  statement_2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过组合使用 <code>else if</code> 语句，可以连续测试多种
<code>condition_x</code> 判断条件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition_1) &#123;</span><br><span class="line">  statement_1;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (condition_2) &#123;</span><br><span class="line">  statement_2;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (condition_n) &#123;</span><br><span class="line">  statement_n;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  statement_last;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通常不建议在条件表达式 <code>condition</code>
当中使用赋值语句，因为阅读代码时容易将其视为等值比较运算符
<code>==</code>。如果一定要在条件表达式当中使用赋值语句，通常需要在赋值语句前后额外添加一对括号
<code>(condition)</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x;</span><br><span class="line"><span class="keyword">let</span> y = <span class="number">2022</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((x = y)) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 2022</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>空字符串
<code>""</code>、<code>undefined</code>、<code>null</code>、<code>0</code>、<code>NaN</code>
在条件表达式 <code>condition</code> 当中，都将会被视为
<code>false</code> 条件：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">&quot;&quot;</span> &amp;&amp; <span class="literal">undefined</span> &amp;&amp; <span class="literal">null</span> &amp;&amp; <span class="number">0</span> &amp;&amp; <span class="title class_">NaN</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;全部条件为 true&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;全部条件为 false&quot;</span>); <span class="comment">// 全部条件为 false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>切记不要混淆原始布尔值 <code>true</code> 和 <code>false</code> 与
<code>Boolean</code> 对象的比较关系：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = <span class="keyword">new</span> <span class="title class_">Boolean</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (test) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Boolean 对象被视为 true&quot;</span>); <span class="comment">// Boolean 对象被视为 true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (test == <span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Boolean 对象被视为 false&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="switch-语句">switch 语句</h4>
<p><code>switch</code> 语句首先会查找与 <code>expression</code> 匹配的
<code>case</code>
子句，然后执行该子句当中对应的代码；如果没有匹配值，则会执行
<code>default</code> 子句里的代码，通常会将 <code>default</code>
子句放置在 <code>switch</code> 语句的最后。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (expression) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="attr">label_1</span>:</span><br><span class="line">    statements_1</span><br><span class="line">    [<span class="keyword">break</span>;]</span><br><span class="line">  <span class="keyword">case</span> <span class="attr">label_2</span>:</span><br><span class="line">    statements_2</span><br><span class="line">    [<span class="keyword">break</span>;]</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    statements_def</span><br><span class="line">    [<span class="keyword">break</span>;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可选的 <code>break</code> 语句放置在 <code>case</code>
子句当中，以确保匹配语句执行之后，执行流程可以跳出 <code>switch</code>
语句执行后续内容。如果忽略掉 <code>break</code>
语句，那么就会继续执行下一条 <code>case</code> 子句当中的内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> day = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDay</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用 break 语句 */</span></span><br><span class="line"><span class="keyword">switch</span> (day) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期天&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期一&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期二&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期三&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期四&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期五&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期六&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">今天是星期一</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 不使用 break 语句 */</span></span><br><span class="line"><span class="keyword">switch</span> (day) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期天&quot;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期一&quot;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期二&quot;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期三&quot;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期四&quot;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期五&quot;</span>);</span><br><span class="line">  <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;今天是星期六&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">今天是星期一</span></span><br><span class="line"><span class="comment">今天是星期二</span></span><br><span class="line"><span class="comment">今天是星期三</span></span><br><span class="line"><span class="comment">今天是星期四</span></span><br><span class="line"><span class="comment">今天是星期五</span></span><br><span class="line"><span class="comment">今天是星期六</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="循环">循环</h2>
<p>JavaScript 提供了
<code>for</code>、<code>do...while</code>、<code>while</code>、<code>label</code>、<code>break</code>、<code>continue</code>、<code>for...in</code>、<code>for...of</code>
一共 8 种循环相关的语法。</p>
<h3 id="for-循环">for 循环</h3>
<p><code>for</code> 循环会一直重复执行，直至循环条件变为
<code>false</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ([initialExpression]; [condition]; [incrementExpression]) &#123;</span><br><span class="line">  statement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>首先，执行初始化表达式
<code>initialExpression</code>，通常该表达式会初始化一个或多个循环计数器；</li>
<li>然后，计算 <code>condition</code> 表达式的值，如果
<code>condition</code> 为
<code>true</code>，那么执行循环当中的语句；如果 <code>condition</code>
为 <code>false</code>，那么循环将会终止；如果省略 <code>condition</code>
表达式，则 <code>condition</code> 的值默认为 <code>true</code>；</li>
<li>接着，执行循环里的 <code>statement</code>
语句，多条语句可以使用代码块 <code>&#123;&#125;</code> 进行包裹；</li>
<li>如果 <code>incrementExpression</code>
表达式存在更新，则会执行更新表达式，并且重新执行第 2 个步骤；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> index = <span class="number">0</span>; index &lt; <span class="number">6</span>; index++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前索引为&quot;</span>, index);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当前索引为 0</span></span><br><span class="line"><span class="comment">当前索引为 1</span></span><br><span class="line"><span class="comment">当前索引为 2</span></span><br><span class="line"><span class="comment">当前索引为 3</span></span><br><span class="line"><span class="comment">当前索引为 4</span></span><br><span class="line"><span class="comment">当前索引为 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="do...while-循环">do...while 循环</h3>
<p><code>do...while</code> 循环同样会一直重复直执行，直至指定的条件为
<code>false</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  statement;</span><br><span class="line">&#125; <span class="keyword">while</span> (condition);</span><br></pre></td></tr></table></figure>
<p><code>statement</code> 语句会在检查 <code>condition</code>
条件之前会执行一次，多条 <code>statement</code> 语句需要放置到花括号
<code>&#123;&#125;</code> 当中。如果 <code>condition</code> 为
<code>true</code>，那么 <code>statement</code>
语句将会再一次执行；而如果 <code>condition</code> 为
<code>false</code>，则循环终止运行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">  index++;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前索引为&quot;</span>, index);</span><br><span class="line">&#125; <span class="keyword">while</span> (index &lt; <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当前索引为 0</span></span><br><span class="line"><span class="comment">当前索引为 1</span></span><br><span class="line"><span class="comment">当前索引为 2</span></span><br><span class="line"><span class="comment">当前索引为 3</span></span><br><span class="line"><span class="comment">当前索引为 4</span></span><br><span class="line"><span class="comment">当前索引为 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="while-循环">while 循环</h3>
<p><code>while</code> 循环只要指定的条件 <code>condition</code> 为
<code>true</code>，就会一直执行 <code>statement</code> 语句块。如果条件
<code>condition</code> 为 <code>false</code>，则会终止循环。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (condition) &#123;</span><br><span class="line">  statement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>与 <code>do...while</code> 循环不同的是，<code>while</code> 循环的
<code>condition</code> 条件检测会在每次 <code>statement</code>
执行之前发生。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (index &lt; <span class="number">5</span>) &#123;</span><br><span class="line">  index++;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前索引为&quot;</span>, index);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当前索引为 0</span></span><br><span class="line"><span class="comment">当前索引为 1</span></span><br><span class="line"><span class="comment">当前索引为 2</span></span><br><span class="line"><span class="comment">当前索引为 3</span></span><br><span class="line"><span class="comment">当前索引为 4</span></span><br><span class="line"><span class="comment">当前索引为 5</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="label-语句">label 语句</h3>
<p><code>label</code>
用于在程序当中提供一个<strong>代码标识符</strong>，然后结合
<code>break</code> 或 <code>continue</code>
语句精确的返回到代码指定的位置。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">label:</span><br><span class="line">  statement;</span><br></pre></td></tr></table></figure>
<p>这里的 <code>label</code> 可以是任意合法的 JavaScript 标识符，而
<code>statement</code> 则可以是任意需要标识的 JavaScript 语句。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* label 与 break 结合使用 */</span></span><br><span class="line"><span class="keyword">let</span> result1 = <span class="number">0</span>;</span><br><span class="line"><span class="attr">myLabel</span>: <span class="keyword">for</span> (<span class="keyword">var</span> index1 = <span class="number">0</span>; index1 &lt; <span class="number">10</span>; index1++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> index2 = <span class="number">0</span>; index2 &lt; <span class="number">10</span>; index2++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index1 == <span class="number">5</span> &amp;&amp; index2 == <span class="number">5</span>) &#123;</span><br><span class="line">      <span class="keyword">break</span> myLabel; <span class="comment">// 当 i = 5 且 j = 5 时跳出全部循环，继续执行 myLabel 下方语句</span></span><br><span class="line">    &#125;</span><br><span class="line">    result1++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result1); <span class="comment">// 55</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* label 与 continue 结合使用 */</span></span><br><span class="line"><span class="keyword">let</span> result2 = <span class="number">0</span>;</span><br><span class="line"><span class="attr">myLabel</span>: <span class="keyword">for</span> (<span class="keyword">var</span> index1 = <span class="number">0</span>; index1 &lt; <span class="number">10</span>; index1++) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> index2 = <span class="number">0</span>; index2 &lt; <span class="number">10</span>; index2++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index1 == <span class="number">5</span> &amp;&amp; index2 == <span class="number">5</span>) &#123;</span><br><span class="line">      <span class="keyword">continue</span> myLabel; <span class="comment">// 当 i = 5 且 j = 5 时跳过本次循环，继续执行 myLabel 下方语句</span></span><br><span class="line">    &#125;</span><br><span class="line">    result2++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result2); <span class="comment">// 95</span></span><br></pre></td></tr></table></figure>
<h3 id="break-语句">break 语句</h3>
<p><code>break</code> 语句用于终止<strong>全部循环</strong>，当
<code>break</code> 没有指定 <code>label</code>
时，就会立刻终止当前所在的
<code>while</code>，<code>do...while</code>，<code>for</code>
循环语句，以及 <code>switch</code>
流程控制语句，并且执行这些语句之后的内容；而当使用带有
<code>label</code> 的 <code>break</code>
时，则会在终止全部循环之后，跳转至 <code>label</code>
所在的位置继续执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span> [label];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="number">5</span>; index++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前索引为&quot;</span>, index);</span><br><span class="line">  <span class="keyword">if</span> (index === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当索引等于 2 时结束全部循环&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当前索引为 0</span></span><br><span class="line"><span class="comment">当前索引为 1</span></span><br><span class="line"><span class="comment">当前索引为 2</span></span><br><span class="line"><span class="comment">当索引等于 2 时结束全部循环</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="continue-语句">continue 语句</h3>
<p><code>continue</code> 语句用于终止<strong>单次循环</strong>，当
<code>continue</code> 没有指定 <code>label</code> 时，就会立刻终止本次的
<code>while</code>，<code>do...while</code>，<code>for</code> 循环，以及
<code>switch</code> 流程控制语句，并且继续执行下一次循环；而当使用带有
<code>label</code> 的 <code>continue</code>
时，则只会在中断本次循环之后，跳转至 <code>label</code>
所处位置继续执行。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">continue</span> [label];</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="number">5</span>; index++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当前索引为&quot;</span>, index);</span><br><span class="line">  <span class="keyword">if</span> (index === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;当索引等于 2 时跳过该次循环&quot;</span>);</span><br><span class="line">    <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当前索引为 0</span></span><br><span class="line"><span class="comment">当前索引为 1</span></span><br><span class="line"><span class="comment">当前索引为 2</span></span><br><span class="line"><span class="comment">当索引等于 2 时跳过该次循环</span></span><br><span class="line"><span class="comment">当前索引为 3</span></span><br><span class="line"><span class="comment">当前索引为 4</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="for...in-循环">for...in 循环</h3>
<p><code>for...in</code>
循环通常用于遍历某个对象的<strong>可枚举属性</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (property <span class="keyword">in</span> object) &#123;</span><br><span class="line">  statements;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当在 <code>for...in</code> 循环当中访问对象属性时，可以采用
<code>object[property]</code> 的语法形式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">URL</span> = &#123; <span class="attr">blog</span>: <span class="string">&quot;www.uinika.com&quot;</span>, <span class="attr">github</span>: <span class="string">&quot;uinika.github.io&quot;</span>, <span class="attr">gitee</span>: <span class="string">&quot;uinika.gitee.io&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (url <span class="keyword">in</span> <span class="variable constant_">URL</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(url + <span class="string">&quot; ➡ &quot;</span> + <span class="variable constant_">URL</span>[url]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">blog ➡ www.uinika.com</span></span><br><span class="line"><span class="comment">github ➡ uinika.github.io</span></span><br><span class="line"><span class="comment">gitee ➡ uinika.gitee.io</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>除此之外，<code>for...in</code>
还可以用于遍历数组元素，但是此时返回的并非<strong>对象名称</strong>，而是<strong>数组索引</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">URLs</span> = [<span class="string">&quot;www.uinika.com&quot;</span>, <span class="string">&quot;uinika.github.io&quot;</span>, <span class="string">&quot;uinika.gitee.io&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (index <span class="keyword">in</span> <span class="title class_">URLs</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index + <span class="string">&quot; ➡ &quot;</span> + <span class="title class_">URLs</span>[index]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">0 ➡ www.uinika.com</span></span><br><span class="line"><span class="comment">1 ➡ uinika.github.io</span></span><br><span class="line"><span class="comment">2 ➡ uinika.gitee.io</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：<code>for...in</code>
是为了遍历对象属性而设计，由于会遍历出所有可枚举的属性，所以不建议使用它来遍历数组。</p>
</blockquote>
<h3 id="for...of-循环">for...of 循环</h3>
<p><code>for...of</code>
用于遍历数组时，返回的结果是每一个数组元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">URLs</span> = [<span class="string">&quot;www.uinika.com&quot;</span>, <span class="string">&quot;uinika.github.io&quot;</span>, <span class="string">&quot;uinika.gitee.io&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (url <span class="keyword">of</span> <span class="title class_">URLs</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(url);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">www.uinika.com</span></span><br><span class="line"><span class="comment">uinika.github.io</span></span><br><span class="line"><span class="comment">uinika.gitee.io</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="array.foreach-方法">Array.forEach() 方法</h3>
<p><code>Array.prototype.forEach()</code>
方法同样也可以用于迭代指定数组的每一个元素，并且执行一次给定的函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">forEach</span>(<span class="title function_">callback</span>(currentValue, index, array), thisArg);</span><br></pre></td></tr></table></figure>
<p><code>forEach</code> 的参数 <code>callback</code>
是迭代数组当中的每个元素时，所要执行的回调函数，该函数的
<code>currentValue</code> 参数表示当前正在迭代的元素，可选的
<code>index</code> 参数表示当前元素的索引，可选的 <code>array</code>
指代当前正在操作的数组；而另一个参数 <code>thisArg</code> 可选，表示执行
<code>callback</code> 回调函数时的 <code>this</code> 指针。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">URLs</span> = [<span class="string">&quot;www.uinika.com&quot;</span>, <span class="string">&quot;uinika.github.io&quot;</span>, <span class="string">&quot;uinika.gitee.io&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="title class_">URLs</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">currentValue, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(array);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(currentValue + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">[&#x27;www.uinika.com&#x27;, &#x27;uinika.github.io&#x27;, &#x27;uinika.gitee.io&#x27;]</span></span><br><span class="line"><span class="comment">www.uinika.com</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">[&#x27;www.uinika.com&#x27;, &#x27;uinika.github.io&#x27;, &#x27;uinika.gitee.io&#x27;]</span></span><br><span class="line"><span class="comment">uinika.github.io</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">[&#x27;www.uinika.com&#x27;, &#x27;uinika.github.io&#x27;, &#x27;uinika.gitee.io&#x27;]</span></span><br><span class="line"><span class="comment">uinika.gitee.io</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="数组-1">数组</h2>
<p><strong>数组</strong>用于表示一个有序的数据集合，可以通过数组的名称和索引访问其中的元素。</p>
<h3 id="创建数组">创建数组</h3>
<p>JavaScript
没有内置明确的<strong>数组数据类型</strong>，但是可以通过数组字面量语法，以及内置的
<code>Array</code> 对象，显式的创建拥有指定元素的数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [element0, element1, ..., elementN]; <span class="comment">// 数组字面量方式</span></span><br><span class="line"><span class="keyword">const</span> array = <span class="title class_">Array</span>(element0, element1, ..., elemntN);</span><br><span class="line"><span class="keyword">const</span> array = <span class="keyword">new</span> <span class="title class_">Array</span>(element0, element1, ..., elementN);</span><br></pre></td></tr></table></figure>
<p>除此之外，还可以通过如下方式创建一个指定长度的<strong>空数组</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [];</span><br><span class="line"><span class="keyword">const</span> array = <span class="title class_">Array</span>(arrayLength);</span><br><span class="line"><span class="keyword">const</span> array = <span class="keyword">new</span> <span class="title class_">Array</span>(arrayLength);</span><br></pre></td></tr></table></figure>
<h3 id="初始化数组">初始化数组</h3>
<p>JavaScript
支持通过<strong>直接为元素赋值</strong>的方式来初始化数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">URLs</span> = [];</span><br><span class="line"><span class="title class_">URLs</span>[<span class="number">0</span>] = <span class="string">&quot;www.uinio.com&quot;</span>;</span><br><span class="line"><span class="title class_">URLs</span>[<span class="number">1</span>] = <span class="string">&quot;www.uinimi.com&quot;</span>;</span><br><span class="line"><span class="title class_">URLs</span>[<span class="number">2</span>] = <span class="string">&quot;www.uinika.com&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">URLs</span>); <span class="comment">// [&#x27;www.uinio.com&#x27;, &#x27;www.uinimi.com&#x27;, &#x27;www.uinika.com&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>也可以像本节内容开头所描述的那样，在<strong>创建数组的时候</strong>直接进行初始化：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [<span class="string">&quot;苹果&quot;</span>, <span class="string">&quot;西柚&quot;</span>, <span class="string">&quot;橙子&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> trees = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&quot;松树&quot;</span>, <span class="string">&quot;柳树&quot;</span>, <span class="string">&quot;樟树&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(trees); <span class="comment">// [&#x27;松树&#x27;, &#x27;柳树&#x27;, &#x27;樟树&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="引用数组元素">引用数组元素</h3>
<p>通过数组元素的<strong>索引</strong>，可以从 <code>0</code>
开始引用数组的元素：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> trees = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&quot;松树&quot;</span>, <span class="string">&quot;柳树&quot;</span>, <span class="string">&quot;樟树&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(trees[<span class="number">0</span>]); <span class="comment">// 松树</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(trees[<span class="number">1</span>]); <span class="comment">// 柳树</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(trees[<span class="number">2</span>]); <span class="comment">// 樟树</span></span><br></pre></td></tr></table></figure>
<h3 id="数组长度">数组长度</h3>
<p>通过数组对象上提供的 <code>length</code>
属性，可以获取当前数组的实际长度信息，也就是数组元素的实际个数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [<span class="string">&quot;苹果&quot;</span>, <span class="string">&quot;西柚&quot;</span>, <span class="string">&quot;橙子&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits.<span class="property">length</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<p>通过手动设置 <code>length</code>
属性，还可以对数组的长度进行调整：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 当 length 属性大于实际数组长度时，采用 undefined 填充多余元素 */</span></span><br><span class="line"><span class="keyword">const</span> fruits = [<span class="string">&quot;苹果&quot;</span>, <span class="string">&quot;西柚&quot;</span>, <span class="string">&quot;橙子&quot;</span>];</span><br><span class="line">fruits.<span class="property">length</span> = <span class="number">4</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits); <span class="comment">// [&#x27;苹果&#x27;, &#x27;西柚&#x27;, &#x27;橙子&#x27;, empty]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits[<span class="number">3</span>]); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当 length 属性小于实际数组长度时，就会截取尾部多余的元素 */</span></span><br><span class="line">fruits.<span class="property">length</span> = <span class="number">2</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits); <span class="comment">// [&#x27;苹果&#x27;, &#x27;西柚&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 将 length 属性设置为 0 可以直接清空数组 */</span></span><br><span class="line">fruits.<span class="property">length</span> = <span class="number">0</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits); <span class="comment">// []</span></span><br></pre></td></tr></table></figure>
<h3 id="遍历数组">遍历数组</h3>
<p>使用 <code>for</code> 循环遍历数组元素是一种比较常规的操作：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> colors = [<span class="string">&quot;红色&quot;</span>, <span class="string">&quot;绿色&quot;</span>, <span class="string">&quot;蓝色&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; colors.<span class="property">length</span>; index++) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(colors[index]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">红色</span></span><br><span class="line"><span class="comment">绿色</span></span><br><span class="line"><span class="comment">蓝色</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>forEach()</code> 则是另外一种遍历数组元素的方法，传递给
<code>forEach()</code>
的函数会在遍历数组的每个元素时执行一次，数组元素将会作为<strong>参数</strong>传递给该函数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> colors = [<span class="string">&quot;红色&quot;</span>, <span class="string">&quot;绿色&quot;</span>, <span class="string">&quot;蓝色&quot;</span>];</span><br><span class="line"></span><br><span class="line">colors.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">color</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(color);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">红色</span></span><br><span class="line"><span class="comment">绿色</span></span><br><span class="line"><span class="comment">蓝色</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：<code>forEach()</code>
不会遍历出定义数组时未经初始化的元素，但是会遍历出被手动赋值为
<code>undefined</code> 的元素：</p>
</blockquote>
<p>原则上 <code>for...in</code>
语句是为遍历对象设计的，使用其迭代数组时，会枚举出所有的可枚举属性，生产环境下<strong>不建议使用</strong>。例如下面示例代码，就将定义在
<code>Array</code> 对象原型上的 <code>blog</code> 遍历打印了出来：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">blog</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;www.uinio.com&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> colors = [<span class="string">&quot;红色&quot;</span>, <span class="string">&quot;绿色&quot;</span>, <span class="string">&quot;蓝色&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (index <span class="keyword">in</span> colors) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index + colors[index]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">0红色</span></span><br><span class="line"><span class="comment">1绿色</span></span><br><span class="line"><span class="comment">2蓝色</span></span><br><span class="line"><span class="comment">blogfunction () &#123;</span></span><br><span class="line"><span class="comment">  console.log(&quot;www.uinio.com&quot;);</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="函数">函数</h2>
<p>函数是 JavaScript
的基本语法组件，由一系列用于执行计算任务的语句构成，而且与变量一样，只能在其有效的作用域当中进行调用。</p>
<h3 id="函数定义">函数定义</h3>
<p>JavaScript 函数采用 <code>function</code>
关键字进行定义，主要由<strong>函数名称</strong>、<strong>参数列表</strong>（包围在圆括号
<code>()</code> 当中并且由逗号 <code>,</code>
进行分隔）、<strong>函数体</strong>（采用大括号 <code>&#123;&#125;</code>
包围，并且使用 <code>return</code> 关键字返回结果）三个部分组成。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">square</span>(<span class="params">size</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> size * size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>值传递</strong>：<strong>基本数据类型</strong>的参数值会直接传递给函数，如果在函数当中修改了该参数的值，这种影响并不会传递到函数外部的作用域；</li>
<li><strong>引用传递</strong>：<strong>对象类型</strong>的参数值会将<strong>引用</strong>传递给函数，如果在函数当中修改了对象的属性，这种影响就会传递到函数外部的作用域；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">2022</span>;</span><br><span class="line"><span class="keyword">const</span> object = &#123; <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">update</span>(<span class="params">number, object</span>) &#123;</span><br><span class="line">  number = <span class="number">1985</span>; <span class="comment">// 修改基本数据类型</span></span><br><span class="line">  object.<span class="property">name</span> = <span class="string">&quot;uinika&quot;</span>; <span class="comment">// 修改对象类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">update</span>(number, object);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(number); <span class="comment">// 2022</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object); <span class="comment">// &#123;name: &#x27;uinika&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="函数表达式">函数表达式</h4>
<p>通过<strong>函数表达式</strong>方式创建的函数不需要直接指定函数名称，例如前面的
<code>square()</code> 函数也可以采用如下方式进行声明：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> square = <span class="keyword">function</span> (<span class="params">size</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> size * size;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>采用函数表达式，可以非常方便的将函数作为<strong>参数</strong>传递给另外一个函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">battleax</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是一枚战斧导弹!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">destroyer</span>(<span class="params">status, missile</span>) &#123;</span><br><span class="line">  <span class="title function_">missile</span>();</span><br><span class="line">  <span class="keyword">if</span> (status === <span class="string">&quot;击中&quot;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;驱逐舰已经被击中!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">destroyer</span>(<span class="string">&quot;击中&quot;</span>, battleax);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">这是一枚战斧导弹!</span></span><br><span class="line"><span class="comment">驱逐舰已经被击中!</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>函数表达式的另外一个用途，则是可以根据判断条件来声明定义一个函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> happy, depression;</span><br><span class="line"><span class="keyword">let</span> weather = <span class="string">&quot;SUNNY&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (weather === <span class="string">&quot;SUNNY&quot;</span>) &#123;</span><br><span class="line">  happy = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我的心情很开心!&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  depression = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我的心情很沮丧!&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">happy</span>(); <span class="comment">// 我的心情很开心!</span></span><br><span class="line"><span class="title function_">depression</span>(); <span class="comment">// Uncaught ReferenceError: depression is not defined</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：如果调用不符合判断条件的函数，JavaScript
解析引擎将会提示 <code>ReferenceError</code> 错误。</p>
</blockquote>
<h4 id="function-对象">Function 对象</h4>
<p>每一个 JavaScript 函数本质上都是一个 <code>Function</code> 对象，通过
<code>Function()</code> 构造函数就可以动态创建一个函数对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Function</span> (参数<span class="number">1</span>, 参数<span class="number">2</span>, ..., 函数体)</span><br></pre></td></tr></table></figure>
<p><strong>参数</strong>是由 JavaScript
有效标识符组成的字符串，当具有多个参数时可以使用逗号 <code>,</code>
分隔。而<strong>函数体</strong>则是一个包含有函数定义语句的 JavaScript
字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sum = <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;return a + b&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sum</span>(<span class="number">1985</span>, <span class="number">2022</span>)); <span class="comment">// 4007</span></span><br></pre></td></tr></table></figure>
<p>通过 <code>Function()</code> 创建函数会存在与 <code>eval()</code>
类似的安全问题和相对较小的性能问题，并且 <code>Function</code>
创建的函数只能在全局作用域当中运行，只能访问到<strong>全局变量</strong>和自身的<strong>局部变量</strong>，并不能访问
<code>Function()</code> 构造函数所在作用域当中的变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> local = <span class="number">1985</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> year1 = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> local = <span class="number">2022</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Function</span>(<span class="string">&quot;return local;&quot;</span>); <span class="comment">// 此处的变量 local 指向全局作用域的 1985</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> year2 = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> local = <span class="number">2022</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> local; <span class="comment">// 此处的变量 local 指向函数 year2 作用域的 2022</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> resut1 = <span class="title function_">year1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">resut1</span>()); <span class="comment">// 1985</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> resut2 = <span class="title function_">year2</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">resut2</span>()); <span class="comment">// 2022</span></span><br></pre></td></tr></table></figure>
<p>虽然上述代码可以在 Web 浏览器当中正常执行，但是在 NodeJS 当中函数
<code>year1()</code> 将会产生
<code>ReferenceError: local is not defined</code> 错误，这是由于 NodeJS
里 <code>.js</code> 源文件的顶级作用域并非全局作用域，函数
<code>year1()</code> 当中的变量 <code>local</code>
实质位于当前模块的作用域之中。</p>
<blockquote>
<p><strong>注意</strong>：如果当前 JavaScript 运行环境是 Web
浏览器，执行以 <code>Function()</code> 方式构造的函数，需要修改 Web
浏览器默认的 <strong>HTTP 内容安全策略</strong>
<code>"content_security_policy"</code> 为
<code>"unsafe-eval"</code>。</p>
</blockquote>
<h3 id="调用函数">调用函数</h3>
<p>声明并且定义函数之后，就可以通过 <code>函数名称()</code>
的方式调用函数。这里要特别注意<strong>函数定义</strong>一定要位于调用语句所处的作用域，而<strong>函数声明</strong>则可以被提升，因而可以出现在调用语句之后。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">square</span>(<span class="number">50</span>)); <span class="comment">// 2500</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">square</span>(<span class="params">size</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> size * size;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>函数表达式无法进行提升，所以将上面代码修改为如下格式是错误的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">square</span>(<span class="number">50</span>)); <span class="comment">// Uncaught SyntaxError: Identifier &#x27;square&#x27; has already been declared</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">function</span> (<span class="params">size</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> size * size;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>函数</strong>可以在自身的<strong>函数体</strong>当中进行<strong>递归调用</strong>，下面的示例当中通过函数的递归调用来计算阶乘：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">factorial</span>(<span class="params">number</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (number == <span class="number">0</span> || number == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">/* 递归调用函数本身 */</span></span><br><span class="line">    <span class="keyword">return</span> number * <span class="title function_">factorial</span>(number - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">factorial</span>(<span class="number">3</span>); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
<h3 id="函数的作用域">函数的作用域</h3>
<p>函数当中定义的<strong>局部变量</strong>只能在该函数体内部进行访问，除此之外，还可以访问到<strong>全局变量</strong>或者定义在父函数当中的<strong>局部变量</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 全局变量 */</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">URL</span> = <span class="string">&quot;www.uinio.com&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printName1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printName2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> name = <span class="string">&quot;uinika&quot;</span>; <span class="comment">// 局部变量</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> name + <span class="string">&quot;&#x27;s Blog &quot;</span> + <span class="variable constant_">URL</span>; <span class="comment">// 访问函数外层的局部变量以及全局变量</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getName</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">printName1</span>()); <span class="comment">// Hank</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">printName2</span>()); <span class="comment">// uinika&#x27;s Blog www.uinio.com</span></span><br></pre></td></tr></table></figure>
<h3 id="递归函数调用">递归函数调用</h3>
<p>通过<strong>函数名称</strong>、<code>arguments.callee</code>、<strong>指向该函数的变量名称</strong>，就可以在一个函数的内部调用自身，也就是所谓的<strong>递归</strong>。例如下面函数里，<code>bar()</code>、<code>arguments.callee()</code>、<code>foo()</code>
三条语句都可以调用函数自身：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">China</span> = <span class="keyword">function</span> <span class="title function_">chinese</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">China</span>(); <span class="comment">// 函数名称</span></span><br><span class="line">  <span class="variable language_">arguments</span>.<span class="title function_">callee</span>();</span><br><span class="line">  <span class="title function_">chinese</span>(); <span class="comment">// 指向该函数的变量名称</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>使用递归函数的时候，需要注意加入合适的循环终止条件，避免进入到<strong>死循环</strong>，锁死当前
JavaScript 解析引擎的执行线程。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 采用 while 循环打印 0 ~ 3 范围的整数 */</span></span><br><span class="line"><span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="comment">/* index &lt;= 3 是循环中止条件 */</span></span><br><span class="line"><span class="keyword">while</span> (index &lt;= <span class="number">3</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">  index++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 将 while 循环转换为递归函数调用 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params">index</span>) &#123;</span><br><span class="line">  <span class="comment">/* index &gt; 3 是循环中止条件 */</span></span><br><span class="line">  <span class="keyword">if</span> (index &gt; <span class="number">3</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">  <span class="title function_">loop</span>(index + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">loop</span>(<span class="number">0</span>);</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">0</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">2</span></span><br><span class="line"><span class="comment">3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>当需要获取一个<strong>树结构</strong>当中的所有节点时，使用递归函数会比循环语句更为方便：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">traversalTree</span>(<span class="params">node</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;可以在这个位置操作树节点&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; node.<span class="property">childNodes</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="title function_">traversalTree</span>(node.<span class="property">childNodes</span>[i]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除此之外，通过灵活的应用递归函数，还可以在函数当中模拟出<strong>堆栈</strong>数据结构的行为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">traversal</span>(<span class="params">index</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;开始：&quot;</span> + index);</span><br><span class="line">  <span class="title function_">traversal</span>(index - <span class="number">1</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;结束：&quot;</span> + index);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">traversal</span>(<span class="number">3</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">开始：3</span></span><br><span class="line"><span class="comment">开始：2</span></span><br><span class="line"><span class="comment">开始：1</span></span><br><span class="line"><span class="comment">开始：0</span></span><br><span class="line"><span class="comment">结束：0</span></span><br><span class="line"><span class="comment">结束：1</span></span><br><span class="line"><span class="comment">结束：2</span></span><br><span class="line"><span class="comment">结束：3</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="嵌套函数">嵌套函数</h3>
<p><strong>父函数</strong>当中可以嵌套一个<strong>子函数</strong>，此时<strong>子函数</strong>可以在<strong>父函数</strong>当中进行调用，<strong>子函数</strong>内部将会形成一个可以访问<strong>父函数</strong>参数与变量的<strong>闭包</strong>，而<strong>父函数</strong>并不能使用<strong>子函数</strong>当中的参数与变量。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">totalSquares</span>(<span class="params">size1, size2</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">square</span>(<span class="params">size</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> size * size;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// console.log(size); // Uncaught ReferenceError: size is not defined</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">square</span>(size1) + <span class="title function_">square</span>(size2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">totalSquares</span>(<span class="number">1</span>, <span class="number">2</span>)); <span class="comment">//  5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">totalSquares</span>(<span class="number">2</span>, <span class="number">3</span>)); <span class="comment">//  13</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">totalSquares</span>(<span class="number">3</span>, <span class="number">4</span>)); <span class="comment">//  25</span></span><br></pre></td></tr></table></figure>
<p>这是由于<strong>闭包</strong>可以保存其所见作用域当中的所有参数与变量，所以下面示例当中的子函数
<code>child</code> 被返回时，<code>parent</code> 的参数值 <code>x</code>
也会被一同保留下来：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 父函数 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">parent</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="comment">/* 子函数 */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">child</span>(<span class="params">y</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> child;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> childFunction = <span class="title function_">parent</span>(<span class="number">2</span>); <span class="comment">// 使用静态变量 childFunction 接收返回的 child 函数</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">childFunction</span>(<span class="number">6</span>)); <span class="comment">// 8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">parent</span>(<span class="number">5</span>)(<span class="number">8</span>)); <span class="comment">// 13</span></span><br></pre></td></tr></table></figure>
<p>JavaScript 函数支持多层嵌套，例如函数 <code>A</code> 可以包含函数
<code>B</code>，而函数 <code>B</code> 可以再包含函数
<code>C</code>。此时函数 <code>B</code> 和 <code>C</code>
都形成了<strong>闭包</strong>，它们都同时包含着多个作用域（<code>B</code>
可以访问 <code>A</code>，<code>C</code> 可以访问 <code>B</code> 和
<code>A</code>），这种递归式包含的作用域称为<strong>作用域链</strong>，具体请参考下面的示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">B</span>(<span class="params">y</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">C</span>(<span class="params">z</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(x + y + z);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">C</span>(<span class="number">3</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">B</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">A</span>(<span class="number">1</span>); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
<p>当相同闭包<strong>作用域链</strong>当中的参数或者变量出现命名冲突时，距离<strong>调用位置</strong>更近的参数或者变量会拥有更高的优先级：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> number = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">child</span>(<span class="params">number</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (number = <span class="number">8</span>); <span class="comment">// 变量 number 出现命名冲突</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> child;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">parent</span>()(<span class="number">2022</span>); <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>
<h3 id="闭包-closure">闭包 Closure</h3>
<p>正如前面内容所提到的，JavaScript
允许函数嵌套，并且<strong>子函数</strong>可以访问<strong>父函数</strong>以及<strong>父函数所能访问作用域</strong>里的全部变量与函数，而<strong>父函数</strong>却不能访问定义在<strong>子函数</strong>当中的变量与函数。由于<strong>子函数</strong>可以访问到<strong>父函数</strong>的作用域，因此当<strong>子函数</strong>生命周期大于<strong>父函数</strong>的时候，<strong>父函数</strong>所定义变量与函数的生存周期将会比<strong>子函数</strong>更为持久。当<strong>子函数</strong>在<strong>父函数</strong>作用域当中被访问时，就产生了一个<strong>闭包</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 变量 name */</span></span><br><span class="line"><span class="keyword">const</span> parent = <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> child = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> name; <span class="comment">// 子函数可以访问父函数的 name 参数</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> child; <span class="comment">// 返回子函数，将其暴露在父函数作用域</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> temporary = <span class="title function_">parent</span>(<span class="string">&quot;Hank&quot;</span>); <span class="comment">// 将返回的子函数赋值给变量 temporary</span></span><br><span class="line"><span class="title function_">temporary</span>(); <span class="comment">// Hank</span></span><br></pre></td></tr></table></figure>
<p>实际的情况可能会更加复杂，下面代码返回了一个对象，这些对象上自定义的
<code>getter</code> 与 <code>setter</code> 函数可以用于操作父函数
<code>blogger</code> 当中的内部变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> blogger = <span class="keyword">function</span> (<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> age;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">getName</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">setName</span>: <span class="keyword">function</span> (<span class="params">newName</span>) &#123;</span><br><span class="line">      name = newName;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getAge</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> age;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">setAge</span>: <span class="keyword">function</span> (<span class="params">newAge</span>) &#123;</span><br><span class="line">      age = newAge;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> article = <span class="title function_">blogger</span>(<span class="string">&quot;uinika&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(article.<span class="title function_">getName</span>()); <span class="comment">// uinika</span></span><br><span class="line"></span><br><span class="line">article.<span class="title function_">setName</span>(<span class="string">&quot;Hank&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(article.<span class="title function_">getName</span>()); <span class="comment">// Hank</span></span><br><span class="line"></span><br><span class="line">article.<span class="title function_">setAge</span>(<span class="number">36</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(article.<span class="title function_">getAge</span>()); <span class="comment">// 36</span></span><br></pre></td></tr></table></figure>
<p>上述代码当中，子函数都可以获得 <code>blogger()</code> 父函数的
<code>name</code>
参数。除此之外，没有其它办法可以获得父函数内部定义的参数或者变量，从而为其提供了一个安全稳定的运行环境。例如下面代码当中，不能直接通过名称访问变量
<code>code</code> 的值，而只能通过 <code>getCode()</code> 函数获取变量
<code>code</code> 的值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getCode = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> code = <span class="string">&quot;610000&quot;</span>; <span class="comment">// 不希望被外部修改的 code 变量</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> code;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getCode</span>()); <span class="comment">// 610000</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(code); <span class="comment">// Uncaught ReferenceError: code is not defined</span></span><br></pre></td></tr></table></figure>
<p>尽管有着充当<strong>局部变量</strong>保险箱的优点，但是在使用闭包特性仍然需要避免一些陷阱，例如<strong>子函数</strong>闭包当中定义了一个与<strong>父函数</strong>相同名称的变量，那么在该闭包作用域当中，将会无法引用<strong>父函数</strong>当中的这个同名变量。例如下面代码当中，调用
<code>getCode()</code> 函数时同时传递了
<code>610000</code>（父函数参数）和
<code>610095</code>（子函数参数）两个参数，而最终返回的
<code>code</code> 值为 <code>610095</code> ：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getCode = <span class="keyword">function</span> (<span class="params">code</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">code</span>) &#123;</span><br><span class="line">    code = code;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(code);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getCode</span>(<span class="number">610000</span>)(<span class="number">610095</span>); <span class="comment">// 610095</span></span><br></pre></td></tr></table></figure>
<h3 id="arguments-对象">arguments 对象</h3>
<p>函数的实际参数会被保存在一个 <code>arguments</code> 对象当中，这个
<code>arguments</code>
是一个<strong>类数组对象</strong>，同样可以采用索引
<code>arguments[index]</code> 访问具体的参数，也可以使用
<code>arguments.length</code> 属性获得参数的具体个数（无参数时为
<code>0</code>）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">blog</span>(<span class="params">URLs</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> string = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">1</span>; index &lt; <span class="variable language_">arguments</span>.<span class="property">length</span>; index++) &#123;</span><br><span class="line">    string += <span class="variable language_">arguments</span>[index] + <span class="string">&quot; &quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(string);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">arguments</span>.<span class="property">length</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">blog</span>(<span class="string">&quot;www.uinio.com&quot;</span>, <span class="string">&quot;www.uinika.com&quot;</span>, <span class="string">&quot;uinika.gitee.io&quot;</span>, <span class="string">&quot;uinika.github.io&quot;</span>);</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">www.uinika.com uinika.gitee.io uinika.github.io</span></span><br><span class="line"><span class="comment">4</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：<code>arguments</code>
对象常用于不确定函数会接收多少个参数的场景。</p>
</blockquote>
<h3 id="默认参数">默认参数</h3>
<p>JavaScript 函数参数的默认值是 <code>undefined</code>，通过 ECMAScript
6 提供的默认参数特性，可以为函数指定默认的参数值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">profile</span>(<span class="params">name, URL = <span class="string">&quot;www.uinio.com&quot;</span></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name + <span class="string">&quot;&#x27;s Blog is &quot;</span> + <span class="variable constant_">URL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">profile</span>(<span class="string">&quot;Hank&quot;</span>); <span class="comment">// Hank&#x27;s Blog is www.uinio.com</span></span><br></pre></td></tr></table></figure>
<h3 id="剩余参数-1">剩余参数</h3>
<p>剩余参数同样也是 ECMAScript 6
提供的新特性，用于将不确定具体数量的参数表示为一个数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">profile</span>(<span class="params">name, ...URLs</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">URLs</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title class_">URLs</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">URL</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">URL</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">profile</span>(<span class="string">&quot;Hank&quot;</span>, <span class="string">&quot;www.uinio.com&quot;</span>, <span class="string">&quot;www.uinika.com&quot;</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Hank</span></span><br><span class="line"><span class="comment">[&#x27;www.uinio.com&#x27;, &#x27;www.uinika.com&#x27;]</span></span><br><span class="line"><span class="comment">www.uinio.com</span></span><br><span class="line"><span class="comment">www.uinika.com</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="箭头函数">箭头函数</h3>
<p>ECMAScript 6 提供的<strong>箭头函数</strong>相比于传统的 JavaScript
函数，具有更为简短的书写语法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">printName</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hank&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">printURL</span> = (<span class="params">URL</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">URL</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">printName</span>(); <span class="comment">// Hank</span></span><br><span class="line"><span class="title function_">printURL</span>(<span class="string">&quot;www.uinio.com&quot;</span>); <span class="comment">// www.uinio.com</span></span><br></pre></td></tr></table></figure>
<p>采用关键字 <code>new</code> 实例化一个普通 JavaScript
函数时，总是会将 <code>this</code> 指针指向全局对象 <code>window</code>
或者 <code>global</code>。而箭头函数则会从词法上自动绑定
<code>this</code> 指针至当前对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="variable language_">this</span>); <span class="comment">// Author</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 箭头函数会自动绑定当前对象的 this 指针 */</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">arrow</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="variable language_">this</span>); <span class="comment">// Author</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">arrow</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 传统函数会将 this 指针绑定到全局对象 window */</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">tradition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(<span class="variable language_">this</span>); <span class="comment">// window</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">tradition</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> author = <span class="keyword">new</span> <span class="title class_">Author</span>(); <span class="comment">// 使用 new 关键字创建对象</span></span><br></pre></td></tr></table></figure>
<p>如果需要让传统 JavaScript 函数当中的 <code>this</code>
指针指向当前对象，则可以将其赋值给一个命名为 <code>that</code> 或者
<code>self</code> 的局部变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Demo</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> self = <span class="variable language_">this</span>;</span><br><span class="line">  <span class="keyword">const</span> that = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getThat</span>(<span class="params"></span>) &#123;</span><br><span class="line">    that.<span class="property">name</span> = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(that);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getThat</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">getSelf</span>(<span class="params"></span>) &#123;</span><br><span class="line">    self.<span class="property">URL</span> = <span class="string">&quot;www.uinio.com&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">dir</span>(self);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getSelf</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> demo = <span class="keyword">new</span> <span class="title class_">Demo</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Demo</span></span><br><span class="line"><span class="comment">  URL: &quot;www.uinio.com&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;Hank&quot;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">Demo</span></span><br><span class="line"><span class="comment">  URL: &quot;www.uinio.com&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;Hank&quot;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="预定义函数">预定义函数</h3>
<p>JavaScript
语言内置了一系列可以在全局作用域当中直接进行调用的<strong>预定义函数</strong>：</p>
<table>
<colgroup>
<col style="width: 11%">
<col style="width: 51%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">预定义函数</th>
<th style="text-align: left;">功能描述</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>eval()</code></td>
<td style="text-align: left;">解析一段字符串形式的 JavaScript
代码；</td>
<td><code>eval("console.log(this)"); // Window</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>isFinite()</code></td>
<td style="text-align: left;">判断传入的参数值是否为有限数值；</td>
<td><code>isFinite(2022); // true</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>isNaN()</code></td>
<td style="text-align: left;">判断传入的参数值是否为
<code>NaN</code>；</td>
<td><code>isNaN(NaN); // true</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>parseInt()</code></td>
<td style="text-align: left;">将参数字符串解析为一个整数值；</td>
<td><code>parseInt("2006"); // 2006</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>parseFloat()</code></td>
<td style="text-align: left;">将参数字符串解析为一个浮点数值；</td>
<td><code>parseFloat("3.14"); // 3.14</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>encodeURI()</code></td>
<td style="text-align: left;">编码 URI 当中除
<code>数字</code>、<code>大小写字母</code> 以及
<code>; , / ? : @ &amp; = + $ - _ . ! ~ * ' ( ) #</code>
以外的字符；</td>
<td><code>encodeURI("www.uinika.com?blog=博客");</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>decodeURI()</code></td>
<td style="text-align: left;">解码 URI 当中除
<code>数字</code>、<code>大小写字母</code> 以及
<code>; , / ? : @ &amp; = + $ - _ . ! ~ * ' ( ) #</code>
以外的字符；</td>
<td><code>decodeURI('www.uinika.com?blog=%E5%8D%9A%E5%AE%A2');</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>encodeURIComponent()</code></td>
<td style="text-align: left;">编码 URI 当中除
<code>数字</code>、<code>大小写字母</code> 以及
<code>- _ . ! ~ * ' ( )</code> 之外的字符；</td>
<td><code>encodeURIComponent("www.uinika.com?blog=博客");</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>decodeURIComponent()</code></td>
<td style="text-align: left;">解码 URI 当中除
<code>数字</code>、<code>大小写字母</code> 以及
<code>- _ . ! ~ * ' ( )</code> 之外的字符；</td>
<td><code>decodeURIComponent("www.uinika.com%3Fblog%3D%E5%8D%9A%E5%AE%A2");</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意</strong>：相比于 <code>encodeURI()</code>
方法，<code>encodeURIComponent()</code>
方法的编码转义范围更为广泛，但是转换之后的 URI
地址无法直接进行访问。</p>
</blockquote>
<h2 id="对象-1">对象</h2>
<p>JavaScript 当中的<strong>对象</strong>是一系列属性和方法的集合。</p>
<h3 id="创建对象">创建对象</h3>
<p><strong>JavaScript 当中对象创建方式的不同，也会导致 <code>this</code>
指针的的指向有所不同，在使用时必须特别注意。</strong></p>
<h4 id="对象字面量">对象字面量 <code>&#123;&#125;</code></h4>
<p>JavaScript 允许通过字面量 <code>&#123;&#125;</code>
方式创建对象，其语法格式如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> objectName = &#123;</span><br><span class="line">  <span class="attr">propertyName</span>: value,</span><br><span class="line">  <span class="attr">functionName</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>下面代码采用字面量方式定义了一个 <code>Person</code>
对象，该对象拥有一个 <code>name</code> 参数和一个
<code>printName()</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="attr">printName</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// &#123;name: &#x27;Hank&#x27;, age: 36, printName: ƒ, printAge: ƒ&#125;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">printName</span>(); <span class="comment">// Hank</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：在使用字面量创建的对象当中定义箭头函数时，箭头函数当中的
<code>this</code> 指针将会指向全局对象 <code>window</code>。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="attr">printAge</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// Window &#123;window: Window, self: Window, document: document, name: &#x27;&#x27;, location: Location, …&#125;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Person</span>.<span class="title function_">printAge</span>(); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<h4 id="构造函数-function">构造函数 function</h4>
<p>采用 <code>function</code>
关键字同样可以创建一个对象，但是与字面量语法不同的是，在使用之前必须采用关键字
<code>new</code> 手动进行实例化。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">objectName</span>(<span class="params">parameter</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">propertyName</span> = parameter;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">functionName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">functionName</span> = <span class="function">() =&gt;</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title function_">objectName</span>(parameter);</span><br></pre></td></tr></table></figure>
<p>下面代码采用 <code>function</code> 构造函数方式定义了一个
<code>Person</code> 对象，该对象拥有一个 <code>name</code> 参数和一个
<code>printName()</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="comment">/* 采用普通 function 函数定义对象方法 */</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">printName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// Person &#123;name: &#x27;uinika&#x27;, printName: ƒ&#125;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;uinika&quot;</span>);</span><br><span class="line">person.<span class="title function_">printName</span>(); <span class="comment">// uinika</span></span><br></pre></td></tr></table></figure>
<p>在采用 <code>function</code>
构造函数创建的对象当中定义箭头函数时，箭头函数内的 <code>this</code>
指针依然会指向当前对象 <code>Person</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="comment">/* 采用箭头函数定义对象方法 */</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">printName</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// Person &#123;name: &#x27;uinika&#x27;, printName: ƒ&#125;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;uinika&quot;</span>);</span><br><span class="line">person.<span class="title function_">printName</span>(); <span class="comment">// uinika</span></span><br></pre></td></tr></table></figure>
<h4 id="object.create-方法">Object.create() 方法</h4>
<p>基于现有对象的 <code>__proto__</code>
创建一个新的对象，而不需要使用到字面量语法 <code>&#123;&#125;</code>，或者构造函数
<code>function</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object.create(proto，[propertiesObject])</span><br></pre></td></tr></table></figure>
<p>上面的 <code>proto</code> 表示新创建对象的原型（可缺省），而
<code>propertiesObject</code>
表示提供属性的对象，该方法执行后返回一个带有指定原型和属性的新对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">URL</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">print</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">// &#123;name: &#x27;Hank&#x27;, URL: &#x27;www.uinika.com&#x27;&#125;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`我是 <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>，我的博客是 <span class="subst">$&#123;<span class="variable language_">this</span>.URL&#125;</span>。`</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Person</span>); <span class="comment">// 使用 Object.create() 创建对象</span></span><br><span class="line"></span><br><span class="line">person.<span class="property">name</span> = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line">person.<span class="property">URL</span> = <span class="string">&quot;www.uinika.com&quot;</span>;</span><br><span class="line">person.<span class="title function_">print</span>(); <span class="comment">// 我是 Hank，我的博客是 www.uinika.com。</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：<code>prototype</code>
是函数才会拥有的属性，而 <code>proto</code>
是每个对象都会拥有的属性。</p>
</blockquote>
<h3 id="创建对象实例-new">创建对象实例 new</h3>
<p><code>new</code>
操作符用于创建一个自定义对象的<strong>实例</strong>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> objectName = new objectType([parameter1, parameter2, ..., parameterN]);</span><br></pre></td></tr></table></figure>
<p>上面的 <code>objectName</code> 是对象名称，而 <code>objectType</code>
是对象参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Author</span>(<span class="params">name, URL</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">URL</span> = <span class="variable constant_">URL</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">print</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> author = <span class="keyword">new</span> <span class="title class_">Author</span>(<span class="string">&quot;Hank&quot;</span>, <span class="string">&quot;www.uinio.com&quot;</span>);</span><br><span class="line">author.<span class="title function_">print</span>();</span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">Author &#123;name: &#x27;Hank&#x27;, URL: &#x27;www.uinio.com&#x27;, print: ƒ&#125;</span></span><br><span class="line"><span class="comment">  URL: &quot;www.uinio.com&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;Hank&quot;</span></span><br><span class="line"><span class="comment">  print: () =&gt; &#123; console.log(this); &#125;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="指向对象自身-this">指向对象自身 this</h3>
<p><code>this</code>
关键字指向当前对象本身，可以用于引用当前对象上定义的<code>方法</code>或者<code>属性</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 字面量对象的 this 指针 */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="attr">print</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Author</span>.<span class="title function_">print</span>(); <span class="comment">// &#123;name: &#x27;Hank&#x27;, print: ƒ&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 函数对象当中的 this 指针*/</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Writer</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">print</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> writer = <span class="keyword">new</span> <span class="title class_">Writer</span>();</span><br><span class="line">writer.<span class="title function_">print</span>(); <span class="comment">// Writer &#123;name: &#x27;Hank&#x27;, print: ƒ&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="访问父对象-super">访问父对象 super</h3>
<p><code>super</code>
关键字可以用于引用当前对象的<strong>父对象</strong>构造函数，或者用于访问父对象上定义的<code>方法</code>和<code>属性</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">super</span>([<span class="variable language_">arguments</span>]); <span class="comment">// 调用父对象的构造函数</span></span><br><span class="line"><span class="variable language_">super</span>.<span class="title function_">parentFunction</span>([<span class="variable language_">arguments</span>]); <span class="comment">// 调用父对象上的方法</span></span><br></pre></td></tr></table></figure>
<p>上面的 <code>arguments</code>
是传递给父对象的构造函数或者普通方法的参数，而
<code>parentFunction</code> 指代的是父对象上定义的方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 父对象 */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 子对象 */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Hank</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name, URL</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name); <span class="comment">// 调用父对象 Person 上的构造函数</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">URL</span> = <span class="variable constant_">URL</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">print</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">print</span>(); <span class="comment">// 调用父对象 Person 上定义的 print() 方法，但是打印结果为 Hank 对象上的 this 指针</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hank = <span class="keyword">new</span> <span class="title class_">Hank</span>(<span class="string">&quot;uinika&quot;</span>, <span class="string">&quot;www.uinio.com&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hank);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Hank &#123;name: &#x27;uinika&#x27;, URL: &#x27;www.uinio.com&#x27;&#125;</span></span><br><span class="line"><span class="comment">  URL: &quot;www.uinio.com&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;uinika&quot;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Person</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">hank.<span class="title function_">print</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Hank &#123;name: &#x27;uinika&#x27;, URL: &#x27;www.uinio.com&#x27;&#125;</span></span><br><span class="line"><span class="comment">  URL: &quot;www.uinio.com&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;uinika&quot;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Person</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="删除属性-delete">删除属性 delete</h3>
<p><code>delete</code>
操作符用于删除指定的<strong>对象属性</strong>（非继承）或者<strong>数组元素</strong>。如果
<code>delete</code> 操作成功，将会返回 <code>true</code>，否则返回
<code>false</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> arrayName[index]; <span class="comment">// 删除数组元素</span></span><br><span class="line"><span class="keyword">delete</span> objectName.<span class="property">property</span>; <span class="comment">// 删除对象属性</span></span><br></pre></td></tr></table></figure>
<p>上面的 <code>objectName</code> 表示对象名称，<code>arrayName</code>
则是指数组名称，而 <code>property</code>
是一个对象上的属性，<code>index</code> 则是数组当中的元素索引。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;www.uinio.com&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">36</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="keyword">delete</span> <span class="title class_">Author</span>.<span class="property">age</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Author</span>); <span class="comment">// &#123;name: &#x27;Hank&#x27;, url: &#x27;www.uinio.com&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<p>删除数组中的元素时，数组的长度不会发生改变，只是被删除元素所在索引会指向
<code>undefine</code> 值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> trees = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&quot;橡树&quot;</span>, <span class="string">&quot;松树&quot;</span>, <span class="string">&quot;柳树&quot;</span>, <span class="string">&quot;杉树&quot;</span>, <span class="string">&quot;樟树&quot;</span>);</span><br><span class="line"><span class="keyword">delete</span> trees[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(trees); <span class="comment">// [&#x27;橡树&#x27;, &#x27;松树&#x27;, empty, &#x27;杉树&#x27;, &#x27;樟树&#x27;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(trees[<span class="number">2</span>]); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(trees.<span class="property">length</span>); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h3 id="判断属性存在-in">判断属性存在 in</h3>
<p><code>in</code>
操作符用于判断对象的<strong>属性名称</strong>或者数组的<strong>元素索引</strong>是否真实存在，如果存在就会返回
<code>true</code>，否则返回 <code>false</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">index <span class="keyword">in</span> arrayName; <span class="comment">// 判断数组的元素索引是否存在</span></span><br><span class="line">property <span class="keyword">in</span> objectName; <span class="comment">// 判断对象的属性名称是否存在</span></span><br></pre></td></tr></table></figure>
<p>上面的 <code>arrayName</code> 是数组名称，而 <code>index</code>
是数组索引。<code>objectName</code> 是对象名称，而 <code>property</code>
表示对象属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 采用 in 操作符判断对象的属性名称是否存在 */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;www.uinio.com&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">36</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;name&quot;</span> <span class="keyword">in</span> <span class="title class_">Author</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 采用 in 操作符判断数组的元素索引是否存在 */</span></span><br><span class="line"><span class="keyword">const</span> trees = [<span class="string">&quot;橡树&quot;</span>, <span class="string">&quot;松树&quot;</span>, <span class="string">&quot;柳树&quot;</span>, <span class="string">&quot;杉树&quot;</span>, <span class="string">&quot;樟树&quot;</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span> <span class="keyword">in</span> trees); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="判断实例类型-instanceof">判断实例类型 instanceof</h3>
<p>用于判断当前的实例是否为指定对象的实例，如果是就返回
<code>true</code>，否则返回 <code>false</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objectName <span class="keyword">instanceof</span> objectType;</span><br></pre></td></tr></table></figure>
<p>上面的 <code>objectName</code> 是需要进行判断的实例，而
<code>objectType</code> 则是对象的类型。例如, 下面的代码使用 instanceof
去判断 theDay 是否是一个 Date 对象. 因为 theDay 是一个 Date 对象, 所以
if 中的代码会执行.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2022</span>, <span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date <span class="keyword">instanceof</span> <span class="title class_">Date</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date <span class="keyword">instanceof</span> <span class="title class_">Object</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(date <span class="keyword">instanceof</span> <span class="title class_">String</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<h3 id="getters-setters">getters &amp; setters</h3>
<p>JavaScript 对象的 <code>setter</code> 和 <code>getter</code>
是一种用于设置或者获取属性值的函数方法。其中，<code>getter</code>
方法没有参数，但是有返回值；而 <code>setter</code>
方法只会接受一个参数，但是没有返回值。</p>
<p>通过在使用<strong>字面量语法</strong> <code>&#123;&#125;</code>
定义对象时，添加
<code>get property()</code>（把对象属性绑定到<strong>获取</strong>该属性时将会被调用的函数）和
<code>set property(value)</code>（把对象属性绑定到<strong>设置</strong>属性时将会被调用的函数）就可以完成
<code>setter/getter</code> 方法的添加：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">age</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot; is 36!&quot;</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">blog</span>(<span class="params">URL</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = <span class="variable constant_">URL</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Author</span>.<span class="property">name</span>); <span class="comment">// Hank</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* getter 生效 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Author</span>.<span class="property">age</span>); <span class="comment">// Hank is 36!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* setter 生效 */</span></span><br><span class="line"><span class="title class_">Author</span>.<span class="property">blog</span> = <span class="string">&quot;www.uinio.com&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Author</span>.<span class="property">name</span>); <span class="comment">// www.uinio.com</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Author</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">age: (...)</span></span><br><span class="line"><span class="comment">name: &quot;www.uinio.com&quot;</span></span><br><span class="line"><span class="comment">get age: ƒ age()</span></span><br><span class="line"><span class="comment">set blog: ƒ blog(URL)</span></span><br><span class="line"><span class="comment">[[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>禁止在某个属性的 <code>setter</code>
方法中对该属性赋值，这样会导致递归调用的发生，从而引发
<code>RangeError</code> 错误：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">blog</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">blog</span>(<span class="params">URL</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">blog</span> = <span class="variable constant_">URL</span>; <span class="comment">// Uncaught RangeError: Maximum call stack size exceeded</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Author</span>.<span class="property">blog</span> = <span class="string">&quot;www.uinika.com&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>对于已经定义完毕的对象，可以采用 <code>Object.defineProperty()</code>
方法添加 <code>setter/getter</code> 方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperties</span>(<span class="title class_">Author</span>, &#123;</span><br><span class="line">  <span class="attr">age</span>: &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot; is 36!&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">blog</span>: &#123;</span><br><span class="line">    <span class="attr">set</span>: <span class="keyword">function</span> (<span class="params">URL</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">name</span> = <span class="variable constant_">URL</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* getter 生效 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Author</span>.<span class="property">age</span>); <span class="comment">// Hank is 36!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* setter 生效 */</span></span><br><span class="line"><span class="title class_">Author</span>.<span class="property">blog</span> = <span class="string">&quot;www.uinio.com&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Author</span>.<span class="property">name</span>); <span class="comment">// www.uinio.com</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：<code>Object.defineProperty(obj, prop, descriptor)</code>
方法可以用于在对象上定义新的属性，或者修改对象上的已有属性。其中
<code>obj</code> 是需要定义属性的对象，而 <code>prop</code>
是要定义或者修改的属性名称，<code>descriptor</code>
则是需要定义或者修改的属性描述符，该方法的返回值为处理之后的新对象。</p>
</blockquote>
<h3 id="遍历对象属性">遍历对象属性</h3>
<p>JavaScript 提供了
<code>for...in</code>、<code>Object.keys(obj)</code>、<code>Object.getOwnPropertyNames(obj)</code>
三种方法来遍历一个对象上的所有属性。</p>
<p><code>for...in</code>
会依次访问指定对象及其原型链上面所有可以枚举的属性，也包括继承的可枚举属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;www.uinio.com&quot;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">36</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (propertyName <span class="keyword">in</span> <span class="title class_">Author</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;属性名称：&quot;</span> + propertyName);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;属性值：&quot;</span> + <span class="title class_">Author</span>[propertyName]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">属性名称：url</span></span><br><span class="line"><span class="comment">属性值：www.uinio.com</span></span><br><span class="line"><span class="comment">属性名称：name</span></span><br><span class="line"><span class="comment">属性值：Hank</span></span><br><span class="line"><span class="comment">属性名称：age</span></span><br><span class="line"><span class="comment">属性值：36</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p><code>Object.keys(obj)</code> 会返回参数对象 <code>obj</code>
包含（不包括原型链）的所有可枚举属性的名称的数组，数组当中属性名称的排列顺序和正常循环遍历该对象的顺序保持一致。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;www.uinio.com&quot;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">36</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">keys</span>(<span class="title class_">Author</span>)); <span class="comment">// [&#x27;url&#x27;, &#x27;name&#x27;, &#x27;age&#x27;]</span></span><br></pre></td></tr></table></figure>
<p><code>Object.getOwnPropertyNames(obj)</code> 会返回参数对象
<code>obj</code>（不包括原型链）上全部属性（无论该属性是否可枚举）名称所构成的数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Author</span> = &#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&quot;www.uinio.com&quot;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Hank&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">36</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyNames</span>(<span class="title class_">Author</span>)); <span class="comment">// [&#x27;url&#x27;, &#x27;name&#x27;, &#x27;age&#x27;]</span></span><br></pre></td></tr></table></figure>
<h2 id="原型继承">原型继承</h2>
<p>JavaScript
是一种基于<strong>原型</strong>（Prototype）而非基于<strong>类</strong>（Class）的面向对象语言。</p>
<ul>
<li>对于 Java 和 C++
等基于<strong>类</strong>的面向对象语言，会应用关键字 <code>class</code>
声明一个类，然后通过<strong>构造函数</strong>（用于在创建类时初始化属性值），使用
<code>new</code>
关键字创建该类的<strong>实例</strong>（Instance）；</li>
<li>JavaScript
的面向对象是基于<strong>原型</strong>的，只存在<strong>对象</strong>而没有<strong>类</strong>的概念，<strong>原型可以被视为一个创建对象的模板，任何对象都可以作为另外一个对象的原型，从而允许后者共享前者的属性</strong>；</li>
</ul>
<blockquote>
<p><strong>注意</strong>：传统 ES5 当中，可以通过对象字面量
<code>&#123;&#125;</code>、构造函数
<code>function</code>、<code>Object.create()</code>
三种方式来创建对象；而 ES6 当中新引入的 <code>class</code>
类定义语法，其实质是现有原型继承方式的语法糖。</p>
</blockquote>
<p>接下来的内容当中，将会基于如下的对象继承结构，建立
<code>Employee</code>、<code>Manager</code>、<code>WorkerBee</code>、<code>Engineer</code>、<code>SalesPerson</code>
共 5 个对象：</p>
<p><img src="/Web/Javascript/inheritance.png"></p>
<ol type="1">
<li><code>Employee</code> 拥有默认值为空字符串的 <code>name</code>
属性和默认值为 <code>"General"</code> 的 <code>department</code>
属性；</li>
<li><code>Manager</code> 是 <code>Employee</code>
的子类，其增加了一个默认值为空数组的 <code>reports</code>
属性，后面会将其赋值为 <code>Employee</code> 对象数组；</li>
<li><code>WorkerBee</code> 是 <code>Employee</code>
的子类，其增加了一个默认值为空数组的 <code>projects</code> 属性；</li>
<li><code>Engineer</code> 也是 <code>WorkerBee</code>
的子类，其增加了一个默认值为空字符串的 <code>machine</code> 属性，同时将
<code>department</code> 属性重载为 <code>"Engineering"</code>；</li>
<li><code>SalesPerson</code> 是 <code>WorkerBee</code>
的子类，其增加了一个默认值为 <code>100</code> 的 <code>quota</code>
属性，并且将继承来的 <code>department</code> 属性重载为
<code>"sales"</code>，表示所有销售人员都属于相同部门；</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== Employee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Employee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = <span class="string">&quot;General&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== Manager =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Manager</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Employee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">reports</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Manager</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== WorkerBee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WorkerBee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">Employee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">projects</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== SalesPerson =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SalesPerson</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">WorkerBee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = <span class="string">&quot;sales&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">quota</span> = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">SalesPerson</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== Engineer =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Engineer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">WorkerBee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = <span class="string">&quot;Engineering&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">machine</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Engineer</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="title class_">Object</span>.<span class="title function_">create</span>(<span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> jim = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(jim);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Employee &#123;name: &#x27;&#x27;, department: &#x27;General&#x27;&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;&quot;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">    constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sally = <span class="keyword">new</span> <span class="title class_">Manager</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sally);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Manager &#123;name: &#x27;&#x27;, department: &#x27;General&#x27;, reports: Array(0)&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;&quot;</span></span><br><span class="line"><span class="comment">  reports: []</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">      constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mark = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mark);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">WorkerBee &#123;name: &#x27;&#x27;, department: &#x27;General&#x27;, projects: Array(0)&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;&quot;</span></span><br><span class="line"><span class="comment">  projects: []</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">      constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fred = <span class="keyword">new</span> <span class="title class_">SalesPerson</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fred);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">SalesPerson &#123;name: &#x27;&#x27;, department: &#x27;sales&#x27;, projects: Array(0), quota: 100&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;sales&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;&quot;</span></span><br><span class="line"><span class="comment">  projects: []</span></span><br><span class="line"><span class="comment">  quota: 100</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">        constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">        [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> jane = <span class="keyword">new</span> <span class="title class_">Engineer</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(jane);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Engineer &#123;name: &#x27;&#x27;, department: &#x27;Engineering&#x27;, projects: Array(0), machine: &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;Engineering&quot;</span></span><br><span class="line"><span class="comment">  machine: &quot;&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;&quot;</span></span><br><span class="line"><span class="comment">  projects: []</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">        constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">        [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：如果上面代码里的<strong>构造函数</strong>不需要接受任何参数，则可以省略构造函数名称后面的圆括号<code>()</code>。</p>
</blockquote>
<h3 id="继承属性">继承属性</h3>
<p>下面代码创建了一个 <code>mark</code> 对象作为 <code>WorkerBee</code>
的实例，当 JavaScript 执行 <code>new</code>
操作符的时候，首先会创建一个对象，并且将该对象当中的
<code>[[prototype]]</code> 指向
<code>WorkerBee.prototype</code>，然后再将该对象设置为执行
<code>WorkerBee</code> 构造函数时的 <code>this</code> 值。该对象的
<code>[[Prototype]]</code>
决定了其用于检索属性的原型链。当构造函数执行完毕之后，所有属性都完成了初始化，就可以将其引用赋值给一个
<code>mark</code> 变量：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mark = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br></pre></td></tr></table></figure>
<p>上述过程不会显式将 <code>mark</code> 所继承的原型链属性，作为
<code>mark</code> 对象的本地属性。访问属性时，首先 JavaScript
会检查对象自身是否存在该属性，如果存在就返回属性值，如果不存在则会通过
<code>[[Prototype]]</code>
检查原型链。如果原型链当中依然未能查找出该属性，则会返回一个
<code>undefined</code>。当 <code>worker</code>
对象实例化完成之后，其属性值状态如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mark.<span class="property">name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">mark.<span class="property">department</span> = <span class="string">&quot;General&quot;</span>;</span><br><span class="line">mark.<span class="property">projects</span> = [];</span><br></pre></td></tr></table></figure>
<p>对象 <code>mark</code> 通过 <code>mark.__proto__</code> 从
<code>Employee</code> 继承了 <code>name</code> 与
<code>department</code> 属性，并且定义了一个新的 <code>projects</code>
属性，下面的示例代码修改了这些属性的默认值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mark.<span class="property">name</span> = <span class="string">&quot;Hank&quot;</span>;</span><br><span class="line">mark.<span class="property">department</span> = <span class="string">&quot;Blog&quot;</span>;</span><br><span class="line">mark.<span class="property">projects</span> = [<span class="string">&quot;www.uinio.com&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mark);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">WorkerBee &#123;name: &#x27;Hank&#x27;, department: &#x27;Blog&#x27;, projects: Array(1)&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;Blog&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;Hank&quot;</span></span><br><span class="line"><span class="comment">  projects: [&#x27;www.uinio.com&#x27;]</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="添加属性">添加属性</h3>
<p>JavaScript 允许在运行时为对象添加新的属性，例如通过
<code>mark.age = 18</code> 添加一个 <code>bonus</code> 属性，此时，除了
<code>mark</code> 对象之外的其它 <code>WorkerBee</code>
对象不会拥有该属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* mark 对象 */</span></span><br><span class="line"><span class="keyword">const</span> mark = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line">mark.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* hank 对象 */</span></span><br><span class="line"><span class="keyword">const</span> hank = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hank.<span class="property">age</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>如果向对象的<strong>原型</strong>添加新的属性，那么该属性将会添加至从该原型继承属性的所有对象当中，例如下面代码会向所有
<code>Employee</code> 的对象添加 <code>specialty</code> 属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">specialty</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mark = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mark);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">WorkerBee &#123;name: &#x27;&#x27;, department: &#x27;General&#x27;, projects: Array(0)&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;&quot;</span></span><br><span class="line"><span class="comment">  projects: []</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">      specialty: &quot;none&quot;</span></span><br><span class="line"><span class="comment">      constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>向 <code>Employee</code> 原型当中添加 <code>specialty</code>
属性之后，可以在 <code>Engineer</code>
的原型里对该属性进行重载，将其默认值 <code>none</code> 重新修改为
<code>code</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Engineer</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">specialty</span> = <span class="string">&quot;code&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> jane = <span class="keyword">new</span> <span class="title class_">Engineer</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(jane);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Engineer &#123;name: &#x27;&#x27;, department: &#x27;Engineering&#x27;, projects: Array(0), machine: &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;Engineering&quot;</span></span><br><span class="line"><span class="comment">  machine: &quot;&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;&quot;</span></span><br><span class="line"><span class="comment">  projects: Array(0)</span></span><br><span class="line"><span class="comment">    length: 0</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Array(0)</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    specialty: &quot;code&quot;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">      specialty: &quot;none&quot;</span></span><br><span class="line"><span class="comment">      constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="属性默认值-构造函数参数">属性默认值 &amp; 构造函数参数</h3>
<p>JavaScript 的<strong>逻辑或</strong>操作符 <code>||</code> 会判断第 1
个参数，如果其结果为 <code>true</code> 则返回该值，否则返回第 2
个参数的值，利用该特性可以巧妙定义对象属性的默认值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">propertyName</span> = newValue || defaultValue;</span><br></pre></td></tr></table></figure>
<p>除此之外，采用 <code>function</code>
构造函数声明对象时，还可以同时对属性的参数值进行赋值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Name</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">propertyName</span> = newValue || defaultValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来，修改开头示例代码当中的
<code>Employee</code>、<code>WorkerBee</code>、<code>Engineer</code>
类为下面的形式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== Employee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Employee</span>(<span class="params">name, department</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name || <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = department || <span class="string">&quot;General&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== WorkerBee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WorkerBee</span>(<span class="params">projects</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">projects</span> = projects || [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== Engineer =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Engineer</span>(<span class="params">machine</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = <span class="string">&quot;Engineering&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">machine</span> = machine || <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Engineer</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br></pre></td></tr></table></figure>
<p>这样在创建 <code>Engineer</code>
对象的实例时，就可以通过构造函数指定属性的初始值：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hank = <span class="keyword">new</span> <span class="title class_">Engineer</span>(<span class="string">&quot;Keyboard&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hank);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Engineer &#123;department: &#x27;Engineering&#x27;, machine: &#x27;Keyboard&#x27;&#125;</span></span><br><span class="line"><span class="comment">  department: &quot;Engineering&quot;</span></span><br><span class="line"><span class="comment">  machine: &quot;Keyboard&quot;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    projects: []</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">      department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">      name: &quot;&quot;</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">        constructor: ƒ Employee(name, department)</span></span><br><span class="line"><span class="comment">        [[Prototype]]: Object</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>通过 <code>function</code>
构造函数可以为对象指定<strong>本地的属性值</strong>，但是无法为<strong>经过原型链继承而来的属性</strong>进行赋值，因而需要调整
<code>WorkerBee</code> 和 <code>Engineer</code>
的构造函数定义，使得<strong>父对象</strong>的构造函数成为<strong>子对象</strong>的
<code>base</code> 成员方法，并且立刻在子对象当中进行调用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== Employee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Employee</span>(<span class="params">name, department</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name || <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = department || <span class="string">&quot;General&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== WorkerBee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WorkerBee</span>(<span class="params">name, department, projects</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">base</span> = <span class="title class_">Employee</span>; <span class="comment">// 指向父对象构造函数</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">base</span>(name, department);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">projects</span> = projects || [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== Engineer =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Engineer</span>(<span class="params">name, projects, machine</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">base</span> = <span class="title class_">WorkerBee</span>; <span class="comment">// 指向父对象构造函数</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">base</span>(name, <span class="string">&quot;Engineering&quot;</span>, projects);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">machine</span> = machine || <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Engineer</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hank = <span class="keyword">new</span> <span class="title class_">Engineer</span>(<span class="string">&quot;Hank&quot;</span>, [<span class="string">&quot;www.uinio.com&quot;</span>, <span class="string">&quot;www.uinika.com&quot;</span>], <span class="string">&quot;Keyboard&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hank);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Engineer &#123;name: &#x27;Hank&#x27;, department: &#x27;Engineering&#x27;, projects: Array(2), machine: &#x27;Keyboard&#x27;, base: ƒ&#125;</span></span><br><span class="line"><span class="comment">  base: ƒ Employee(name, department)</span></span><br><span class="line"><span class="comment">  department: &quot;Engineering&quot;</span></span><br><span class="line"><span class="comment">  machine: &quot;Keyboard&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;Hank&quot;</span></span><br><span class="line"><span class="comment">  projects: (2) [&#x27;www.uinio.com&#x27;, &#x27;www.uinika.com&#x27;]</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    base: ƒ Employee(name, department)</span></span><br><span class="line"><span class="comment">    department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">    name: &quot;&quot;</span></span><br><span class="line"><span class="comment">    projects: []</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">      department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">      name: &quot;&quot;</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">        constructor: ƒ Employee(name, department)</span></span><br><span class="line"><span class="comment">        [[Prototype]]: Object</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<p>除了使用上述的 <code>function</code> 构造函数之外，还可以通过
<code>call()</code> 或者 <code>apply()</code>
函数来实现继承，例如可以将上面的 <code>Engineer</code>
对象<strong>等价</strong>的修改为下面形式：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Engineer</span>(<span class="params">name, projects, machine</span>) &#123;</span><br><span class="line">  <span class="title class_">WorkerBee</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>, name, <span class="string">&quot;Engineering&quot;</span>, projects); <span class="comment">// 这种方式比定义 base 属性更加简洁</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">machine</span> = machine || <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="本地属性-继承属性">本地属性 &amp; 继承属性</h3>
<p>JavaScript 当中访问一个对象的属性时，将会执行如下两个步骤：</p>
<ol type="1">
<li>检查该属于是否存在于对象本地，如果存在，则直接返回属性值；</li>
<li>如果不存在，就会通过 <code>__proto__</code>
属性检查原型链，如果存在就返回值，不存在则返回
<code>undefined</code>；</li>
</ol>
<p>例如下面代码当中的 <code>amy</code> 对象具有本地属性
<code>projects</code>，而 <code>name</code> 和 <code>department</code>
属性则是通过 <code>__proto__</code> 获得：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== Employee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Employee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = <span class="string">&quot;General&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== WorkerBee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WorkerBee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">projects</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> amy = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(amy);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">WorkerBee &#123;projects: Array(0)&#125;</span></span><br><span class="line"><span class="comment">  projects: []</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">    name: &quot;&quot;</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">      constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>此时如果修改父对象 <code>Employee</code> 关联原型当中的
<code>name</code> 属性，这种影响并不会传递到子对象通过原型继承而来的
<code>name</code> 属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== Employee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Employee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = <span class="string">&quot;General&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== WorkerBee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WorkerBee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">projects</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> amy = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line"><span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&quot;Unknown&quot;</span>; <span class="comment">// 修改父对象 Employee 关联原型当中的 name 属性值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(amy);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">WorkerBee &#123;projects: Array(0)&#125;</span></span><br><span class="line"><span class="comment">  projects: []</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">    name: &quot;&quot;</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">      name: &quot;Unknown&quot;</span></span><br><span class="line"><span class="comment">      constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>如果在修改<strong>父对象</strong>的属性值时，希望这种修改操作可以被所有的<strong>子对象</strong>继承，那么就不能将其定义为本地属性，而应该将其添加至关联的<strong>原型</strong>当中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Employee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = <span class="string">&quot;General&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&quot;&quot;</span>; <span class="comment">// 将 name 属性定义在原型上</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WorkerBee</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">projects</span> = [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> amy = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line"><span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">name</span> = <span class="string">&quot;Unknown&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(amy);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">WorkerBee &#123;projects: Array(0)&#125;</span></span><br><span class="line"><span class="comment">  projects: Array(0)</span></span><br><span class="line"><span class="comment">    length: 0</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Array(0)</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">      name: &quot;Unknown&quot;</span></span><br><span class="line"><span class="comment">      constructor: ƒ Employee()</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>JavaScript
会首先在对象自身的本地属性当中进行查找，如果没有找到则会到对象的特殊属性
<code>__proto__</code>
当中查找，这个过程称为在对象的原型链中查找，这就是 JavaScript
的对象属性查找机制。</p>
<h3 id="prototype-与-__proto__">prototype 与 <code>__proto__</code></h3>
<p><code>__proto__</code> 是一个用于访问对象内部
<code>[[Prototype]]</code> 的访问器属性，该属性已经在 ECMAScript 6
规范当中得到了标准化。通过 <code>Object.prototype.__proto__</code>
方式访问 <code>__proto__</code> 属性的方法已经逐渐被废弃，Mozilla
官方更加推荐使用 <code>Object.getPrototypeOf</code> 方式进行访问。而
<code>prototype</code> 表示的是<strong>原型对象</strong>，所有的
JavaScript 对象都继承自
<code>Object.prototype</code>，该对象当中的默认属性列表如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">constructor</span>: ƒ <span class="title class_">Object</span>()</span><br><span class="line">  <span class="attr">hasOwnProperty</span>: ƒ <span class="title function_">hasOwnProperty</span>()</span><br><span class="line">  <span class="attr">isPrototypeOf</span>: ƒ <span class="title function_">isPrototypeOf</span>()</span><br><span class="line">  <span class="attr">propertyIsEnumerable</span>: ƒ <span class="title function_">propertyIsEnumerable</span>()</span><br><span class="line">  <span class="attr">toLocaleString</span>: ƒ <span class="title function_">toLocaleString</span>()</span><br><span class="line">  <span class="attr">toString</span>: ƒ <span class="title function_">toString</span>()</span><br><span class="line">  <span class="attr">valueOf</span>: ƒ <span class="title function_">valueOf</span>()</span><br><span class="line">  <span class="attr">__defineGetter__</span>: ƒ <span class="title function_">__defineGetter__</span>()</span><br><span class="line">  <span class="attr">__defineSetter__</span>: ƒ <span class="title function_">__defineSetter__</span>()</span><br><span class="line">  <span class="attr">__lookupGetter__</span>: ƒ <span class="title function_">__lookupGetter__</span>()</span><br><span class="line">  <span class="attr">__lookupSetter__</span>: ƒ <span class="title function_">__lookupSetter__</span>()</span><br><span class="line">  <span class="attr">__proto__</span>: （…）</span><br><span class="line">  get <span class="attr">__proto__</span>: ƒ <span class="title function_">__proto__</span>()</span><br><span class="line">  set <span class="attr">__proto__</span>: ƒ <span class="title function_">__proto__</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除了 <code>Object</code> 对象以外，无论是采用对象字面量
<code>&#123;&#125;</code>，还是采用构造函数 <code>function</code>，或者是采用
<code>Object.create()</code> 方法创建的对象，都会拥有一个
<code>__proto__</code> 属性：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== 采用字面量方式创建的对象 =====*/</span></span><br><span class="line"><span class="keyword">const</span> test1 = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test1.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test1.<span class="property">__proto__</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, …&#125;</span></span><br><span class="line"><span class="comment">  constructor: ƒ Object()</span></span><br><span class="line"><span class="comment">  hasOwnProperty: ƒ hasOwnProperty()</span></span><br><span class="line"><span class="comment">  isPrototypeOf: ƒ isPrototypeOf()</span></span><br><span class="line"><span class="comment">  propertyIsEnumerable: ƒ propertyIsEnumerable()</span></span><br><span class="line"><span class="comment">  toLocaleString: ƒ toLocaleString()</span></span><br><span class="line"><span class="comment">  toString: ƒ toString()</span></span><br><span class="line"><span class="comment">  valueOf: ƒ valueOf()</span></span><br><span class="line"><span class="comment">  __defineGetter__: ƒ __defineGetter__()</span></span><br><span class="line"><span class="comment">  __defineSetter__: ƒ __defineSetter__()</span></span><br><span class="line"><span class="comment">  __lookupGetter__: ƒ __lookupGetter__()</span></span><br><span class="line"><span class="comment">  __lookupSetter__: ƒ __lookupSetter__()</span></span><br><span class="line"><span class="comment">  __proto__: （…）</span></span><br><span class="line"><span class="comment">  get __proto__: ƒ __proto__()</span></span><br><span class="line"><span class="comment">  set __proto__: ƒ __proto__()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== 采用构造函数 function 方式创建的对象 =====*/</span></span><br><span class="line"><span class="keyword">const</span> temp = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> test2 = <span class="keyword">new</span> <span class="title function_">temp</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test2.<span class="property"><span class="keyword">prototype</span></span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test2.<span class="property">__proto__</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;constructor: ƒ&#125;</span></span><br><span class="line"><span class="comment">  constructor: ƒ ()</span></span><br><span class="line"><span class="comment">    arguments: null</span></span><br><span class="line"><span class="comment">    caller: null</span></span><br><span class="line"><span class="comment">    length: 0</span></span><br><span class="line"><span class="comment">    name: &quot;temp&quot;</span></span><br><span class="line"><span class="comment">    prototype: &#123;constructor: ƒ&#125;</span></span><br><span class="line"><span class="comment">    [[FunctionLocation]]: VM2674:1</span></span><br><span class="line"><span class="comment">    [[Prototype]]: ƒ ()</span></span><br><span class="line"><span class="comment">    [[Scopes]]: Scopes[2]</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">    constructor: ƒ Object()</span></span><br><span class="line"><span class="comment">    hasOwnProperty: ƒ hasOwnProperty()</span></span><br><span class="line"><span class="comment">    isPrototypeOf: ƒ isPrototypeOf()</span></span><br><span class="line"><span class="comment">    propertyIsEnumerable: ƒ propertyIsEnumerable()</span></span><br><span class="line"><span class="comment">    toLocaleString: ƒ toLocaleString()</span></span><br><span class="line"><span class="comment">    toString: ƒ toString()</span></span><br><span class="line"><span class="comment">    valueOf: ƒ valueOf()</span></span><br><span class="line"><span class="comment">    __defineGetter__: ƒ __defineGetter__()</span></span><br><span class="line"><span class="comment">    __defineSetter__: ƒ __defineSetter__()</span></span><br><span class="line"><span class="comment">    __lookupGetter__: ƒ __lookupGetter__()</span></span><br><span class="line"><span class="comment">    __lookupSetter__: ƒ __lookupSetter__()</span></span><br><span class="line"><span class="comment">    __proto__: （…）</span></span><br><span class="line"><span class="comment">    get __proto__: ƒ __proto__()</span></span><br><span class="line"><span class="comment">    set __proto__: ƒ __proto__()</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== 采用 Object.create() 方式创建的对象 =====*/</span></span><br><span class="line"><span class="keyword">const</span> test3 = <span class="title class_">Object</span>.<span class="title function_">create</span>(&#123;&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test3.<span class="property">__proto__</span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;&#125;</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">    constructor: ƒ Object()</span></span><br><span class="line"><span class="comment">    hasOwnProperty: ƒ hasOwnProperty()</span></span><br><span class="line"><span class="comment">    isPrototypeOf: ƒ isPrototypeOf()</span></span><br><span class="line"><span class="comment">    propertyIsEnumerable: ƒ propertyIsEnumerable()</span></span><br><span class="line"><span class="comment">    toLocaleString: ƒ toLocaleString()</span></span><br><span class="line"><span class="comment">    toString: ƒ toString()</span></span><br><span class="line"><span class="comment">    valueOf: ƒ valueOf()</span></span><br><span class="line"><span class="comment">    __defineGetter__: ƒ __defineGetter__()</span></span><br><span class="line"><span class="comment">    __defineSetter__: ƒ __defineSetter__()</span></span><br><span class="line"><span class="comment">    __lookupGetter__: ƒ __lookupGetter__()</span></span><br><span class="line"><span class="comment">    __lookupSetter__: ƒ __lookupSetter__()</span></span><br><span class="line"><span class="comment">    __proto__: （…）</span></span><br><span class="line"><span class="comment">    get __proto__: ƒ __proto__()</span></span><br><span class="line"><span class="comment">    set __proto__: ƒ __proto__()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>JavaScript 函数的 <code>prototype</code> 属性实际上指的是
<code>Function.prototype</code>，其属性值为解析引擎的原生代码。而下面示例里打印出的
<code>prototype</code> 属性，则是 JavaScript 解析引擎将
<code>test2</code> 视为构造函数之后的处理结果：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test2 = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test2.<span class="property">__proto__</span>); <span class="comment">// ƒ () &#123; [native code] &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(test2.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;constructor: ƒ&#125;</span></span><br><span class="line"><span class="comment">  constructor: ƒ ()</span></span><br><span class="line"><span class="comment">    arguments: null</span></span><br><span class="line"><span class="comment">    caller: null</span></span><br><span class="line"><span class="comment">    length: 0</span></span><br><span class="line"><span class="comment">    name: &quot;test2&quot;</span></span><br><span class="line"><span class="comment">    prototype: &#123;constructor: ƒ&#125;</span></span><br><span class="line"><span class="comment">    [[FunctionLocation]]: VM1976:1</span></span><br><span class="line"><span class="comment">    [[Prototype]]: ƒ ()</span></span><br><span class="line"><span class="comment">    [[Scopes]]: Scopes[2]</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">    constructor: ƒ Object()</span></span><br><span class="line"><span class="comment">    hasOwnProperty: ƒ hasOwnProperty()</span></span><br><span class="line"><span class="comment">    isPrototypeOf: ƒ isPrototypeOf()</span></span><br><span class="line"><span class="comment">    propertyIsEnumerable: ƒ propertyIsEnumerable()</span></span><br><span class="line"><span class="comment">    toLocaleString: ƒ toLocaleString()</span></span><br><span class="line"><span class="comment">    toString: ƒ toString()</span></span><br><span class="line"><span class="comment">    valueOf: ƒ valueOf()</span></span><br><span class="line"><span class="comment">    __defineGetter__: ƒ __defineGetter__()</span></span><br><span class="line"><span class="comment">    __defineSetter__: ƒ __defineSetter__()</span></span><br><span class="line"><span class="comment">    __lookupGetter__: ƒ __lookupGetter__()</span></span><br><span class="line"><span class="comment">    __lookupSetter__: ƒ __lookupSetter__()</span></span><br><span class="line"><span class="comment">    __proto__: （…）</span></span><br><span class="line"><span class="comment">    get __proto__: ƒ __proto__()</span></span><br><span class="line"><span class="comment">    set __proto__: ƒ __proto__()</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>对于本节内容开始时提到的 <code>Engineer</code>
类，如果在这里创建一个对象 <code>hank</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> hank = <span class="keyword">new</span> <span class="title class_">Engineer</span>(<span class="string">&quot;Hank&quot;</span>, [<span class="string">&quot;www.uinio.com&quot;</span>, <span class="string">&quot;www.uinika.com&quot;</span>], <span class="string">&quot;Keyboard&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>则对于 <code>hank</code> 对象而言，下面语句的返回结果全部为
<code>true</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hank.<span class="property">__proto__</span> == <span class="title class_">Engineer</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line">hank.<span class="property">__proto__</span>.<span class="property">__proto__</span> == <span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line">hank.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span> == <span class="title class_">Employee</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line">hank.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span> == <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line">hank.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span> == <span class="literal">null</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="instanceof-判断对象的实例">instanceof 判断对象的实例</h3>
<p><strong>除了 <code>Object</code> 对象之外，每一个对象都会拥有
<code>__proto__</code> 属性，而每一个函数都会拥有 <code>prototype</code>
属性</strong>。创建对象时 JavaScript 会将特殊的 <code>__proto__</code>
属性设置为构造函数的 <code>prototype</code> 属性值，所以表达式
<code>new Example()</code> 时会创建一个对象，该对象的
<code>__proto__</code> 属性<strong>等于</strong>
<code>Example.prototype</code>。如果修改 <code>Example.prototype</code>
的值，就会改变所有通过 <code>new Example()</code> 创建的对象。</p>
<p>通过比较<strong>对象</strong>的 <code>__proto__</code>
属性和<strong>函数</strong>的 <code>prototype</code>
属性，就可以检测出对象之间的继承关系。JavaScript 提供了便捷的
<code>instanceof</code>
操作符，用于检测对象与构造函数之间的关系，如果对象继承自构造函数的原型，则返回
<code>true</code>，否则就会返回 <code>false</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> empty = &#123;&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(empty <span class="keyword">instanceof</span> <span class="title class_">Object</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(empty <span class="keyword">instanceof</span> <span class="title class_">Function</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">None</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> none = <span class="keyword">new</span> <span class="title class_">None</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(none <span class="keyword">instanceof</span> <span class="title class_">None</span>); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(none <span class="keyword">instanceof</span> <span class="title class_">Object</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h3 id="多重继承">多重继承</h3>
<p>由于 JavaScript
的继承是基于对象的<strong>原型链</strong>实现的，每个对象只会存在一个与之关联的<strong>原型</strong>，所以
<strong>JavaScript
不支持多重继承</strong>。但是，可以通过在构造函数当中调用多个其它构造器函数，从而模拟出一种多重继承的假象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== Employee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Employee</span>(<span class="params">name, department</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name || <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">department</span> = department || <span class="string">&quot;General&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== WorkerBee =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">WorkerBee</span>(<span class="params">name, department, projects</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">base</span> = <span class="title class_">Employee</span>; <span class="comment">// 指向父对象构造函数</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">base</span>(name, department);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">projects</span> = projects || [];</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">WorkerBee</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== Hobbyist =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hobbyist</span>(<span class="params">hobby</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">hobby</span> = hobby || <span class="string">&quot;Football&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== Engineer =====*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Engineer</span>(<span class="params">name, projects, machine, hobby</span>) &#123;</span><br><span class="line">  <span class="comment">/* 调用 WorkerBee 构造函数*/</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">base1</span> = <span class="title class_">WorkerBee</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">base1</span>(name, <span class="string">&quot;Engineering&quot;</span>, projects);</span><br><span class="line">  <span class="comment">/* 调用 Hobbyist 构造函数*/</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">base2</span> = <span class="title class_">Hobbyist</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">base2</span>(hobby);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">machine</span> = machine || <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Engineer</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">WorkerBee</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> uinika = <span class="keyword">new</span> <span class="title class_">Engineer</span>(<span class="string">&quot;Hank&quot;</span>, [<span class="string">&quot;Blog&quot;</span>], <span class="string">&quot;Electronics&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(uinika);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Engineer &#123;name: &#x27;Hank&#x27;, department: &#x27;Engineering&#x27;, projects: Array(1), base1: ƒ, base: ƒ, …&#125;</span></span><br><span class="line"><span class="comment">  base: ƒ Employee(name, department)</span></span><br><span class="line"><span class="comment">  base1: ƒ WorkerBee(name, department, projects)</span></span><br><span class="line"><span class="comment">  base2: ƒ Hobbyist(hobby)</span></span><br><span class="line"><span class="comment">  department: &quot;Engineering&quot;</span></span><br><span class="line"><span class="comment">  hobby: &quot;Football&quot;</span></span><br><span class="line"><span class="comment">  machine: &quot;Electronics&quot;</span></span><br><span class="line"><span class="comment">  name: &quot;Hank&quot;</span></span><br><span class="line"><span class="comment">  projects: [&#x27;Blog&#x27;]</span></span><br><span class="line"><span class="comment">  [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">    base: ƒ Employee(name, department)</span></span><br><span class="line"><span class="comment">    department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">    name: &quot;&quot;</span></span><br><span class="line"><span class="comment">    projects: []</span></span><br><span class="line"><span class="comment">    [[Prototype]]: Employee</span></span><br><span class="line"><span class="comment">      department: &quot;General&quot;</span></span><br><span class="line"><span class="comment">      name: &quot;&quot;</span></span><br><span class="line"><span class="comment">      [[Prototype]]: Object</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>上面代码当中，对象 <code>uinika</code> 确实从 <code>Hobbyist()</code>
构造函数当中获得了 <code>hobby</code> 属性，但是如果通过
<code>Hobbyist.prototype.equipment = ["Oscilloscope", "Multimeter", "Solder"]</code>
添加一个新的 <code>equipment</code> 属性到 <code>Hobbyist</code>
构造函数的原型，那么对象 <code>uinika</code>
并<strong>不会自动继承该属性</strong>。</p>
<h2 id="类-class">类 class</h2>
<p><strong>类是用于创建对象的模板</strong>，ES6
规范当中提出的<strong>类</strong> <code>class</code>
依然是建立在<strong>原型</strong>基础之上的。</p>
<h3 id="类的声明与定义">类的声明与定义</h3>
<p>在 ES6 规范当中，通过 <code>class</code> 关键字就可以声明一个
JavaScript 类，该类同样属于 <code>Object</code> 的子类：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">height, width</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rectangle = <span class="keyword">new</span> <span class="title class_">Rectangle</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rectangle <span class="keyword">instanceof</span> <span class="title class_">Object</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>上面代码当中的 <code>constructor()</code>
是一个构造函数，该方法用于创建和初始化 <code>class</code>
类的对象，<strong>每个类都只能拥有一个构造函数</strong>。</p>
<p>与函数声明不同，<strong>类</strong>必须要先声明之后才能够进行访问，否则就会抛出
<code>ReferenceError</code> 错误：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Rectangle</span>(); <span class="comment">// Uncaught ReferenceError: Rectangle is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;&#125;</span><br></pre></td></tr></table></figure>
<p><strong>类表达式</strong>是定义 <code>class</code>
类的另外一种方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Rectangle</span> = <span class="keyword">class</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">height, width</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="类体">类体</h3>
<p>类体放置在一对花括号 <code>&#123;&#125;</code>
当中，用于定义<strong>成员属性</strong>、<strong>成员函数</strong>以及<strong>构造函数</strong>，类体当中的代码总是在
JavaScript 严格模式下执行：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  <span class="comment">/* 构造函数 */</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">height, width</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 成员函数 */</span></span><br><span class="line">  <span class="title function_">calcArea</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">height</span> * <span class="variable language_">this</span>.<span class="property">width</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* Getter 方法 */</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">area</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">calcArea</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> square = <span class="keyword">new</span> <span class="title class_">Rectangle</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(square.<span class="property">area</span>); <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>
<h3 id="static-静态成员">static 静态成员</h3>
<p><code>static</code> 关键字用于在 <code>class</code>
类当中定义一个静态的成员函数或者属性，调用静态方法时不需要进行实例化，直接通过<strong>类</strong>的名称就可以调用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">x</span> = x;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">y</span> = y;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* 静态成员属性 */</span></span><br><span class="line">  <span class="keyword">static</span> displayName = <span class="string">&quot;Point&quot;</span>;</span><br><span class="line">  <span class="comment">/* 静态成员方法 */</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">distance</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> dx = a.<span class="property">x</span> - b.<span class="property">x</span>;</span><br><span class="line">    <span class="keyword">const</span> dy = a.<span class="property">y</span> - b.<span class="property">y</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">hypot</span>(dx, dy); <span class="comment">// 返回直角三角形的斜边长度</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 通过对象的实例调用静态成员是错误的，会直接返回 undefined */</span></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">displayName</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">distance</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 通过对象直接调用静态成员是正确的 */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Point</span>.<span class="property">displayName</span>); <span class="comment">// Point</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Point</span>.<span class="title function_">distance</span>(p1, p2)); <span class="comment">// 7.0710678118654755</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：静态方法通常用于为 <code>class</code>
类创建工具函数。</p>
</blockquote>
<h3 id="私有属性">私有属性</h3>
<p><code>class</code>
类当中声明属性，默认都是<strong>公有属性</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  width;</span><br><span class="line">  height = <span class="number">0</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">height, width</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">width</span> = width;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">height</span> = height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过在成员属性前面添加 <code>#</code>
符号，就可以将其声明为<strong>私有属性</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">  #width;</span><br><span class="line">  #height = <span class="number">0</span>;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">height, width</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#width = width;</span><br><span class="line">    <span class="variable language_">this</span>.#height = height;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rectangle = <span class="keyword">new</span> <span class="title class_">Rectangle</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">rectangle.#width; <span class="comment">// Uncaught SyntaxError: Private field &#x27;#width&#x27; must be declared in an enclosing class</span></span><br></pre></td></tr></table></figure>
<h3 id="extends-关键字">extends 关键字</h3>
<p>通过使用 <code>extends</code>
关键字，可以定义<strong>父类</strong>与<strong>子类</strong>之间的继承关系：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*===== 父类 =====*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>发出声音`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*===== 子类 =====*/</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name); <span class="comment">// 调用父类构造函数，并且传入 name 参数</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>正在汪汪汪`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;豆豆&quot;</span>);</span><br><span class="line">dog.<span class="title function_">bark</span>(); <span class="comment">// 豆豆正在汪汪汪</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：如果子类当中定义有构造函数，那么这个子类必须调用
<code>super()</code> 之后才能够使用 <code>this</code> 指针。</p>
</blockquote>
<p>ES6 规范的 <code>class</code> <strong>类</strong>同样也可以继承 ES5
当中基于构造函数 <code>function</code> 定义的<strong>对象</strong>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Animal</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Animal</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bark</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;发出声音&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">bark</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;正在汪汪汪&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;豆豆&quot;</span>);</span><br><span class="line">dog.<span class="title function_">bark</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">豆豆发出声音</span></span><br><span class="line"><span class="comment">豆豆正在汪汪汪</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>但是要注意，<code>class</code> 类不能继承没有构造函数的字面量
<code>&#123;&#125;</code> 对象，这样会引发 <code>TypeError</code> 错误：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Animal</span> = &#123;</span><br><span class="line">  <span class="attr">bark</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;豆豆发出声音&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Uncaught TypeError: Class extends value #&lt;Object&gt; is not a constructor or null */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">bark</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;豆豆正在汪汪汪&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以通过 <code>Object.setPrototypeOf()</code>
方法设置原型的方式，实现字面量对象 <code>&#123;&#125;</code> 到 <code>class</code>
类的继承：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Animal</span> = &#123;</span><br><span class="line">  <span class="title function_">bark</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;发出声音&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">setPrototypeOf</span>(<span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span>, <span class="title class_">Animal</span>); <span class="comment">// 通过原型链实现继承，避免调用 bark 时会返回 TypeError</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;豆豆&quot;</span>);</span><br><span class="line">dog.<span class="title function_">bark</span>(); <span class="comment">// 豆豆发出声音</span></span><br></pre></td></tr></table></figure>
<h3 id="super-指向父类">super 指向父类</h3>
<p><code>class</code> 当中的关键字 <code>super</code>
可以用于调用父类当中的<strong>成员函数</strong>或者<strong>构造函数</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">meowth</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;喵喵叫&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Lion</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Cat</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(<span class="string">&quot;木法沙&quot;</span>); <span class="comment">// 在子类构造函数当中，调用父类构造函数</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">meowth</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">meowth</span>(); <span class="comment">// 调用父类的成员函数</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot;正在咆哮&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lion = <span class="keyword">new</span> <span class="title class_">Lion</span>(<span class="string">&quot;辛巴&quot;</span>); <span class="comment">// 这里的参数 “辛巴“ 会被丢弃，取而代之的是 Lion 类构造函数当中的 “木法沙“</span></span><br><span class="line">lion.<span class="title function_">meowth</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">木法沙喵喵叫</span></span><br><span class="line"><span class="comment">木法沙正在咆哮</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h2 id="异常处理">异常处理</h2>
<p>JavaScript 当中可以使用 <code>throw</code> 语句抛出一个异常，然后再用
<code>try...catch</code> 进行捕获。</p>
<h3 id="异常类型">异常类型</h3>
<p>JavaScript
可以抛出任意对象作为错误信息，但是更加规范的做法是抛出如下的<strong>错误对象</strong>类型：</p>
<ul>
<li><code>EvalError</code>：全局函数 <code>eval()</code>
产生的错误实例；</li>
<li><code>RangeError</code>：数值变量或者参数不在有效范围的错误实例；</li>
<li><code>ReferenceError</code>：引用无效的错误实例；</li>
<li><code>SyntaxError</code>：语法相关的错误实例；</li>
<li><code>TypeError</code>：变量或参数的类型不合法的错误实例；</li>
<li><code>URIError</code>：当 <code>encodeURI()</code> 或者
<code>decodeURI()</code> 传入无效参数时发生的错误实例；</li>
<li><code>AggregateError</code>：当操作包含多个错误时（例如<code>Promise.any()</code>），可用于包装多个错误实例；</li>
<li><code>InternalError</code>：JavaScript
解析引擎抛出的错误实例，例如在递归过多的时候；</li>
<li><code>DOMException</code>：Web 浏览器 DOM 操作异常；</li>
</ul>
<h3 id="throw-语句">throw 语句</h3>
<p><code>throw</code> 语句用于抛出一个异常表达式
<code>expression</code>：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> expression;</span><br></pre></td></tr></table></figure>
<p>这里的异常表达式 <code>expression</code> 可以是任意类型：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="string">&quot;Error&quot;</span>; <span class="comment">// 抛出字符串类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">throw</span> <span class="number">0</span>; <span class="comment">// 抛出数值类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">throw</span> <span class="literal">false</span>; <span class="comment">// 抛出布尔类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">throw</span> &#123;</span><br><span class="line">  <span class="attr">toString</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;抛出对象类型&quot;</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>可以在抛出异常时声明一个对象，这样就可以在 <code>catch</code>
代码块中读取到这个对象的属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 创建一个用户异常对象 UserException */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">UserException</span>(<span class="params">info</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;UserException&quot;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">info</span> = info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 将异常信息格式化为字符串 */</span></span><br><span class="line"><span class="title class_">UserException</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&#x27;: &quot;&#x27;</span> + <span class="variable language_">this</span>.<span class="property">info</span> + <span class="string">&#x27;&quot;&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 创建并且抛出 UserException 实例 */</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UserException</span>(<span class="string">&quot;发生用户异常!&quot;</span>); <span class="comment">// UserException &#123;name: &#x27;UserException&#x27;, info: &#x27;发生用户异常!&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="try...catch-语句">try...catch 语句</h3>
<p>如果 <code>try</code>
代码块当中的语句抛出异常，那么程序的执行流程就会立即进入
<code>catch</code> 代码块。如果 <code>try</code>
代码块没有抛出异常，那么程序的执行流程就会跳过 <code>catch</code>
代码块。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">verify</span>(<span class="params">component</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (component === <span class="string">&quot;Transistor&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;是晶体管&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="string">&quot;不是晶体管&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="title function_">verify</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(exception); <span class="comment">// 不是晶体管</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>catch</code> 代码块用于捕捉所有发生在 <code>try</code>
代码块当中的异常，其中的 <code>exception</code> 参数用于接收由
<code>throw</code> 语句抛出的异常对象或者错误信息。</p>
<h3 id="finally-语句">finally 语句</h3>
<p><code>finally</code> 代码块通常会放置在 <code>try...catch</code>
语句之后，无论是否抛出异常都会得到执行，通常用于优雅的退出操作或者释放资源。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="string">&quot;发生异常&quot;</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(exception);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;处理异常&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;异常处理完毕&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">发生异常</span></span><br><span class="line"><span class="comment">处理异常</span></span><br><span class="line"><span class="comment">异常处理完毕</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p><code>finally</code> 语句块里使用 <code>return</code>
关键字返回的结果，也将是整个 <code>try...catch...finally</code>
语句块的返回值，这里无需关心 <code>try</code> 或者 <code>catch</code>
语句块里的返回值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;try 语句&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;catch 语句&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;finally 语句&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">test</span>()); <span class="comment">// &#x27;finally 语句&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="error-对象">Error 对象</h3>
<p><code>Error</code> 对象包含有 <code>name</code>（错误名称）和
<code>message</code>（错误信息）两个属性，通过该对象提供的
<code>Error()</code> 构造函数，可以非常方便的自定义错误对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;错误&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="title function_">test</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (exception) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(exception.<span class="property">name</span>); <span class="comment">// Error</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(exception.<span class="property">message</span>); <span class="comment">// 错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="promise-对象">Promise 对象</h2>
<p>早期的 Web 浏览器端的异步编程主要依靠
<code>回调函数</code>、<code>事件监听</code>、<code>发布/订阅</code>、<code>Promise 的各种 polyfill</code>
这四种方式来进行，当 ES6 规范正式推出之后，在完整实现
<strong>Promise</strong> 规范的同时，还引入了 <code>Generator</code>
函数及其衍生的 <code>async/await</code> 语法糖，将 JavaScript
异步编程带入了全新的时代。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">ES6
Promises</a> 规范源自于开源社区的 <a target="_blank" rel="noopener" href="https://promisesaplus.com/">Promises/A+</a>，是浏览器 JavaScript
以及 NodeJS
上较为早期的异步事件处理方案，也是目前较常使用的异步处理机制。</p>
<h3 id="promise-的-3-种状态">Promise 的 3 种状态</h3>
<p>ES6 Promises 使用<strong>一个 Promise
对象来代表一个异步操作</strong>，它可以包含如下三种状态：</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">状 态</th>
<th style="text-align: left;">描 述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">fulfilled</td>
<td style="text-align: left;">操作成功，then()方法的<code>onFulfilled</code>函数被调用。</td>
</tr>
<tr class="even">
<td style="text-align: left;">rejected</td>
<td style="text-align: left;">操作失败，then()方法的<code>onRejected</code>函数被调用。</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pending</td>
<td style="text-align: left;">初始状态，可能触发<code>fulfilled</code>或<code>rejected</code>状态中的一种。</td>
</tr>
</tbody>
</table>
<p><code>pending</code>状态的 Promise
对象可能触发<code>fulfilled</code>状态并传递一个值给相应的状态处理方法，也可能触发失败状态<code>rejected</code>并传递一个失败信息。当其中任意一种情况出现时，<code>Promise</code>对象<code>then</code>方法所绑定的处理函数（<code>onfulfilled()</code>和<code>onrejected()</code>）就会被调用。当<code>Promise</code>状态为<code>fulfilled</code>时调用<code>onfulfilled()</code>，当<code>Promise</code>状态为<code>rejected</code>时调用<code>onrejected()</code>，三种状态之间的转换图如下：</p>
<p><img src="/Web/Javascript/promise-flow.png"></p>
<blockquote>
<p><code>Promise.prototype.then()</code>和<code>Promise.prototype.catch()</code>方法会返回一个全新的
Promise 对象，因此它们之间可以进行链式调用。</p>
</blockquote>
<p>可以通过<code>new</code>关键字调用构造函数<code>Promise()</code>去实例化一个
Promise 异步对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ... ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="promise-示例代码">Promise 示例代码</h3>
<p>一个简单易于理解的使用 Promise 的示例如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">asyncFunction</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(<span class="string">&quot;你好，异步操作！&quot;</span>);</span><br><span class="line">    &#125;, <span class="number">5000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">asyncFunction</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(value); <span class="comment">// 打印&quot;你好，异步操作！&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// 打印错误信息</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>下面的代码通过 Promise 的异步处理方式来获取 XMLHttpRequest
的数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getURL</span>(<span class="params">URL</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    xhr.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="variable constant_">URL</span>, <span class="literal">true</span>);</span><br><span class="line">    xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (xhr.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(xhr.<span class="property">responseText</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(xhr.<span class="property">statusText</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    xhr.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(xhr.<span class="property">statusText</span>));</span><br><span class="line">    &#125;;</span><br><span class="line">    xhr.<span class="title function_">send</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">URL</span> = <span class="string">&quot;http://www.sina.cn/demo&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getURL</span>(<span class="variable constant_">URL</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span> <span class="title function_">onFulfilled</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> <span class="title function_">onRejected</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<h3 id="promise-构造函数上的原型">Promise 构造函数上的原型</h3>
<h4 id="promise.prototype.constructor"><code>Promise.prototype.constructor</code></h4>
<p>表示 Promise
构造函数的原型，以便于在原型上放置<code>then()</code>、<code>catch()</code>、<code>finally()</code>方法。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// resolve(&#x27;&#x27;) or reject(&#x27;&#x27;)</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="promise.prototype.thenonfulfilled-onrejected"><code>Promise.prototype.then(onFulfilled, onRejected)</code></h4>
<p><code>then()</code>方法返回一个<code>Promise</code>，两个参数分别是
Promise
成功或者失败状态的回调函数。如果忽略某个状态的回调函数参数，或者提供非函数参数，<code>then()</code>方法将会丢失该状态的回调信息，但是并不会产生错误。如果调用<code>then()</code>的
Promise
的状态发生改变，但是<code>then()</code>中并没有对应状态的回调函数，则<code>then()</code>最终将创建一个未经回调函数处理的全新
Promise 对象，并使用最初的 Promise 状态来作为这个全新 Promise
的状态。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;传递给then内的value值。&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(</span><br><span class="line">  <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(value); <span class="comment">// 打印“传递给then内的value值。”</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="promise.prototype.catchonrejected"><code>Promise.prototype.catch(onRejected)</code></h4>
<p><code>catch()</code>只处理<code>rejected</code>的情况，该方法返回一个
Promise，实质是<code>Promise.prototype.then(undefined, onRejected)</code>的语法糖。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;传递给then内的value值。&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(</span><br><span class="line">  <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(value); <span class="comment">// 打印“传递给then内的value值。”</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="promise.prototype.finallyonfinally"><code>Promise.prototype.finally(onFinally)</code></h4>
<p><code>finally()</code>方法返回一个
Promise，在<code>then()</code>和<code>catch()</code>执行完成之后，都会调用<code>finally</code>指定的回调函数，这样可以避免一些重复的语句同时出现在<code>then()</code>和<code>catch()</code>当中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="string">&quot;传递给then内的value值。&quot;</span>);</span><br><span class="line">  <span class="title function_">reject</span>(<span class="string">&quot;传递给catch内error的值。&quot;</span>); <span class="comment">// 此处reject并未被执行，因为Promise状态已经在上面一条语句resolve。</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(value);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;执行到finally方法。&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 打印结果 */</span></span><br><span class="line"><span class="comment">// 传递给then内的value值。</span></span><br><span class="line"><span class="comment">// 执行到finally方法。</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>包括 Eage 在内的 IE
系列浏览器目前都不支持<code>finally()</code>方法。</p>
</blockquote>
<h3 id="promise-对象实例方法">Promise 对象实例方法</h3>
<h4 id="promise.resolvevalue"><code>Promise.resolve(value)</code></h4>
<p>该方法会根据参数的不同，返回不同的 Promise
对象。当接收<code>Promise</code>对象作为参数的时候，返回的还是接收到的<code>Promise</code>对象；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jqueryPromise = $.<span class="title function_">ajax</span>(<span class="string">&quot;http://gc.ditu.aliyun.com/geocoding?a=成都市&quot;</span>); <span class="comment">// jquery返回的promise对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nativePromise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(jqueryPromise);</span><br><span class="line"></span><br><span class="line">nativePromise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(value); <span class="comment">// API接口的返回值</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>当接收到 thenable 类型对象（<em>由 ES6 Promise 提出的 Thenable
是指具有<code>.then()</code>方法的对象</em>）的时候，返回一个具有该 then
方法的全新 Promise 对象；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> thenablePromise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(</span><br><span class="line">  <span class="comment">// thenable类型对象</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">then</span>: <span class="function">(<span class="params">onFulfill, onReject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">onFulfill</span>(<span class="string">&quot;fulfilled!&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(thenablePromise <span class="keyword">instanceof</span> <span class="title class_">Promise</span>); <span class="comment">// 打印true</span></span><br><span class="line"></span><br><span class="line">thenablePromise.<span class="title function_">then</span>(</span><br><span class="line">  <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(value);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// fulfilled!</span></span><br></pre></td></tr></table></figure>
<p>当接收其它数据类型参数的时候（字符串或<code>null</code>）将会返回一个将该参数作为值的全新
Promise 对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">values</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(values[<span class="number">0</span>]); <span class="comment">// 1</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="promise.rejectreason"><code>Promise.reject(reason)</code></h4>
<p>返回一个被<code>reason</code>拒绝的
Promise，但是与<code>resolve()</code>不同之处在于，即使<code>reject()</code>接收的参数是一个
Promise 对象，该函数依然会返回一个全新的 Promise。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> rejectedPromise = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;this is a error!&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(</span><br><span class="line">  rejectedPromise === <span class="title class_">Promise</span>.<span class="title function_">reject</span>(rejectedPromise) <span class="comment">// 打印false</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="promise.alliterable"><code>Promise.all(iterable)</code></h4>
<p>当<code>iterable</code>参数中所有 Promise 都被<code>resolve</code>,
或者参数并不包含 Promise 时,
<code>all()</code>方法返一个回<code>resolve</code>的全新 Promise
对象。当<code>iterable</code>中一个 Promise
返回拒绝<code>reject</code>时,
<code>all()</code>方法会立即终止并返回一个<code>reject</code>的全新
Promise 对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>),</span><br><span class="line">  promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">2</span>),</span><br><span class="line">  promise3 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1, promise2, promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(results); <span class="comment">// 打印[1, 2, 3]</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="promise.raceiterable"><code>Promise.race(iterable)</code></h4>
<p>当<code>iterable</code>参数数组中的任意一个 Promise
对象变为<code>resolve</code>或者<code>reject</code>状态，该函数就会立刻返回一个全新的
Promise 对象，并使用该 Promise
对象进行<code>resolve</code>或者<code>reject</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>),</span><br><span class="line">  promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">2</span>),</span><br><span class="line">  promise3 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([promise1, promise2, promise3]).<span class="title function_">then</span>(<span class="function">(<span class="params">results</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">info</span>(results); <span class="comment">// 打印 1</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="promise-方法链">Promise 方法链</h3>
<p><img src="/Web/Javascript/promise-then-catch-flow.png"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">taskA</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Task A&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">taskB</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Task B&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onRejected</span>(<span class="params">error</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Catch Error: A or B&quot;</span>, error);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">finalTask</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Final Task&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(taskA).<span class="title function_">then</span>(taskB).<span class="title function_">catch</span>(onRejected).<span class="title function_">then</span>(finalTask);</span><br></pre></td></tr></table></figure>
<p>如果<code>taskA()</code>发生异常的话，会按照<code>taskA() → onRejected() → finalTask()</code>这个流程进行处理，<code>taskB()</code>并不会被调用的。</p>
<blockquote>
<p>在上面代码<code>taskA()</code>或<code>taskB()</code>的处理中，如果发生异常或者返回了<code>Rejected</code>状态的<code>Promise</code>对象，就会调用<code>onRejected()</code>方法。</p>
</blockquote>
<p>Promise 中的各个 Task
相互独立，如果<code>taskA()</code>想为<code>taskB()</code>传递参数，需要在<code>taskA()</code>当中<code>return</code>相应的值，该值将会作为<code>taskB()</code>的参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> value + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doubleUp</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">output</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// =&gt; (1 + 1) * 2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(increment)</span><br><span class="line">  .<span class="title function_">then</span>(doubleUp)</span><br><span class="line">  .<span class="title function_">then</span>(output)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// Promise Chain发生异常时调用</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>return</code>的值不仅只局限于字符串或者数值，也可以是普通对象或者
Promise。<code>return</code>值经由<code>Promise.resolve( return返回值 );</code>包装处理，无论回调函数内部返回什么，<code>then()</code>方法总是返回一个新建的
Promise 对象。</p>
</blockquote>
<h3 id="then方法内的函数是异步调用的">then()方法内的函数是异步调用的</h3>
<p>执行<code>Promise.resolve(value)</code>等方法时，如果 Promise
对象立刻进入<code>resolve</code>状态，则是否意味<code>.then()</code>里指定的函数是同步调用的？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Inner Promise&quot;</span>); <span class="comment">// 1</span></span><br><span class="line">  <span class="title function_">resolve</span>(<span class="number">2018</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 3</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Outer Promise&quot;</span>); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Inner Promise</span></span><br><span class="line"><span class="comment">// Outer Promise</span></span><br><span class="line"><span class="comment">// 2018</span></span><br></pre></td></tr></table></figure>
<p>上面的示例代码说明：<strong>传入<code>then()</code>内的函数是被异步执行的</strong>。JavaScript
代码编写原则之一是尽量<strong>不要对异步回调函数进行同步调用</strong>，否则处理顺序可能会与预期不符，甚至导致栈溢出或异常处理错乱；如果需要在将来某个时刻调用异步回调函数，可以使用<code>setTimeout()</code>、<code>setInterval()</code>等异步
API（<em>绑定的函数不会立刻执行，而是延迟到队列的最后</em>）。</p>
<blockquote>
<p>为了避免同时使用同步、异步调用可能引起的混乱，Promise
规范约定只能使用异步调用方式 。</p>
</blockquote>
<h3 id="每次调用-then都会返回新建的-promise">每次调用
then()都会返回新建的 Promise</h3>
<p>Promise
之所以能够进行链式的方法调用，是由于无论<code>then()</code>还是<code>catch()</code>都会返回一个全新的
Promise 对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">resolve</span>(<span class="number">2018</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> thenPromise = promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> catchPromise = thenPromise.<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(promise === thenPromise); <span class="comment">// false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(thenPromise === catchPromise); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>通过<code>===</code>进行严格相等比较，可以看出上述 3 个 Promise
对象是互不相同的，也就证明<code>then()</code>和<code>catch()</code>都返回了不同的
Promise 对象。</p>
<p><img src="/Web/Javascript/then-catch.png"></p>
<p>下面是一个通过<code>then()</code>返回新创建 Promise
对象的错误使用方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 错误的返回方式 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">incorrectAsyncCall</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">  promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> promise;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述写法存在诸多问题，首先在<code>promise.then()</code>中产生的异常不会被外部捕获，其次也不能得到<code>then()</code>的返回值。由于每次调用<code>promise.then()</code>都会返回一个新创建的
Promise 对象，因此需要通过<em>Promise
Chain</em>将调用链式化，修改后的代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 正确的做法 */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">correctAsyncCall</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 直接将链式调用的then()返回</span></span><br><span class="line">  <span class="keyword">return</span> promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>与<code>Promise.then()</code>类似，包括<code>Promise.all()</code>和<code>Promise.race()</code>都会接收<code>Promise</code>对象作为参数，然后返回一个与接收参数不同的全新
Promise 对象，使用时应多加注意。</p>
</blockquote>
<h3 id="使用-reject-而不是-throw">使用 reject 而不是 throw</h3>
<p>Promise
的构造函数以及<code>then()</code>中执行的函数都可以认为是在<code>try...catch</code>块中运行，因此即便使用了<code>throw</code>，程序本身也不会因为抛出异常而终止。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;throw message&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// =&gt; &quot;throw message&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>上面的代码运行时没有任何问题，但是如果需要把 Promise
对象状态设置为<code>Rejected</code>的话，相比<code>throw</code>关键字<code>reject()</code>方法会更加合理。接下来，我们方便的通过
Promise 构造函数中的<code>reject</code>参数，将 Promise
对象的状态设置为<code>Rejected</code>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;reject message&quot;</span>)); <span class="comment">// 发生错误的时候可以向reject()传递Error对象</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// =&gt; &quot;reject message&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>reject</code>比<code>throw</code>更安全另一个原因在于，有些场景下很难届定<code>throw</code>是开发人员主动抛出，还因为真正的代码异常导致的。</p>
</blockquote>
<p>当需要在<code>then()</code>中执行<code>reject</code>操作的时候，可以通过<code>then()</code>当中的回调函数<code>return</code>一个自定义的
Promise 对象。然后根据这个自定义 Promise
对象的状态，下一个<code>then()</code>中注册的的<code>onFulfilled()</code>或<code>onRejected()</code>回调函数会相应进行调用，从而实现<code>then()</code>中不通过<code>throw</code>关键字也能进行<code>reject</code>操作。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> newPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// resolve或者reject的状态决定了下一个then()当中的onFulfilled或onRejected哪个会被调用</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> newPromise;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(onFulfilled, onRejected);</span><br></pre></td></tr></table></figure>
<p>例如下面代码中，<code>newPromise</code>对象状态为<code>Rejected</code>的时候，后续<code>catch()</code>中的<code>onRejected</code>方法会被调用。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> onRejected = <span class="variable language_">console</span>.<span class="property">error</span>.<span class="title function_">bind</span>(<span class="variable language_">console</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> newPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Promise is rejected !&quot;</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> newPromise;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(onRejected);</span><br></pre></td></tr></table></figure>
<p>接下来，再通过<code>Promise.reject()</code>来简化代码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> onRejected = <span class="variable language_">console</span>.<span class="property">error</span>.<span class="title function_">bind</span>(<span class="variable language_">console</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> promise = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>();</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Promise is rejected !&quot;</span>));</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(onRejected);</span><br></pre></td></tr></table></figure>
<p>Promise
的缺点在于一旦新建就会立即执行，并且无法中途取消。其次，如果不设置回调函数，Promise
内部抛出的错误，不会反应到外部。第三，当处于 pending
状态时，无法得知目前进展到哪一个阶段（<strong>刚刚开始还是即将完成</strong>）。</p>
<h2 id="generator-函数">Generator 函数</h2>
<p>Generator 函数是 ES6 提供的一种异步编程解决方案，Generator
函数是一个封装了多个内部状态的状态机，执行 Generator
函数会返回一个遍历器对象，可以通过该对象遍历 Generator
函数内部的每个状态。Generator
函数与普通函数的区别在于：声明时在<code>function</code>关键字与函数名称之间添加<code>*</code>号，函数体内部使用<code>yield</code>（<em>[jild]
n.产出，收益</em>）表达式定义不同的内部状态。</p>
<p>下面代码定义了一个 Generator
函数<code>myGenerator()</code>，其内部拥有<code>Hi</code>和<code>Generator</code>两个<code>yield</code>表达式，该函数共拥有<code>Hi</code>、<code>Generator</code>、<code>!</code>三个状态。与普通函数不同的是，Generator
函数被调用后并不立刻执行，返回的也并非函数执行结果，而是一个指向内部状态的遍历器对象（<em>Iterator
Object</em>）。通过调用遍历器对象的<code>next()</code>方法，可以将执行流程移动至下一状态（<em>即接下来的<code>yield</code>表达式或<code>return</code>语句</em>）。换而言之，<strong>Generator
函数是分段执行的，<code>yield</code>表达式是暂停执行的标记，而<code>next()</code>方法可以恢复执行</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">myGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;Hi&quot;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;Generator&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> generator = <span class="title function_">myGenerator</span>();</span><br><span class="line"></span><br><span class="line">generator.<span class="title function_">next</span>(); <span class="comment">//&#123; value: &#x27;Hi&#x27;, done: false &#125;</span></span><br><span class="line">generator.<span class="title function_">next</span>(); <span class="comment">//&#123; value: &#x27;Generator&#x27;, done: false &#125;</span></span><br><span class="line">generator.<span class="title function_">next</span>(); <span class="comment">//&#123; value: &#x27;!&#x27;, done: true &#125;</span></span><br><span class="line">generator.<span class="title function_">next</span>(); <span class="comment">//&#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>
<p>每次调用遍历器对象的<code>next()</code>就会返回一个拥有<code>value</code>和<code>done</code>属性的对象，其中<code>value</code>属性表示当前内部状态的值（<em>即<code>yield</code>后面表达式的值</em>）；<code>done</code>属性是一个布尔值（<em>用来表示遍历是否结束</em>）。只有调用<code>next()</code>方法之后，对应<code>yield</code>关键字后的表达式才会被执行（<em>即惰性求值
Lazy Evaluation</em>）。</p>
<p><img src="/Web/Javascript/my-generator.gif"></p>
<p>ES6
规范没有指定<code>function</code>关键字与函数名称之间星号<code>*</code>出现的位置，所以下面的写法都是等效的：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">demo</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="comment">// 星号靠左</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">demo</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="comment">// 星号靠右</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">demo</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="comment">// 星号居中</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>* <span class="title function_">demo</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="comment">// 直接连接function关键字与函数名称</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="generator-函数与-iterator">Generator 函数与 Iterator</h3>
<p>Generator
函数返回的是遍历器对象，因此将其赋值给一个对象的<code>Symbol.iterator</code>属性，使该对象具备
Iterator 接口，从而能够通过<code>...</code>运算符进行遍历。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myIterator = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">myIterator[<span class="title class_">Symbol</span>.<span class="property">iterator</span>] = <span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;A&quot;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;B&quot;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="string">&quot;C&quot;</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">[...myIterator]; <span class="comment">// [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, 1, 2, 3]</span></span><br></pre></td></tr></table></figure>
<p>Generator
函数执行后返回的遍历器对象本身就具有<code>Symbol.iterator</code>属性，执行后将会返回自身。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">generator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 生成遍历器对象 */</span></span><br><span class="line"><span class="keyword">let</span> generated = <span class="title function_">generator</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 遍历器对象的Symbol.iterator属性调用后将会返回自身 */</span></span><br><span class="line">generated[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]() === generated; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>基于 ES6 的 JavaScript 简明语法书</p><p><a href="http://www.uinio.com/Web/Javascript/">http://www.uinio.com/Web/Javascript/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Hank</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2011-04-23</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-12-24</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/JavaScript/">JavaScript</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/Linux/Vim/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Vim 常用键位生存指南</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/English/Grammar/"><span class="level-item">英文语法学以致用</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#基础语法"><span class="level-left"><span class="level-item">1</span><span class="level-item">基础语法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#语句"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">语句</span></span></a></li><li><a class="level is-mobile" href="#注释"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">注释</span></span></a></li><li><a class="level is-mobile" href="#变量"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">变量</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#声明"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">声明</span></span></a></li><li><a class="level is-mobile" href="#求值"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item">求值</span></span></a></li><li><a class="level is-mobile" href="#作用域"><span class="level-left"><span class="level-item">1.3.3</span><span class="level-item">作用域</span></span></a></li><li><a class="level is-mobile" href="#变量提升"><span class="level-left"><span class="level-item">1.3.4</span><span class="level-item">变量提升</span></span></a></li><li><a class="level is-mobile" href="#函数提升"><span class="level-left"><span class="level-item">1.3.5</span><span class="level-item">函数提升</span></span></a></li><li><a class="level is-mobile" href="#全局变量"><span class="level-left"><span class="level-item">1.3.6</span><span class="level-item">全局变量</span></span></a></li><li><a class="level is-mobile" href="#常量"><span class="level-left"><span class="level-item">1.3.7</span><span class="level-item">常量</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#数据类型"><span class="level-left"><span class="level-item">2</span><span class="level-item">数据类型</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#数据类型转换"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">数据类型转换</span></span></a></li><li><a class="level is-mobile" href="#字符串转换为数值"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">字符串转换为数值</span></span></a></li><li><a class="level is-mobile" href="#各种字面量"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">各种字面量</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#数组"><span class="level-left"><span class="level-item">2.3.1</span><span class="level-item">数组</span></span></a></li><li><a class="level is-mobile" href="#布尔值"><span class="level-left"><span class="level-item">2.3.2</span><span class="level-item">布尔值</span></span></a></li><li><a class="level is-mobile" href="#整数"><span class="level-left"><span class="level-item">2.3.3</span><span class="level-item">整数</span></span></a></li><li><a class="level is-mobile" href="#浮点数"><span class="level-left"><span class="level-item">2.3.4</span><span class="level-item">浮点数</span></span></a></li><li><a class="level is-mobile" href="#对象"><span class="level-left"><span class="level-item">2.3.5</span><span class="level-item">对象</span></span></a></li><li><a class="level is-mobile" href="#regexp"><span class="level-left"><span class="level-item">2.3.6</span><span class="level-item">RegExp</span></span></a></li><li><a class="level is-mobile" href="#字符串"><span class="level-left"><span class="level-item">2.3.7</span><span class="level-item">字符串</span></span></a></li><li><a class="level is-mobile" href="#转义字符"><span class="level-left"><span class="level-item">2.3.8</span><span class="level-item">转义字符</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#运算符"><span class="level-left"><span class="level-item">3</span><span class="level-item">运算符</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#赋值运算符"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">赋值运算符</span></span></a></li><li><a class="level is-mobile" href="#比较运算符"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">比较运算符</span></span></a></li><li><a class="level is-mobile" href="#算数运算符"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">算数运算符</span></span></a></li><li><a class="level is-mobile" href="#位运算符"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">位运算符</span></span></a></li><li><a class="level is-mobile" href="#逻辑运算符"><span class="level-left"><span class="level-item">3.5</span><span class="level-item">逻辑运算符</span></span></a></li><li><a class="level is-mobile" href="#条件运算符"><span class="level-left"><span class="level-item">3.6</span><span class="level-item">条件运算符</span></span></a></li><li><a class="level is-mobile" href="#分组操作符"><span class="level-left"><span class="level-item">3.7</span><span class="level-item">分组操作符</span></span></a></li><li><a class="level is-mobile" href="#typeof-操作符"><span class="level-left"><span class="level-item">3.8</span><span class="level-item">typeof 操作符</span></span></a></li><li><a class="level is-mobile" href="#void-操作符"><span class="level-left"><span class="level-item">3.9</span><span class="level-item">void 操作符</span></span></a></li><li><a class="level is-mobile" href="#字符串连接"><span class="level-left"><span class="level-item">3.10</span><span class="level-item">字符串连接</span></span></a></li><li><a class="level is-mobile" href="#剩余参数"><span class="level-left"><span class="level-item">3.11</span><span class="level-item">剩余参数</span></span></a></li><li><a class="level is-mobile" href="#解构赋值"><span class="level-left"><span class="level-item">3.12</span><span class="level-item">解构赋值</span></span></a></li></ul></li><li><a class="level is-mobile" href="#流程控制"><span class="level-left"><span class="level-item">4</span><span class="level-item">流程控制</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#语句块"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">语句块</span></span></a></li><li><a class="level is-mobile" href="#条件判断"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">条件判断</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#if...else-语句"><span class="level-left"><span class="level-item">4.2.1</span><span class="level-item">if...else 语句</span></span></a></li><li><a class="level is-mobile" href="#switch-语句"><span class="level-left"><span class="level-item">4.2.2</span><span class="level-item">switch 语句</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#循环"><span class="level-left"><span class="level-item">5</span><span class="level-item">循环</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#for-循环"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">for 循环</span></span></a></li><li><a class="level is-mobile" href="#do...while-循环"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">do...while 循环</span></span></a></li><li><a class="level is-mobile" href="#while-循环"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">while 循环</span></span></a></li><li><a class="level is-mobile" href="#label-语句"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">label 语句</span></span></a></li><li><a class="level is-mobile" href="#break-语句"><span class="level-left"><span class="level-item">5.5</span><span class="level-item">break 语句</span></span></a></li><li><a class="level is-mobile" href="#continue-语句"><span class="level-left"><span class="level-item">5.6</span><span class="level-item">continue 语句</span></span></a></li><li><a class="level is-mobile" href="#for...in-循环"><span class="level-left"><span class="level-item">5.7</span><span class="level-item">for...in 循环</span></span></a></li><li><a class="level is-mobile" href="#for...of-循环"><span class="level-left"><span class="level-item">5.8</span><span class="level-item">for...of 循环</span></span></a></li><li><a class="level is-mobile" href="#array.foreach-方法"><span class="level-left"><span class="level-item">5.9</span><span class="level-item">Array.forEach() 方法</span></span></a></li></ul></li><li><a class="level is-mobile" href="#数组-1"><span class="level-left"><span class="level-item">6</span><span class="level-item">数组</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#创建数组"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">创建数组</span></span></a></li><li><a class="level is-mobile" href="#初始化数组"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">初始化数组</span></span></a></li><li><a class="level is-mobile" href="#引用数组元素"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">引用数组元素</span></span></a></li><li><a class="level is-mobile" href="#数组长度"><span class="level-left"><span class="level-item">6.4</span><span class="level-item">数组长度</span></span></a></li><li><a class="level is-mobile" href="#遍历数组"><span class="level-left"><span class="level-item">6.5</span><span class="level-item">遍历数组</span></span></a></li></ul></li><li><a class="level is-mobile" href="#函数"><span class="level-left"><span class="level-item">7</span><span class="level-item">函数</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#函数定义"><span class="level-left"><span class="level-item">7.1</span><span class="level-item">函数定义</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#函数表达式"><span class="level-left"><span class="level-item">7.1.1</span><span class="level-item">函数表达式</span></span></a></li><li><a class="level is-mobile" href="#function-对象"><span class="level-left"><span class="level-item">7.1.2</span><span class="level-item">Function 对象</span></span></a></li></ul></li><li><a class="level is-mobile" href="#调用函数"><span class="level-left"><span class="level-item">7.2</span><span class="level-item">调用函数</span></span></a></li><li><a class="level is-mobile" href="#函数的作用域"><span class="level-left"><span class="level-item">7.3</span><span class="level-item">函数的作用域</span></span></a></li><li><a class="level is-mobile" href="#递归函数调用"><span class="level-left"><span class="level-item">7.4</span><span class="level-item">递归函数调用</span></span></a></li><li><a class="level is-mobile" href="#嵌套函数"><span class="level-left"><span class="level-item">7.5</span><span class="level-item">嵌套函数</span></span></a></li><li><a class="level is-mobile" href="#闭包-closure"><span class="level-left"><span class="level-item">7.6</span><span class="level-item">闭包 Closure</span></span></a></li><li><a class="level is-mobile" href="#arguments-对象"><span class="level-left"><span class="level-item">7.7</span><span class="level-item">arguments 对象</span></span></a></li><li><a class="level is-mobile" href="#默认参数"><span class="level-left"><span class="level-item">7.8</span><span class="level-item">默认参数</span></span></a></li><li><a class="level is-mobile" href="#剩余参数-1"><span class="level-left"><span class="level-item">7.9</span><span class="level-item">剩余参数</span></span></a></li><li><a class="level is-mobile" href="#箭头函数"><span class="level-left"><span class="level-item">7.10</span><span class="level-item">箭头函数</span></span></a></li><li><a class="level is-mobile" href="#预定义函数"><span class="level-left"><span class="level-item">7.11</span><span class="level-item">预定义函数</span></span></a></li></ul></li><li><a class="level is-mobile" href="#对象-1"><span class="level-left"><span class="level-item">8</span><span class="level-item">对象</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#创建对象"><span class="level-left"><span class="level-item">8.1</span><span class="level-item">创建对象</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#对象字面量"><span class="level-left"><span class="level-item">8.1.1</span><span class="level-item">对象字面量 {}</span></span></a></li><li><a class="level is-mobile" href="#构造函数-function"><span class="level-left"><span class="level-item">8.1.2</span><span class="level-item">构造函数 function</span></span></a></li><li><a class="level is-mobile" href="#object.create-方法"><span class="level-left"><span class="level-item">8.1.3</span><span class="level-item">Object.create() 方法</span></span></a></li></ul></li><li><a class="level is-mobile" href="#创建对象实例-new"><span class="level-left"><span class="level-item">8.2</span><span class="level-item">创建对象实例 new</span></span></a></li><li><a class="level is-mobile" href="#指向对象自身-this"><span class="level-left"><span class="level-item">8.3</span><span class="level-item">指向对象自身 this</span></span></a></li><li><a class="level is-mobile" href="#访问父对象-super"><span class="level-left"><span class="level-item">8.4</span><span class="level-item">访问父对象 super</span></span></a></li><li><a class="level is-mobile" href="#删除属性-delete"><span class="level-left"><span class="level-item">8.5</span><span class="level-item">删除属性 delete</span></span></a></li><li><a class="level is-mobile" href="#判断属性存在-in"><span class="level-left"><span class="level-item">8.6</span><span class="level-item">判断属性存在 in</span></span></a></li><li><a class="level is-mobile" href="#判断实例类型-instanceof"><span class="level-left"><span class="level-item">8.7</span><span class="level-item">判断实例类型 instanceof</span></span></a></li><li><a class="level is-mobile" href="#getters-setters"><span class="level-left"><span class="level-item">8.8</span><span class="level-item">getters &amp; setters</span></span></a></li><li><a class="level is-mobile" href="#遍历对象属性"><span class="level-left"><span class="level-item">8.9</span><span class="level-item">遍历对象属性</span></span></a></li></ul></li><li><a class="level is-mobile" href="#原型继承"><span class="level-left"><span class="level-item">9</span><span class="level-item">原型继承</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#继承属性"><span class="level-left"><span class="level-item">9.1</span><span class="level-item">继承属性</span></span></a></li><li><a class="level is-mobile" href="#添加属性"><span class="level-left"><span class="level-item">9.2</span><span class="level-item">添加属性</span></span></a></li><li><a class="level is-mobile" href="#属性默认值-构造函数参数"><span class="level-left"><span class="level-item">9.3</span><span class="level-item">属性默认值 &amp; 构造函数参数</span></span></a></li><li><a class="level is-mobile" href="#本地属性-继承属性"><span class="level-left"><span class="level-item">9.4</span><span class="level-item">本地属性 &amp; 继承属性</span></span></a></li><li><a class="level is-mobile" href="#prototype-与-__proto__"><span class="level-left"><span class="level-item">9.5</span><span class="level-item">prototype 与 __proto__</span></span></a></li><li><a class="level is-mobile" href="#instanceof-判断对象的实例"><span class="level-left"><span class="level-item">9.6</span><span class="level-item">instanceof 判断对象的实例</span></span></a></li><li><a class="level is-mobile" href="#多重继承"><span class="level-left"><span class="level-item">9.7</span><span class="level-item">多重继承</span></span></a></li></ul></li><li><a class="level is-mobile" href="#类-class"><span class="level-left"><span class="level-item">10</span><span class="level-item">类 class</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#类的声明与定义"><span class="level-left"><span class="level-item">10.1</span><span class="level-item">类的声明与定义</span></span></a></li><li><a class="level is-mobile" href="#类体"><span class="level-left"><span class="level-item">10.2</span><span class="level-item">类体</span></span></a></li><li><a class="level is-mobile" href="#static-静态成员"><span class="level-left"><span class="level-item">10.3</span><span class="level-item">static 静态成员</span></span></a></li><li><a class="level is-mobile" href="#私有属性"><span class="level-left"><span class="level-item">10.4</span><span class="level-item">私有属性</span></span></a></li><li><a class="level is-mobile" href="#extends-关键字"><span class="level-left"><span class="level-item">10.5</span><span class="level-item">extends 关键字</span></span></a></li><li><a class="level is-mobile" href="#super-指向父类"><span class="level-left"><span class="level-item">10.6</span><span class="level-item">super 指向父类</span></span></a></li></ul></li><li><a class="level is-mobile" href="#异常处理"><span class="level-left"><span class="level-item">11</span><span class="level-item">异常处理</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#异常类型"><span class="level-left"><span class="level-item">11.1</span><span class="level-item">异常类型</span></span></a></li><li><a class="level is-mobile" href="#throw-语句"><span class="level-left"><span class="level-item">11.2</span><span class="level-item">throw 语句</span></span></a></li><li><a class="level is-mobile" href="#try...catch-语句"><span class="level-left"><span class="level-item">11.3</span><span class="level-item">try...catch 语句</span></span></a></li><li><a class="level is-mobile" href="#finally-语句"><span class="level-left"><span class="level-item">11.4</span><span class="level-item">finally 语句</span></span></a></li><li><a class="level is-mobile" href="#error-对象"><span class="level-left"><span class="level-item">11.5</span><span class="level-item">Error 对象</span></span></a></li></ul></li><li><a class="level is-mobile" href="#promise-对象"><span class="level-left"><span class="level-item">12</span><span class="level-item">Promise 对象</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#promise-的-3-种状态"><span class="level-left"><span class="level-item">12.1</span><span class="level-item">Promise 的 3 种状态</span></span></a></li><li><a class="level is-mobile" href="#promise-示例代码"><span class="level-left"><span class="level-item">12.2</span><span class="level-item">Promise 示例代码</span></span></a></li><li><a class="level is-mobile" href="#promise-构造函数上的原型"><span class="level-left"><span class="level-item">12.3</span><span class="level-item">Promise 构造函数上的原型</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#promise.prototype.constructor"><span class="level-left"><span class="level-item">12.3.1</span><span class="level-item">Promise.prototype.constructor</span></span></a></li><li><a class="level is-mobile" href="#promise.prototype.thenonfulfilled-onrejected"><span class="level-left"><span class="level-item">12.3.2</span><span class="level-item">Promise.prototype.then(onFulfilled, onRejected)</span></span></a></li><li><a class="level is-mobile" href="#promise.prototype.catchonrejected"><span class="level-left"><span class="level-item">12.3.3</span><span class="level-item">Promise.prototype.catch(onRejected)</span></span></a></li><li><a class="level is-mobile" href="#promise.prototype.finallyonfinally"><span class="level-left"><span class="level-item">12.3.4</span><span class="level-item">Promise.prototype.finally(onFinally)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#promise-对象实例方法"><span class="level-left"><span class="level-item">12.4</span><span class="level-item">Promise 对象实例方法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#promise.resolvevalue"><span class="level-left"><span class="level-item">12.4.1</span><span class="level-item">Promise.resolve(value)</span></span></a></li><li><a class="level is-mobile" href="#promise.rejectreason"><span class="level-left"><span class="level-item">12.4.2</span><span class="level-item">Promise.reject(reason)</span></span></a></li><li><a class="level is-mobile" href="#promise.alliterable"><span class="level-left"><span class="level-item">12.4.3</span><span class="level-item">Promise.all(iterable)</span></span></a></li><li><a class="level is-mobile" href="#promise.raceiterable"><span class="level-left"><span class="level-item">12.4.4</span><span class="level-item">Promise.race(iterable)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#promise-方法链"><span class="level-left"><span class="level-item">12.5</span><span class="level-item">Promise 方法链</span></span></a></li><li><a class="level is-mobile" href="#then方法内的函数是异步调用的"><span class="level-left"><span class="level-item">12.6</span><span class="level-item">then()方法内的函数是异步调用的</span></span></a></li><li><a class="level is-mobile" href="#每次调用-then都会返回新建的-promise"><span class="level-left"><span class="level-item">12.7</span><span class="level-item">每次调用
then()都会返回新建的 Promise</span></span></a></li><li><a class="level is-mobile" href="#使用-reject-而不是-throw"><span class="level-left"><span class="level-item">12.8</span><span class="level-item">使用 reject 而不是 throw</span></span></a></li></ul></li><li><a class="level is-mobile" href="#generator-函数"><span class="level-left"><span class="level-item">13</span><span class="level-item">Generator 函数</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#generator-函数与-iterator"><span class="level-left"><span class="level-item">13.1</span><span class="level-item">Generator 函数与 Iterator</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/C-C/"><span class="level-start"><span class="level-item">C/C++</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Design/"><span class="level-start"><span class="level-item">Design</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Electronics/"><span class="level-start"><span class="level-item">Electronics</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Embedded/"><span class="level-start"><span class="level-item">Embedded</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/English/"><span class="level-start"><span class="level-item">English</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Project/"><span class="level-start"><span class="level-item">Project</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Thinking/"><span class="level-start"><span class="level-item">Thinking</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Web/"><span class="level-start"><span class="level-item">Web</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/categories/Zen/"><span class="level-start"><span class="level-item">Zen</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%B5%E5%AD%90%E7%A1%AC%E4%BB%B6/"><span class="level-start"><span class="level-item">电子硬件</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/Electronics/Battery/"><img src="/Electronics/Battery/logo.png" alt="关于锂离子电池选型里的一些重要细节"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-08-28T16:00:00.000Z">2024-08-29</time></p><p class="title"><a href="/Electronics/Battery/">关于锂离子电池选型里的一些重要细节</a></p><p class="categories"><a href="/categories/%E7%94%B5%E5%AD%90%E7%A1%AC%E4%BB%B6/">电子硬件</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Electronics/LTspice/"><img src="/Electronics/LTspice/logo.png" alt="如何使用新版本的 LTspice 进行模拟电路仿真"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-05-21T16:00:00.000Z">2024-05-22</time></p><p class="title"><a href="/Electronics/LTspice/">如何使用新版本的 LTspice 进行模拟电路仿真</a></p><p class="categories"><a href="/categories/Electronics/">Electronics</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Electronics/SI9000/"><img src="/Electronics/SI9000/logo.png" alt="基于 Polar Si9000e 计算传输线特征阻抗的全攻略"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-04-04T16:00:00.000Z">2024-04-05</time></p><p class="title"><a href="/Electronics/SI9000/">基于 Polar Si9000e 计算传输线特征阻抗的全攻略</a></p><p class="categories"><a href="/categories/Electronics/">Electronics</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Electronics/Component/"><img src="/Electronics/Component/logo.png" alt="硬件电路设计当中 の 常用分立元器件选型"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-03-30T16:00:00.000Z">2024-03-31</time></p><p class="title"><a href="/Electronics/Component/">硬件电路设计当中 の 常用分立元器件选型</a></p><p class="categories"><a href="/categories/Electronics/">Electronics</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/Project/UINIO-MCU-GD32/"><img src="/Project/UINIO-MCU-GD32/logo.png" alt="兆易创新 UINIO-MCU-GD32F350 固件库开发指南"></a></figure><div class="media-content"><p class="date"><time dateTime="2024-03-17T16:00:00.000Z">2024-03-18</time></p><p class="title"><a href="/Project/UINIO-MCU-GD32/">兆易创新 UINIO-MCU-GD32F350 固件库开发指南</a></p><p class="categories"><a href="/categories/Project/">Project</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Analog-Circuit/"><span class="tag">Analog Circuit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Arduino/"><span class="tag">Arduino</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C-C/"><span class="tag">C/C++</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CAD/"><span class="tag">CAD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CSS/"><span class="tag">CSS</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Calculus/"><span class="tag">Calculus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Circuit-Analysis/"><span class="tag">Circuit Analysis</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Circuit-Theory/"><span class="tag">Circuit Theory</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Command/"><span class="tag">Command</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Component/"><span class="tag">Component</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Config/"><span class="tag">Config</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Convention/"><span class="tag">Convention</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Digital-Circuit/"><span class="tag">Digital Circuit</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/EDA/"><span class="tag">EDA</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Economy/"><span class="tag">Economy</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Elementary/"><span class="tag">Elementary</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Encrypt/"><span class="tag">Encrypt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GCC-GDB/"><span class="tag">GCC/GDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Grammar/"><span class="tag">Grammar</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Industry/"><span class="tag">Industry</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Instrument/"><span class="tag">Instrument</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LaTeX/"><span class="tag">LaTeX</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Life/"><span class="tag">Life</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MCU/"><span class="tag">MCU</span><span class="tag">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Make/"><span class="tag">Make</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Markdown/"><span class="tag">Markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mobile/"><span class="tag">Mobile</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/New-Concept-English/"><span class="tag">New Concept English</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PCB/"><span class="tag">PCB</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Protocol/"><span class="tag">Protocol</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python3/"><span class="tag">Python3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Qt/"><span class="tag">Qt</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RFID/"><span class="tag">RFID</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Server/"><span class="tag">Server</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Simulation/"><span class="tag">Simulation</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Solidity/"><span class="tag">Solidity</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Tools/"><span class="tag">Tools</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zen/"><span class="tag">Zen</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E6%B1%A0/"><span class="tag">电池</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E6%BA%90/"><span class="tag">电源</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><p class="is-size-7"><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><img src="/images/ICP.png"> 蜀 ICP 备 2021027760 号</a><p class="is-size-7">Copyright © 2024 <span>UinIO.com</span> by Hank</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://unpkg.com/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://unpkg.com/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://unpkg.com/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://unpkg.com/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><script src="/js/math.js"></script><script id="MathJax-script" async src="/js/es5/tex-mml-chtml.js"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>